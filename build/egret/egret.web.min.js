var __define=this.__define||function(e,t,i,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:i,set:n})},egret;!function(e){var t;!function(t){var i=function(){function e(){}var t=e;return p=t.prototype,e.call=function(){},e.addCallback=function(){},e}();t.WebExternalInterface=i,e.registerClass(i,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),e.ExternalInterface=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i;!function(){function i(e){return window.localStorage.getItem(e)}function n(t,i){try{return window.localStorage.setItem(t,i),!0}catch(n){return e.$warn(1018,t,i),!1}}function o(e){window.localStorage.removeItem(e)}function r(){window.localStorage.clear()}t.getItem=i,t.setItem=n,t.removeItem=o,t.clear=r}(i=t.web||(t.web={}))}(t=e.localStorage||(e.localStorage={}))}(egret||(egret={}));var __extends=this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},egret;!function(e){var t;!function(t){var i=function(i){function n(){i.call(this),this.loaded=!1}__extends(n,i);var o=n;return p=o.prototype,p.load=function(t){function i(){r(),s.loaded=!0,s.dispatchEventWith(e.Event.COMPLETE)}function o(){r(),s.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}function r(){a.removeEventListener("canplaythrough",i),a.removeEventListener("error",o)}var s=this;this.url=t;var a=new Audio(t);a.addEventListener("canplaythrough",i),a.addEventListener("error",o),a.load(),this.originAudio=a,n.$recycle(this.url,a)},p.play=function(e,i){e=+e||0,i=+i||0;var o=n.$pop(this.url);null==o?o=this.originAudio.cloneNode():o.load(),o.autoplay=!0;var r=new t.HtmlSoundChannel(o);return r.$url=this.url,r.$loops=i,r.$startTime=e,r.$play(),r},p.preload=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.type=e,t&&window.setTimeout(function(){t.call(i)},0)},p.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),n.$clear(this.url)},p.destroy=function(){this.originAudio=null,this.loaded=!1},n.$clear=function(e){var t=n.audios[e];t&&(t.length=0)},n.$pop=function(e){var t=n.audios[e];return t&&t.length>0?t.pop():null},n.$recycle=function(e,t){var i=n.audios[e];null==n.audios[e]&&(i=n.audios[e]=[]),i.push(t)},n.MUSIC="music",n.EFFECT="effect",n.audios={},n}(e.EventDispatcher);t.HtmlSound=i,e.registerClass(i,"egret.web.HtmlSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function n(t){var n=this;i.call(this),this.$startTime=0,this.audio=null,this.onPlayEnd=function(){return 1==n.$loops?(n.stop(),void n.dispatchEventWith(e.Event.SOUND_COMPLETE)):(n.$loops>0&&n.$loops--,n.audio.load(),void n.$play())},t.addEventListener("ended",this.onPlayEnd),this.audio=t}__extends(n,i);var o=__define,r=n;return p=r.prototype,p.$play=function(){try{this.audio.currentTime=this.$startTime}catch(e){}finally{this.audio.play()}},p.stop=function(){if(this.audio){var e=this.audio;e.pause(),e.removeEventListener("ended",this.onPlayEnd),this.audio=null,t.HtmlSound.$recycle(this.$url,e)}},o(p,"volume",function(){return this.audio?this.audio.volume:1},function(e){this.audio&&(this.audio.volume=e)}),o(p,"position",function(){return this.audio?this.audio.currentTime:0}),n}(e.EventDispatcher);t.HtmlSoundChannel=i,e.registerClass(i,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function n(){i.call(this),this.loaded=!1}__extends(n,i);var o=n;return p=o.prototype,p.load=function(i){var n=this;this.url=i,QZAppExternal.preloadSound(function(t){0==t.code?(n.loaded=!0,n.dispatchEventWith(e.Event.COMPLETE)):n.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},{bid:-1,url:t.Html5Capatibility._QQRootPath+i,refresh:1})},p.preload=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.type=e,t&&window.setTimeout(function(){t.call(i)},0)},p.play=function(e,i){e=+e||0,i=+i||0;var n=new t.QQSoundChannel;return n.$url=this.url,n.$loops=i,n.$type=this.type,n.$startTime=e,n.$play(),n},p.close=function(){},p.destroy=function(){this.loaded=!1,this.type==e.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()},n.MUSIC="music",n.EFFECT="effect",n}(e.EventDispatcher);t.QQSound=i,e.registerClass(i,"egret.web.QQSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(){var i=this;t.call(this),this.$startTime=0,this.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(e.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},this._startTime=0}__extends(i,t);var n=__define,o=i;return p=o.prototype,p.$play=function(){var t=this;this._startTime=Date.now();var i=0;i=t.$loops>0?t.$loops-1:-1,this.$type==e.Sound.EFFECT?QZAppExternal.playLocalSound(function(){},{bid:-1,url:t.$url,loop:i}):QZAppExternal.playLocalBackSound(function(){},{bid:-1,url:t.$url,loop:i})},p.stop=function(){this.$type==e.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()},n(p,"volume",function(){return 1},function(){}),n(p,"position",function(){return Math.floor(Date.now()-this._startTime)}),i}(e.EventDispatcher);t.QQSoundChannel=i,e.registerClass(i,"egret.web.QQSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.decodeAudios=function(){if(!(t.decodeArr.length<=0||t.isDecoding)){t.isDecoding=!0;var i=t.decodeArr.shift();t.ctx.decodeAudioData(i.buffer,function(e){i.self.audioBuffer=e,i.success&&i.success(),t.isDecoding=!1,t.decodeAudios()},function(){alert(e.getString(1034,i.url)),i.fail&&i.fail(),t.isDecoding=!1,t.decodeAudios()})}},t.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,t.ctx=t.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,t.decodeArr=[],t.isDecoding=!1,t}();t.WebAudioDecode=i,e.registerClass(i,"egret.web.WebAudioDecode");var n=function(n){function o(){n.call(this),this.loaded=!1}__extends(o,n);var r=o;return p=r.prototype,p.load=function(t){function n(){r.loaded=!0,r.dispatchEventWith(e.Event.COMPLETE)}function o(){r.dispatchEventWith(e.IOErrorEvent.IO_ERROR)}var r=this;this.url=t;var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",console.log("loadWebAudio"),s.onload=function(){r._arrayBuffer=s.response,i.decodeArr.push({buffer:r._arrayBuffer,success:n,fail:o,self:r,url:r.url}),i.decodeAudios()},s.send()},p.preload=function(e,t,i){void 0===t&&(t=null),void 0===i&&(i=null),this.type=e,t&&window.setTimeout(function(){t.call(i)},0)},p.play=function(e,i){e=+e||0,i=+i||0;var n=new t.WebAudioSoundChannel;return n.$url=this.url,n.$loops=i,n.$audioBuffer=this.audioBuffer,n.$startTime=e,n.$play(),n},p.close=function(){},p.destroy=function(){this.loaded=!1},o.MUSIC="music",o.EFFECT="effect",o}(e.EventDispatcher);t.WebAudioSound=n,e.registerClass(n,"egret.web.WebAudioSound",["egret.Sound"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function n(){var n=this;i.call(this),this.$startTime=0,this.bufferSource=null,this.context=t.WebAudioDecode.ctx,this._currentTime=0,this._volume=1,this.onPlayEnd=function(){return 1==n.$loops?(n.stop(),void n.dispatchEventWith(e.Event.SOUND_COMPLETE)):(n.$loops>0&&n.$loops--,void n.$play())},this._startTime=0,this.gain=this.context.createGain?this.context.createGain():this.context.createGainNode()}__extends(n,i);var o=__define,r=n;return p=r.prototype,p.$play=function(){this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var e=this.context,t=this.gain,i=e.createBufferSource();this.bufferSource=i,i.buffer=this.$audioBuffer,i.connect(t),t.connect(e.destination),i.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,i.start(0,this._currentTime),this._currentTime=0},p.stop=function(){if(this.bufferSource){var e=this.bufferSource;e.stop?e.stop(0):e.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null}},o(p,"volume",function(){return this._volume},function(e){this._volume=e,this.gain.gain.value=e}),o(p,"position",function(){return this.bufferSource?Math.floor(Date.now()-this._startTime):0}),n}(e.EventDispatcher);t.WebAudioSoundChannel=i,e.registerClass(i,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(){var i=this;t.call(this),this.loaded=!1,this.closed=!1,this.heightSet=0/0,this.widthSet=0/0,this._fullscreen=!0,this.onVideoLoaded=function(){i.video.removeEventListener("canplay",i.onVideoLoaded);{var t=i.video;i.width,i.height}i.loaded=!0,t.pause(),i.posterData&&(i.posterData.width=t.videoWidth,i.posterData.height=t.videoHeight),t.width=t.videoWidth,t.height=t.videoHeight,i.$invalidateContentBounds(),i.width=isNaN(i.widthSet)?t.videoWidth:i.widthSet,i.height=isNaN(i.heightSet)?t.videoHeight:i.heightSet,i.dispatchEventWith(e.Event.COMPLETE)},this.$renderRegion=new e.sys.Region,this.once(e.Event.ADDED_TO_STAGE,this.loadPoster,this)}__extends(i,t);var n=__define,o=i;return p=o.prototype,p.load=function(t){var i=this;if(this.src=t,!this.video||this.video.src!=t){var n=document.createElement("video");n.src=t,n.setAttribute("webkit-playsinline","webkit-playsinline"),n.addEventListener("canplay",this.onVideoLoaded),n.addEventListener("error",function(){return i.onVideoError()}),n.addEventListener("ended",function(){return i.onVideoEnded()}),n.load(),n.play(),e.setTimeout(function(){return n.pause()},this,16),this.video=n}},p.play=function(t,i){var n=this;if(void 0===i&&(i=!1),0==this.loaded)return this.load(this.src),void this.once(e.Event.COMPLETE,function(){return n.play(t,i)},this);var o=this.video;void 0!=t&&(o.currentTime=+t||0),o.loop=!!i,o.play(),o.style.position="absolute",o.style.top="0px",o.style.left="0px",o.style.height="0",o.style.width="0",document.body.appendChild(o);var r=!1;this._fullscreen&&(r=this.goFullscreen()),0==r&&(o.setAttribute("webkit-playsinline","webkit-playsinline"),e.startTick(this.markDirty,this))},p.goFullscreen=function(){var t=this,i=this.video;if(i.webkitRequestFullscreen)i.webkitRequestFullscreen();else if(i.webkitRequestFullScreen)i.webkitRequestFullScreen();else if(i.msRequestFullscreen)i.msRequestFullscreen();else{if(!i.requestFullscreen)return!1;i.requestFullscreen()}return i.removeAttribute("webkit-playsinline"),i.onwebkitfullscreenchange=function(){var e=!!i.webkitDisplayingFullscreen;e||t.pause()},i.onwebkitfullscreenerror=function(){e.$error(3003)},!0},p.close=function(){this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&(this.video.remove&&this.video.remove(),this.video=null),this.closed=!0,this.loaded=!1},p.pause=function(){this.video&&(this.video.pause(),this.onVideoEnded()),e.stopTick(this.markDirty,this)},n(p,"volume",function(){return this.video?this.video.volume:1},function(e){this.video&&(this.video.volume=e)}),n(p,"position",function(){return this.video?this.video.currentTime:0},function(e){this.video&&(this.video.currentTime=e)}),n(p,"fullscreen",function(){return this._fullscreen},function(e){this._fullscreen=!!e,this.video&&0==this.video.paused&&this.goFullscreen()}),n(p,"bitmapData",function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=e.web.toBitmapData(this.video)),this._bitmapData):null}),p.loadPoster=function(){var t=this,i=this.poster;if(i){var n=new e.ImageLoader;n.once(e.Event.COMPLETE,function(){var e=n.data;t.posterData=n.data,t.video&&t.loaded?(e.width=t.video.videoWidth,e.height=t.video.videoHeight):(e.width=isNaN(t.widthSet)?e.width:t.widthSet,e.height=isNaN(t.heightSet)?e.height:t.heightSet),t.$invalidateContentBounds()},this),n.load(i)}},p.onVideoEnded=function(){this.dispatchEventWith(e.Event.ENDED),this.$invalidateContentBounds()},p.onVideoError=function(){this.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},p.$measureContentBounds=function(e){var t=this.bitmapData,i=this.posterData;t?e.setTo(0,0,t.width,t.height):i?e.setTo(0,0,i.width,i.height):e.setEmpty()},p.$render=function(e){var t=this.bitmapData,i=this.posterData;(!t||this.video&&this.video.paused)&&i&&e.drawImage(i,0,0,i.width,i.height),t&&(e.imageSmoothingEnabled=!0,e.drawImage(t,0,0,t.width,t.height))},p.markDirty=function(){return this.$invalidate(),!0},p.$setHeight=function(e){t.prototype.$setHeight.call(this,e),this.heightSet=+e||0},p.$setWidth=function(e){t.prototype.$setWidth.call(this,e),this.widthSet=+e||0},i}(e.DisplayObject);t.WebVideo=i,e.registerClass(i,"egret.web.WebVideo",["egret.Video"]),e.Video=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(){t.call(this),this._url=""}__extends(i,t);var n=__define,o=i;return p=o.prototype,n(p,"response",function(){return this._xhr?this._xhr.response?this._xhr.response:this._xhr.responseXML?this._xhr.responseXML:this._xhr.responseText?this._xhr.responseText:null:null}),n(p,"responseType",function(){return this._responseType},function(e){this._responseType=e}),n(p,"withCredentials",function(){return this._withCredentials},function(e){this._withCredentials=e}),p.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},p.open=function(e,t){void 0===t&&(t="GET"),this._url=e,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),null!=this._responseType&&(this._xhr.responseType=this.responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),null!=this.header&&this._xhr.setRequestHeader(this.header,this.headerValue),this._xhr.open(t,e,!0)},p.send=function(e){this._xhr.send(e)},p.abort=function(){this._xhr&&this._xhr.abort()},p.getAllResponseHeaders=function(){if(!this._xhr)return null;var e=this._xhr.getAllResponseHeaders();return e?e:""},p.setRequestHeader=function(e,t){this.header=e,this.headerValue=t},p.getResponseHeader=function(e){if(!this._xhr)return null;var t=this._xhr.getResponseHeader(e);return t?t:""},p.onReadyStateChange=function(){var t=this._xhr;if(4==t.readyState){var i=t.status>=400||0==t.status,n=(this._url,this);window.setTimeout(function(){n.dispatchEventWith(i?e.IOErrorEvent.IO_ERROR:e.Event.COMPLETE)},0)}},p.updateProgress=function(t){t.lengthComputable&&e.ProgressEvent.dispatchProgressEvent(this,e.ProgressEvent.PROGRESS,t.loaded,t.total)},i}(e.EventDispatcher);t.WebHttpRequest=i,e.registerClass(i,"egret.web.WebHttpRequest",["egret.HttpRequest"]),e.HttpRequest=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=window.URL||window.webkitURL,n=i&&"iOS"==e.Capabilities.os;if(n){var o=window.navigator.userAgent.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];parseInt(o.match(/\d(_\d)*/)[0].charAt(0))<7&&(n=!1)}var r=function(o){function r(){o.apply(this,arguments),this.data=null,this.crossOrigin=null,this.currentImage=null,this.request=null}__extends(r,o);var s=r;return p=s.prototype,p.load=function(t){if(n&&0!=t.indexOf("data:")&&0!=t.indexOf("http:")&&0!=t.indexOf("https:")){var i=this.request;i||(i=this.request=new e.web.WebHttpRequest,i.addEventListener(e.Event.COMPLETE,this.onBlobLoaded,this),i.addEventListener(e.IOErrorEvent.IO_ERROR,this.onBlobError,this),i.responseType="blob"),i.open(t),i.send()}else this.loadImage(t)},p.onBlobLoaded=function(){var e=this.request.response;this.loadImage(i.createObjectURL(e))},p.onBlobError=function(){this.emitIOError(this.currentURL)},p.loadImage=function(e){var t=new Image;this.data=null,this.currentImage=t,this.crossOrigin&&(t.crossOrigin=this.crossOrigin),t.onload=this.onImageComplete.bind(this),t.onerror=this.onLoadError.bind(this),t.src=e},p.onImageComplete=function(i){var n=this.getImage(i);if(n){this.data=t.toBitmapData(n);var o=this;window.setTimeout(function(){o.dispatchEventWith(e.Event.COMPLETE)},0)}},p.onLoadError=function(e){var t=this.getImage(e);t&&this.emitIOError(t.src)},p.emitIOError=function(t){var i=this;window.setTimeout(function(){i.dispatchEventWith(e.IOErrorEvent.IO_ERROR)},0)},p.getImage=function(e){var t=e.target;return n&&i.revokeObjectURL(t.src),t.onerror=null,t.onload=null,this.currentImage!==t?null:(this.currentImage=null,t)},r}(e.EventDispatcher);t.WebImageLoader=r,e.registerClass(r,"egret.web.WebImageLoader",["egret.ImageLoader"]),e.ImageLoader=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function n(){i.call(this),this._isNeedShow=!1,this.inputElement=null,this.inputDiv=null,this._gscaleX=0,this._gscaleY=0,this._isNeesHide=!1,this.textValue="",this._styleInfoes={}}__extends(n,i);var o=n;return p=o.prototype,p.$setTextField=function(e){this.$textfield=e},p.$addToStage=function(){this.htmlInput=e.web.$getTextAdapter(this.$textfield)},p._initElement=function(){var e=this.$textfield.localToGlobal(0,0),t=e.x,i=e.y,n=this.$textfield.$renderMatrix.a,o=this.$textfield.$renderMatrix.d,r=this.htmlInput.$scaleX,s=this.htmlInput.$scaleY;this.inputDiv.style.left=t*r+"px",this.inputDiv.style.top=i*s+"px",this.$textfield.multiline?(this.inputDiv.style.top=i*s+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2+"px"):(this.inputDiv.style.top=i*s+"px",this.inputElement.style.top="0px"),this._gscaleX=r*n,this._gscaleY=s*o},p.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},p.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},p.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},p.$hide=function(){this._isNeesHide=!0,this.htmlInput&&e.web.Html5Capatibility._System_OS==e.web.SystemOSType.IOS&&this.htmlInput.disconnectStageText(this)},p.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},p.$setText=function(e){this.textValue=e,this.resetText()},p.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},p.$onBlur=function(){t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE&&e.Event.dispatchEvent(this,"updateText",!1)},p._onInput=function(){var i=this;if(t.Html5Capatibility._System_OS==t.SystemOSType.WPHONE){var n=this.$textfield.$TextField;null==n[35]&&null==n[36]&&(i.textValue=i.inputElement.value,e.Event.dispatchEvent(i,"updateText",!1))}else i.inputElement.selectionStart==i.inputElement.selectionEnd&&(i.textValue=i.inputElement.value,e.Event.dispatchEvent(i,"updateText",!1))},p.setAreaHeight=function(){var t=this.$textfield;if(t.multiline){var i=e.TextFieldUtils._getTextHeight(t);if(t.height<i)this.setElementStyle("height",(t.height+t.lineSpacing)*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",(i+t.lineSpacing)*this._gscaleY+"px");var n=(t.height-i)*this._gscaleY,o=e.TextFieldUtils._getValign(t),r=n*o,s=n-r;this.setElementStyle("padding",r+"px 0px "+s+"px 0px")}this.setElementStyle("lineHeight",(t.size+t.lineSpacing)*this._gscaleY+"px")}},p._onClickHandler=function(t){this._isNeedShow&&(t.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new e.Event("focus")))},p._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new e.Event("blur"))},p.setElementStyle=function(e,t){this.inputElement&&this._styleInfoes[e]!=t&&(this.inputElement.style[e]=t)},p.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},p.$resetStageText=function(){if(this.inputElement){var t=this.$textfield;if(this.setElementStyle("fontFamily",t.fontFamily),this.setElementStyle("fontStyle",t.italic?"italic":"normal"),this.setElementStyle("fontWeight",t.bold?"bold":"normal"),this.setElementStyle("textAlign",t.textAlign),this.setElementStyle("fontSize",t.size*this._gscaleY+"px"),this.setElementStyle("color",e.sys.toColorString(t.textColor)),this.setElementStyle("width",t.width*this._gscaleX+"px"),this.setElementStyle("verticalAlign",t.verticalAlign),t.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",t.size*this._gscaleY+"px"),t.height<t.size)this.setElementStyle("height",t.height*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",t.size*this._gscaleY+"px");var i=(t.height-t.size)*this._gscaleY,n=e.TextFieldUtils._getValign(t),o=i*n,r=i-o;this.setElementStyle("padding",o+"px 0px "+r+"px 0px")}this.inputDiv.style.clip="rect(0px "+t.width*this._gscaleX+"px "+t.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=t.height*this._gscaleY+"px",this.inputDiv.style.width=t.width*this._gscaleX+"px"}},n}(e.EventDispatcher);t.HTML5StageText=i,e.registerClass(i,"egret.web.HTML5StageText",["egret.StageText"]),e.StageText=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function t(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}var i=t;return p=i.prototype,p.isInputOn=function(){return null!=this._stageText},p.isCurrentStageText=function(e){return this._stageText==e},p.initValue=function(e){e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.border="none",e.style.padding="0"},p.$updateSize=function(){var t=this.canvas.width,i=this.canvas.height,n=this.canvas.style.width.split("px")[0],o=this.canvas.style.height.split("px")[0];this.$scaleX=n/t,this.$scaleY=o/i,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var r=e.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[r]=this.canvas.style[r],this.StageDelegateDiv.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"},p._initStageDelegateDiv=function(t,i){this.canvas=i;var n,o=this;n||(n=document.createElement("div"),this.StageDelegateDiv=n,n.id="StageDelegateDiv",t.appendChild(n),o.initValue(n),o._inputDIV=document.createElement("div"),o.initValue(o._inputDIV),o._inputDIV.style.width="0px",o._inputDIV.style.height="0px",o._inputDIV.style.left="0px",o._inputDIV.style.top="-100px",o._inputDIV.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",n.appendChild(o._inputDIV),this.canvas.addEventListener("click",function(e){o._needShow?(o._needShow=!1,o._stageText._onClickHandler(e),o.show()):o._inputElement&&(o.clearInputElement(),o._inputElement.blur(),o._inputElement=null)}),o.initInputElement(!0),o.initInputElement(!1))},p.initInputElement=function(e){var t,i=this;e?(t=document.createElement("textarea"),t.style.resize="none",i._multiElement=t,t.id="egretTextarea"):(t=document.createElement("input"),i._simpleElement=t,t.id="egretInput"),t.type="text",i._inputDIV.appendChild(t),t.setAttribute("tabindex","-1"),t.style.width="1px",t.style.height="12px",i.initValue(t),t.style.outline="thin",t.style.background="none",t.style.overflow="hidden",t.style.wordBreak="break-all",t.style.opacity=0,t.oninput=function(){i._stageText&&i._stageText._onInput()}},p.show=function(){var t=this,i=t._inputElement;e.$callAsync(function(){i.style.opacity=1},t)},p.disconnectStageText=function(e){(null==this._stageText||this._stageText==e)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},p.clearInputElement=function(){var e=this;if(e._inputElement){e._inputElement.value="",e._inputElement.onblur=null,e._inputElement.style.width="1px",e._inputElement.style.height="12px",e._inputElement.style.left="0px",e._inputElement.style.top="0px",e._inputElement.style.opacity=0;var t;t=e._simpleElement==e._inputElement?e._multiElement:e._simpleElement,t.style.display="block",e._inputDIV.style.left="0px",e._inputDIV.style.top="-100px",e._inputDIV.style.height="0px",e._inputDIV.style.width="0px"}e._stageText&&(e._stageText._onDisconnect(),e._stageText=null,this.canvas.userTyping=!1)},p.getInputElement=function(e){var t=this;t.clearInputElement(),t._stageText=e,this.canvas.userTyping=!0,t._inputElement=t._stageText.$textfield.multiline?t._multiElement:t._simpleElement;var i;return i=t._simpleElement==t._inputElement?t._multiElement:t._simpleElement,i.style.display="none",t._inputElement},t}();t.HTMLInput=i,e.registerClass(i,"egret.web.HTMLInput")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(e){function t(e){var t=e.stage?e.stage.$hashCode:0;return n[t]}function i(e,t,i,o){e._initStageDelegateDiv(i,o),n[t.$hashCode]=e}var n={};e.$getTextAdapter=t,e.$cacheTextAdapter=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=[],n=-1!=navigator.userAgent.indexOf("QQBrowser"),o=function(){function o(){e.sys.sharedRenderContext=this.create().renderContext;for(var t=0;3>t;t++)i.push(this.create())}var r=o;return p=r.prototype,p.create=function(t){var o=t||i.length>3?i.pop():null;if(!o){var r=document.createElement("canvas");if(r.width=r.height=1,n&&!this.testCanvasValid(r))return e.warn("failed to create canvas!"),null;o=this.createSurface(r)}return o},p.release=function(e){e&&(e.width=e.height=1,i.push(e))},p.testCanvasValid=function(e){e.height=1,e.width=1;var t=e.toDataURL("image/png");return"data:,"==t?!1:!0},p.createSurface=function(i){var n=i.getContext("2d");i.renderContext=n,n.surface=i,t.toBitmapData(i);var o=n.drawImage;if(n.drawImage=function(e){e&&0!=e.width&&0!=e.height&&o.apply(n,arguments)},e.isUndefined(n.imageSmoothingEnabled)){for(var r=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],s=r.length-1;s>=0;s--){var a=r[s];if(void 0!==n[a])break}try{Object.defineProperty(n,"imageSmoothingEnabled",{get:function(){return this[a]},set:function(e){this[a]=e}})}catch(l){n.imageSmoothingEnabled=n[a]}}return i},o}();t.CanvasFactory=o,e.registerClass(o,"egret.web.CanvasFactory",["egret.sys.SurfaceFactory"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(i,n){var o=this;t.call(this),this.onTouchBegin=function(e){var t=o.getLocation(e);o.touch.onTouchBegin(t.x,t.y,e.identifier)},this.onTouchMove=function(e){var t=o.getLocation(e);o.touch.onTouchMove(t.x,t.y,e.identifier)},this.onTouchEnd=function(e){var t=o.getLocation(e);o.touch.onTouchEnd(t.x,t.y,e.identifier)},this.scaleX=1,this.scaleY=1,this.rotation=0,this.canvas=n,this.touch=new e.sys.TouchHandler(i),this.addListeners()}__extends(i,t);var n=i;return p=n.prototype,p.addListeners=function(){var t=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(e){t.onTouchBegin(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerMove",function(e){t.onTouchMove(e),t.prevent(e)},!1),this.canvas.addEventListener("MSPointerUp",function(e){t.onTouchEnd(e),t.prevent(e)},!1)):(e.Capabilities.$isMobile||this.addMouseListener(),this.addTouchListener())},p.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onTouchMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},p.addTouchListener=function(){var e=this;this.canvas.addEventListener("touchstart",function(t){for(var i=t.changedTouches.length,n=0;i>n;n++)e.onTouchBegin(t.changedTouches[n]);e.prevent(t)},!1),this.canvas.addEventListener("touchmove",function(t){for(var i=t.changedTouches.length,n=0;i>n;n++)e.onTouchMove(t.changedTouches[n]);e.prevent(t)},!1),this.canvas.addEventListener("touchend",function(t){for(var i=t.changedTouches.length,n=0;i>n;n++)e.onTouchEnd(t.changedTouches[n]);e.prevent(t)},!1),this.canvas.addEventListener("touchcancel",function(t){for(var i=t.changedTouches.length,n=0;i>n;n++)e.onTouchEnd(t.changedTouches[n]);e.prevent(t)},!1)},p.prevent=function(e){e.stopPropagation(),1==e.isScroll||this.canvas.userTyping||e.preventDefault()},p.getLocation=function(t){t.identifier=+t.identifier||0;var i=document.documentElement,n=this.canvas.getBoundingClientRect(),o=n.left+window.pageXOffset-i.clientLeft,r=n.top+window.pageYOffset-i.clientTop,s=t.pageX-o,a=s,l=t.pageY-r,u=l;return 90==this.rotation?(a=l,u=n.width-s):-90==this.rotation&&(a=n.height-l,u=s),a/=this.scaleX,u/=this.scaleY,e.$TempPoint.setTo(Math.round(a),Math.round(u))},p.updateScaleMode=function(e,t,i){this.scaleX=e,this.scaleY=t,this.rotation=i},p.$updateMaxTouches=function(){this.touch.$setMaxTouches()},i}(e.HashObject);t.WebTouchHandler=i,e.registerClass(i,"egret.web.WebTouchHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(t){function i(e){t.call(this),this.isActivate=!0,this.stage=e,this.registerListener()}__extends(i,t);var n=i;return p=n.prototype,p.registerListener=function(){var t=this,i=function(){t.isActivate&&(t.isActivate=!1,t.stage.dispatchEvent(new e.Event(e.Event.DEACTIVATE)))},n=function(){t.isActivate||(t.isActivate=!0,t.stage.dispatchEvent(new e.Event(e.Event.ACTIVATE)))},o=function(){document[r]?i():n()};window.addEventListener("focus",n,!1),window.addEventListener("blur",i,!1);var r,s;"undefined"!=typeof document.hidden?(r="hidden",s="visibilitychange"):"undefined"!=typeof document.mozHidden?(r="mozHidden",s="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(r="msHidden",s="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(r="webkitHidden",s="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(r="oHidden",s="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",n,!1),window.addEventListener("pagehide",i,!1)),r&&s&&document.addEventListener(s,o,!1);var a=navigator.userAgent,l=/micromessenger/gi.test(a),u=/mqq/gi.test(a),h=/mobile.*qq/gi.test(a);if((h||l)&&(u=!1),u){var d=window.browser||{};d.execWebFn=d.execWebFn||{},d.execWebFn.postX5GamePlayerMessage=function(e){var t=e.type;"app_enter_background"==t?i():"app_enter_foreground"==t&&n()},window.browser=d}},i}(e.HashObject);t.WebHideHandler=i,e.registerClass(i,"egret.web.WebHideHandler")}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(e,t){var i="";if(null!=t)i=n(e,t);else{if(null==a){var o=document.createElement("div").style;a=n("transform",o)}i=a}return""==i?e:i+e.charAt(0).toUpperCase()+e.substring(1,e.length)}function n(e,t){if(e in t)return"";e=e.charAt(0).toUpperCase()+e.substring(1,e.length);for(var i=["webkit","ms","Moz","O"],n=0;n<i.length;n++){var o=i[n]+e;if(o in t)return i[n]}return""}var o=function(){function e(){}var t=e;return p=t.prototype,e.QQ_AUDIO=1,e.WEB_AUDIO=2,e.HTML5_AUDIO=3,e}();t.AudioType=o,e.registerClass(o,"egret.web.AudioType");var r=function(){function e(){}var t=e;return p=t.prototype,e.WPHONE=1,e.IOS=2,e.ADNROID=3,e}();t.SystemOSType=r,e.registerClass(r,"egret.web.SystemOSType");var s=function(t){function i(){t.call(this)}__extends(i,t);var n=i;return p=n.prototype,i._init=function(){var t=navigator.userAgent.toLowerCase();if(i.ua=t,e.Capabilities.$isMobile=-1!=t.indexOf("mobile")||-1!=t.indexOf("android"),i._canUseBlob=!1,i._audioType=o.HTML5_AUDIO,i._AudioClass=e.web.HtmlSound,i._audioMustLoad=!0,t.indexOf("windows phone")>=0)i._System_OS=r.WPHONE,i._audioMustLoad=!1,e.Capabilities.$os="Windows Phone";
else if(t.indexOf("android")>=0){if(i._System_OS=r.ADNROID,t.indexOf("ucbrowser")>=0&&(i._audioMustLoad=!1),e.Capabilities.$os="Android",i._System_OS=r.ADNROID,window.hasOwnProperty("QZAppExternal")&&t.indexOf("qzone")>=0){i._audioType=o.QQ_AUDIO,i._AudioClass=e.web.QQSound;var n=document.getElementsByTagName("base");if(n&&n.length>0)i._QQRootPath=n[0].baseURI;else{var s=window.location.href.indexOf("?");-1==s&&(s=window.location.href.length);var a=window.location.href.substring(0,s);a=a.substring(0,a.lastIndexOf("/")),i._QQRootPath=a+"/"}}}else t.indexOf("iphone")>=0||t.indexOf("ipad")>=0||t.indexOf("ipod")>=0?(e.Capabilities.$os="iOS",i._System_OS=r.IOS,i.getIOSVersion()>=7&&(i._canUseBlob=!0,i._AudioClass=e.web.WebAudioSound,i._audioType=o.WEB_AUDIO)):-1!=t.indexOf("windows nt")?e.Capabilities.$os="Windows PC":-1!=t.indexOf("mac os")&&(e.Capabilities.$os="Mac OS");var l=window.URL||window.webkitURL;l||(i._canUseBlob=!1);var u=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;u||i._audioType!=o.WEB_AUDIO||(i._audioType=o.HTML5_AUDIO,i._AudioClass=e.web.HtmlSound),e.Sound=i._AudioClass},i.getIOSVersion=function(){var e=i.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(e.match(/\d(_\d)*/)[0])||0},i.checkHtml5Support=function(){var t="geolocation"in navigator,i="DeviceOrientationEvent"in window,n="DeviceMotionEvent"in window;e.Capabilities.$hasGeolocation=t,e.Capabilities.$hasMotion=n,e.Capabilities.$hasOrientation=i;var o=(navigator.language||navigator.browserLanguage).toLowerCase(),r=o.split("-");r.length>1&&(r[1]=r[1].toUpperCase()),e.Capabilities.$language=r.join("-")},i._canUseBlob=!1,i._audioType=0,i._audioMustLoad=!1,i._QQRootPath="",i._System_OS=0,i._WebPSupport=!1,i.ua="",i}(e.HashObject);t.Html5Capatibility=s,e.registerClass(s,"egret.web.Html5Capatibility"),s._init();var a=null;t.getPrefixStyleName=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(){for(var e=document.querySelectorAll(".egret-player"),t=e.length,i=0;t>i;i++){var n=e[i],o=n["egret-player"];o.updateScreenSize()}}function n(){var i=e.sys.$ticker;o(i);var n=new t.CanvasFactory;e.sys.surfaceFactory=n,e.sys.screenAdapter||(e.sys.screenAdapter=new e.sys.ScreenAdapter);for(var r=document.querySelectorAll(".egret-player"),s=r.length,a=0;s>a;a++){var l=r[a],u=new t.WebPlayer(l);l["egret-player"]=u}}function o(e){function t(){e.update(),i.call(window,t)}var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;i||(i=function(e){return window.setTimeout(e,1e3/60)}),i.call(window,t)}function r(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t}window.isNaN=function(e){return e=+e,e!==e},e.warn=function(){console.warn.apply(console,r(arguments))},e.error=function(){console.error.apply(console,r(arguments))},e.assert=function(){console.assert.apply(console,r(arguments))},e.log=function(){console.log.apply(console,r(arguments))},CanvasRenderingContext2D.prototype.begin=function(){},CanvasRenderingContext2D.prototype.end=function(){},e.runEgret=n,e.updateAllScreens=i}(t=e.web||(e.web={}))}(egret||(egret={})),void 0==window.HTMLVideoElement&&(window.HTMLVideoElement=HTMLDivElement);var egret;!function(e){var t;!function(t){function i(t){return t.hashCode=t.$hashCode=e.$hashCount++,t}var n="egret.BitmapData";e.registerClass(HTMLImageElement,n),e.registerClass(HTMLCanvasElement,n),e.registerClass(HTMLVideoElement,n),t.toBitmapData=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(){function t(){}var i=t;return p=i.prototype,t.detect=function(){var i=e.Capabilities,n=navigator.userAgent.toLowerCase();i.$isMobile=-1!=n.indexOf("mobile")||-1!=n.indexOf("android"),i.$isMobile?n.indexOf("windows")<0&&(-1!=n.indexOf("iphone")||-1!=n.indexOf("ipad")||-1!=n.indexOf("ipod"))?i.$os="iOS":-1!=n.indexOf("android")&&-1!=n.indexOf("linux")?i.$os="Android":-1!=n.indexOf("windows")&&(i.$os="Windows Phone"):-1!=n.indexOf("windows nt")?i.$os="Windows PC":-1!=n.indexOf("mac os")&&(i.$os="Mac OS");var o=t.checkHtml5Support();i.$hasGeolocation=o.geo,i.$hasMotion=o.m,i.$hasOrientation=o.ortt;var r=(navigator.language||navigator.browserLanguage).toLowerCase(),s=r.split("-");s.length>1&&(s[1]=s[1].toUpperCase()),i.$language=s.join("-")},t.checkHtml5Support=function(){var e=("webkitAudioContext"in window||"AudioContext"in window,"geolocation"in navigator),t="DeviceOrientationEvent"in window,i="DeviceMotionEvent"in window;return{geo:e,ortt:t,m:i}},t}();t.WebCapability=i,e.registerClass(i,"egret.web.WebCapability"),i.detect()}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(e){if(window.location){var t=location.search;if(""==t)return"";t=t.slice(1);for(var i=t.split("&"),n=i.length,o=0;n>o;o++){var r=i[o],s=r.split("=");if(s[0]==e)return s[1]}}return""}t.getOption=i,e.getOption=i}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){var i=function(i){function n(e){i.call(this),this.init(e)}__extends(n,i);var o=n;return p=o.prototype,p.init=function(i){var n=this.readOption(i),o=new e.Stage;o.$screen=this,o.$scaleMode=n.scaleMode,o.$maxTouches=n.maxTouches,o.frameRate=n.frameRate,o.textureScaleFactor=n.textureScaleFactor;var r=e.sys.surfaceFactory.create(),s=r;this.attachCanvas(i,s);var a=new t.WebTouchHandler(o,s),l=new e.sys.Player(r.renderContext,o,n.entryClassName),u=new e.web.WebHideHandler(o),h=new t.HTMLInput;this.playerOption=n,this.container=i,this.canvas=s,this.stage=o,this.player=l,this.webTouchHandler=a,this.webInput=h,this.webHide=u,e.web.$cacheTextAdapter(h,o,i,s),this.updateScreenSize(),this.updateMaxTouches(),l.start(),e.MainContext.instance.stage=o},p.readOption=function(t){var i={};i.entryClassName=t.getAttribute("data-entry-class"),i.scaleMode=t.getAttribute("data-scale-mode")||e.StageScaleMode.NO_SCALE,i.frameRate=+t.getAttribute("data-frame-rate")||30,i.contentWidth=+t.getAttribute("data-content-width")||480,i.contentHeight=+t.getAttribute("data-content-height")||800,i.orientation=t.getAttribute("data-orientation")||e.sys.OrientationMode.AUTO,i.maxTouches=+t.getAttribute("data-multi-fingered")||2,i.textureScaleFactor=+t.getAttribute("texture-scale-factor")||1;return i},p.attachCanvas=function(e,t){var i=t.style;i.cursor="default",i.position="absolute",i.top="0",i.bottom="0",i.left="0",i.right="0",e.appendChild(t),i=e.style,i.overflow="hidden",i.position="relative"},p.updateScreenSize=function(){var t=this.canvas;if(!t.userTyping){var i=this.playerOption,n=this.container.getBoundingClientRect(),o=!1;i.orientation!=e.sys.OrientationMode.AUTO&&(o=i.orientation!=e.sys.OrientationMode.PORTRAIT&&n.height>n.width||i.orientation==e.sys.OrientationMode.PORTRAIT&&n.width>n.height);var r=o?n.height:n.width,s=o?n.width:n.height,a=e.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,r,s,i.contentWidth,i.contentHeight),l=a.stageWidth,u=a.stageHeight,h=a.displayWidth,d=a.displayHeight;t.width!==l&&(t.width=l),t.height!==u&&(t.height=u),t.style[e.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",t.style.width=h+"px",t.style.height=d+"px";var c=0;o?i.orientation==e.sys.OrientationMode.LANDSCAPE?(c=90,t.style.top=(n.height-h)/2+"px",t.style.left=(n.width+d)/2+"px"):(c=-90,t.style.top=(n.height+h)/2+"px",t.style.left=(n.width-d)/2+"px"):(t.style.top=(n.height-d)/2+"px",t.style.left=(n.width-h)/2+"px");var p="rotate("+c+"deg)";t.style[e.web.getPrefixStyleName("transform")]=p,this.player.updateStageSize(l,u);var g=h/l,f=d/u;this.webTouchHandler.updateScaleMode(g,f,c),this.webInput.$updateSize()}},p.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},n}(e.HashObject);t.WebPlayer=i,e.registerClass(i,"egret.web.WebPlayer",["egret.sys.Screen"])}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(){function t(t,i){var n=e.sys.surfaceFactory.create(!0);if(!n)return null;var o=t.$getTextureWidth(),r=t.$getTextureHeight();null==i&&(i=e.$TempRectangle,i.x=0,i.y=0,i.width=o,i.height=r),i.x=Math.min(i.x,o-1),i.y=Math.min(i.y,r-1),i.width=Math.min(i.width,o-i.x),i.height=Math.min(i.height,r-i.y);var s=i.width,a=i.height;n.width=s,n.height=a,n.style.width=s+"px",n.style.height=a+"px";var l=t;n.renderContext.imageSmoothingEnabled=!1;var u=Math.round(l._offsetX),h=Math.round(l._offsetY),d=l._bitmapWidth,c=l._bitmapHeight;return n.renderContext.drawImage(l._bitmapData,l._bitmapX+i.x/e.$TextureScaleFactor,l._bitmapY+i.y/e.$TextureScaleFactor,d*i.width/o,c*i.height/r,u,h,i.width,i.height),n}function i(i,n){try{var o=t(this,n),r=o.toDataURL(i);return e.sys.surfaceFactory.release(o),r}catch(s){e.$error(1033)}return null}function n(e,t,n){var o=i.call(this,e,n);if(null!=o){var r=o.replace(/^data:image[^;]*/,"data:image/octet-stream"),s=document.createElement("a");s.download=t,s.href=r;var a=document.createEvent("HTMLEvents");a.initEvent("click",!1,!1),s.dispatchEvent(a)}}function o(i,n){if(this._bitmapData&&this._bitmapData.getContext){var o=this._bitmapData.getContext("2d").getImageData(i-this._offsetX,n-this._offsetY,1,1);return o.data}var r=t(this,new e.Rectangle(i-1,n-1,3,3));return o=r.renderContext.getImageData(1,1,1,1),o.data}function r(){this._bitmapData&&(e.Texture.$dispose(this),s(this._bitmapData))}function s(e){a(e),e.onload=null,e.onerror=null,e.src="data:image/png;base64,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",e.avaliable=!1,console.log("_disposeForCanvas")}function a(e){if(e){var t=e.webGLTexture;if(t)for(var i in t){var n=t[i],o=n.glContext;o.deleteTexture(n)}e.webGLTexture=null}}e.Texture.prototype.toDataURL=i,e.Texture.prototype.saveToFile=n,e.Texture.prototype.getPixel32=o,e.Texture.prototype.dispose=r}(t=e.web||(e.web={}))}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(e){for(var t=a.parseFromString(e,"text/xml"),i=t.childNodes.length,o=0;i>o;o++){var r=t.childNodes[o];if(1==r.nodeType)return n(r,null)}return null}function n(e,t){if("parsererror"==e.localName)throw new Error(e.textContent);for(var i=new r(e.localName,t,e.prefix,e.namespaceURI,e.nodeName),o=e.attributes,a=i.attributes,l=o.length,u=0;l>u;u++){var h=o[u],d=h.name;0!=d.indexOf("xmlns:")&&(a[d]=h.value)}var c=e.childNodes;l=c.length;var p=i.children;for(u=0;l>u;u++){var g=c[u],f=g.nodeType,v=null;if(1==f)v=n(g,i);else if(3==f){var m=g.textContent.trim();m&&(v=new s(m,i))}v&&p.push(v)}return i}var o=function(){function e(e,t){this.nodeType=e,this.parent=t}var t=e;return p=t.prototype,e}();t.XMLNode=o,e.registerClass(o,"egret.web.XMLNode");var r=function(e){function t(t,i,n,o,r){e.call(this,1,i),this.attributes={},this.children=[],this.localName=t,this.prefix=n,this.namespace=o,this.name=r}__extends(t,e);var i=t;return p=i.prototype,t}(o);t.XML=r,e.registerClass(r,"egret.web.XML");var s=function(e){function t(t,i){e.call(this,3,i),this.text=t}__extends(t,e);var i=t;return p=i.prototype,t}(o);t.XMLText=s,e.registerClass(s,"egret.web.XMLText");var a=new DOMParser;e.XML={parse:i}}(t=e.web||(e.web={}))}(egret||(egret={}));