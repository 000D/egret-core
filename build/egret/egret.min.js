function __extends(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i}var __define=this.__define||function(t,e,i,n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:i,set:n})},egret;!function(){}(egret||(egret={}));var egret;!function(t){function e(t,e,i){var n=t.prototype;n.__class__=e;var r=[e];i&&(r=r.concat(i));var s=n.__types__;if(n.__types__)for(var a=s.length,o=0;a>o;o++){var h=s[o];-1==r.indexOf(h)&&r.push(h)}n.__types__=r}t.registerClass=e}(egret||(egret={}));var egret;!function(t){t.$hashCount=1;var e=function(){function e(){this.$hashCode=t.$hashCount++}var i=__define,n=e;return p=n.prototype,i(p,"hashCode",function(){return this.$hashCode}),e}();t.HashObject=e,t.registerClass(e,"egret.HashObject")}(egret||(egret={})),egret.registerClass(function(){},"_______");var __extends=this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);i.prototype=e.prototype,t.prototype=new i},egret;!function(t){var e=[],i=function(i){function n(t){void 0===t&&(t=null),i.call(this),this.$EventDispatcher={0:t?t:this,1:{},2:{},3:0}}__extends(n,i);var r=n;return p=r.prototype,p.$getEventMap=function(t){var e=this.$EventDispatcher,i=t?e[2]:e[1];return i},p.addEventListener=function(t,e,i,n,r){this.$addListener(t,e,i,n,r)},p.once=function(t,e,i,n,r){this.$addListener(t,e,i,n,r,!0)},p.$addListener=function(t,e,i,n,r,s){var a=this.$EventDispatcher,o=n?a[2]:a[1],h=o[t];h?0!==a[3]&&(o[t]=h=h.concat()):h=o[t]=[],this.$insertEventBin(h,t,e,i,n,r,s)},p.$insertEventBin=function(t,e,i,n,r,s,a){s=0|+s;for(var o=-1,h=t.length,l=0;h>l;l++){var u=t[l];if(u.listener==i&&u.thisObject==n&&u.target==this)return!1;-1==o&&u.priority<s&&(o=l)}var c={type:e,listener:i,thisObject:n,priority:s,target:this,useCapture:r,emitOnce:!!a};return-1!==o?t.splice(o,0,c):t.push(c),!0},p.removeEventListener=function(t,e,i,n){var r=this.$EventDispatcher,s=n?r[2]:r[1],a=s[t];a&&(0!==r[3]&&(s[t]=a=a.concat()),this.$removeEventBin(a,e,i),0==a.length&&(s[t]=null))},p.$removeEventBin=function(t,e,i){for(var n=t.length,r=0;n>r;r++){var s=t[r];if(s.listener==e&&s.thisObject==i&&s.target==this)return t.splice(r,1),!0}return!1},p.hasEventListener=function(t){var e=this.$EventDispatcher;return!(!e[1][t]&&!e[2][t])},p.willTrigger=function(t){return this.hasEventListener(t)},p.dispatchEvent=function(t){return t.$currentTarget=this.$EventDispatcher[0],t.$setTarget(t.$currentTarget),this.$notifyListener(t,!1)},p.$notifyListener=function(t,i){var n=this.$EventDispatcher,r=i?n[2]:n[1],s=r[t.$type];if(!s)return!0;var a=s.length;if(0==a)return!0;var o=e;n[3]++;for(var h=0;a>h;h++){var l=s[h];if(l.listener.call(l.thisObject,t),l.emitOnce&&o.push(l),t.$isPropagationImmediateStopped)break}for(n[3]--;o.length;)l=o.pop(),l.target.removeEventListener(l.type,l.listener,l.thisObject,l.useCapture);return!t.$isDefaultPrevented},p.dispatchEventWith=function(e,i,n){if(i||this.hasEventListener(e)){var r=t.Event.create(t.Event,e,i);r.data=n;var s=this.dispatchEvent(r);return t.Event.release(r),s}return!0},n}(t.HashObject);t.EventDispatcher=i,t.registerClass(i,"egret.EventDispatcher",["egret.IEventDispatcher"])}(egret||(egret={}));var egret;!function(t){function e(t){return t%=360,t>180?t-=360:-180>t&&(t+=360),t}var i=function(i){function n(){i.call(this),this.$children=null,this.$parent=null,this.$stage=null,this.$nestLevel=0,this.$visible=!0,this.$displayList=null,this.$alpha=1,this.$touchEnabled=!1,this.$scrollRect=null,this.$blendMode=0,this.$maskedObject=null,this.$mask=null,this.$maskRect=null,this.$parentDisplayList=null,this.$isDirty=!1,this.$renderAlpha=1,this.$renderMatrix=new t.Matrix,this.$renderRegion=null,this.$displayFlags=880,this.$DisplayObject={0:1,1:1,2:0,3:0,4:0,5:"",6:new t.Matrix,7:new t.Matrix,8:new t.Matrix,9:new t.Rectangle,10:new t.Rectangle,11:!1,12:0,13:0,14:0/0,15:0/0}}__extends(n,i);var r=__define,s=n;return p=s.prototype,p.$setFlags=function(t){this.$displayFlags|=t},p.$removeFlags=function(t){this.$displayFlags&=~t},p.$removeFlagsUp=function(t){if(this.$hasAnyFlags(t)){this.$removeFlags(t);var e=this.$parent;e&&e.$removeFlagsUp(t)}},p.$hasFlags=function(t){return(this.$displayFlags&t)==t},p.$propagateFlagsUp=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);var e=this.$parent;e&&e.$propagateFlagsUp(t)}},p.$propagateFlagsDown=function(t){this.$setFlags(t)},p.$hasAnyFlags=function(t){return!!(this.$displayFlags&t)},p.invalidateMatrix=function(){this.$setFlags(8),this.invalidatePosition()},p.invalidatePosition=function(){this.$invalidateTransform(),this.$propagateFlagsDown(48),this.$parent&&this.$parent.$propagateFlagsUp(4)},r(p,"name",function(){return this.$DisplayObject[5]},function(t){this.$DisplayObject[5]=t}),r(p,"parent",function(){return this.$parent}),p.$setParent=function(t){this.$parent=t},p.$onAddToStage=function(e,i){this.$stage=e,this.$nestLevel=i,t.Sprite.$EVENT_ADD_TO_STAGE_LIST.push(this)},p.$onRemoveFromStage=function(){this.$nestLevel=0,t.Sprite.$EVENT_REMOVE_FROM_STAGE_LIST.push(this)},r(p,"stage",function(){return this.$stage}),r(p,"matrix",function(){return this.$getMatrix().clone()},function(t){this.$setMatrix(t)}),p.$getMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(8)&&(t[6].$updateScaleAndRotation(t[0],t[1],t[2],t[3]),this.$removeFlags(8)),t[6]},p.$setMatrix=function(t,i){void 0===i&&(i=!0);var n=this.$DisplayObject,r=n[6];r.equals(t)||(r.copyFrom(t),i&&(n[0]=r.$getScaleX(),n[1]=r.$getScaleY(),n[2]=t.$getSkewX(),n[3]=t.$getSkewY(),n[4]=e(180*n[3]/Math.PI)),this.$removeFlags(8),this.invalidatePosition())},p.$getConcatenatedMatrix=function(){var e=this.$DisplayObject[7];if(this.$hasFlags(16)){if(this.$parent){this.$parent.$getConcatenatedMatrix().$preMultiplyInto(this.$getMatrix(),e);var i=this.$scrollRect;i&&e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-i.x,-i.y),e);var n=this.$DisplayObject;(0!=n[12]||0!=n[13])&&e.$preMultiplyInto(t.$TempMatrix.setTo(1,0,0,1,-n[12],-n[13]),e)}else e.copyFrom(this.$getMatrix());this.$displayList&&(this.$displayList.$renderRegion.moved=!0),this.$renderRegion&&(this.$renderRegion.moved=!0),this.$removeFlags(16)}return e},p.$getInvertedConcatenatedMatrix=function(){var t=this.$DisplayObject;return this.$hasFlags(32)&&(this.$getConcatenatedMatrix().$invertInto(t[8]),this.$removeFlags(32)),t[8]},r(p,"x",function(){return this.$getX()},function(t){this.$setX(t)}),p.$getX=function(){return this.$DisplayObject[6].tx},p.$setX=function(e){e=t.getNumber(e);var i=this.$DisplayObject[6];return e==i.tx?!1:(i.tx=e,this.invalidatePosition(),!0)},r(p,"y",function(){return this.$getY()},function(t){this.$setY(t)}),p.$getY=function(){return this.$DisplayObject[6].ty},p.$setY=function(e){e=t.getNumber(e);var i=this.$DisplayObject[6];return e==i.ty?!1:(i.ty=e,this.invalidatePosition(),!0)},r(p,"scaleX",function(){return this.$getScaleX()},function(t){this.$setScaleX(t)}),p.$getScaleX=function(){return this.$DisplayObject[0]},p.$setScaleX=function(e){e=t.getNumber(e);var i=this.$DisplayObject;return e==i[0]?!1:(i[0]=e,this.invalidateMatrix(),!0)},r(p,"scaleY",function(){return this.$getScaleY()},function(t){this.$setScaleY(t)}),p.$getScaleY=function(){return this.$DisplayObject[1]},p.$setScaleY=function(e){return e=t.getNumber(e),e==this.$DisplayObject[1]?!1:(this.$DisplayObject[1]=e,this.invalidateMatrix(),!0)},r(p,"rotation",function(){return this.$getRotation()},function(t){this.$setRotation(t)}),p.$getRotation=function(){return this.$DisplayObject[4]},p.$setRotation=function(i){i=t.getNumber(i),i=e(i);var n=this.$DisplayObject;if(i!=n[4]){var r=i-n[4],s=r/180*Math.PI;n[2]+=s,n[3]+=s,n[4]=i,this.invalidateMatrix()}},r(p,"skewX",function(){return this.$DisplayObject[2]},function(t){this.$setSkewX(t)}),p.$setSkewX=function(i){i=t.getNumber(i),i=e(i),i=i/180*Math.PI;var n=this.$DisplayObject;i!=n[2]&&(n[2]=i,this.invalidateMatrix())},r(p,"skewY",function(){return this.$DisplayObject[3]},function(t){this.$setSkewY(t)}),p.$setSkewY=function(i){i=t.getNumber(i),i=e(i),i=i/180*Math.PI;var n=this.$DisplayObject;i!=n[3]&&(n[3]=i,this.invalidateMatrix())},r(p,"width",function(){return this.$getWidth()},function(t){this.$setWidth(t)}),p.$getWidth=function(){return isNaN(this.$getExplicitWidth())?this.$getOriginalBounds().width:this.$getExplicitWidth()},p.$getExplicitWidth=function(){return this.$DisplayObject[14]},p.$setWidth=function(t){if(this.$DisplayObject[14]=isNaN(t)?0/0:t,t=+t,!(0>t)){this.invalidateMatrix()}},r(p,"height",function(){return this.$getHeight()},function(t){this.$setHeight(t)}),p.$getHeight=function(){return isNaN(this.$getExplicitHeight())?this.$getOriginalBounds().height:this.$getExplicitHeight()},p.$getExplicitHeight=function(){return this.$DisplayObject[15]},p.$setHeight=function(t){if(this.$DisplayObject[15]=isNaN(t)?0/0:t,t=+t,!(0>t)){this.invalidateMatrix()}},r(p,"measuredWidth",function(){return this.$getOriginalBounds().width}),r(p,"measuredHeight",function(){return this.$getOriginalBounds().height}),r(p,"anchorOffsetX",function(){return this.$DisplayObject[12]},function(t){this.$setAnchorOffsetX(t)}),p.$setAnchorOffsetX=function(e){return e=t.getNumber(e),e==this.$DisplayObject[12]?!1:(this.$DisplayObject[12]=e,this.invalidatePosition(),!0)},r(p,"anchorOffsetY",function(){return this.$DisplayObject[13]},function(t){this.$setAnchorOffsetY(t)}),p.$setAnchorOffsetY=function(e){return e=t.getNumber(e),e==this.$DisplayObject[13]?!1:(this.$DisplayObject[13]=e,this.invalidatePosition(),!0)},r(p,"visible",function(){return this.$visible},function(t){t=!!t,t!=this.$visible&&(this.$visible=t,this.$invalidateTransform())}),r(p,"cacheAsBitmap",function(){return this.$DisplayObject[11]},function(e){e=!!e,this.$DisplayObject[11]=e;var i=!!this.$displayList;if(i!=e)if(e){var n=t.sys.DisplayList.create(this);n&&(this.$displayList=n,this.$parentDisplayList&&(n.setDevicePixelRatio(this.$parentDisplayList.$ratioMatrix.a),this.$parentDisplayList.markDirty(n)),this.$cacheAsBitmapChanged())}else t.sys.DisplayList.release(this.$displayList),this.$displayList=null,this.$cacheAsBitmapChanged()}),p.$cacheAsBitmapChanged=function(){var t=this.$displayList||this.$parentDisplayList;this.$renderRegion&&t.markDirty(this),this.$propagateFlagsDown(48)},r(p,"alpha",function(){return this.$alpha},function(t){this.$setAlpha(t)}),p.$setAlpha=function(e){e=t.getNumber(e),e!=this.$alpha&&(this.$alpha=e,this.$propagateFlagsDown(64),this.$invalidate(!0))},p.$getConcatenatedAlpha=function(){if(this.$hasFlags(64)){if(this.$parent){var t=this.$parent.$getConcatenatedAlpha();this.$renderAlpha=t*this.$alpha}else this.$renderAlpha=this.$alpha;this.$removeFlags(64)}return this.$renderAlpha},r(p,"touchEnabled",function(){return this.$getTouchEnabled()},function(t){this.$setTouchEnabled(t)}),p.$getTouchEnabled=function(){return this.$touchEnabled},p.$setTouchEnabled=function(t){this.$touchEnabled=t},r(p,"scrollRect",function(){return this.$scrollRect},function(t){this.$setScrollRect(t)}),p.$setScrollRect=function(e){(e||this.$scrollRect)&&(e?(this.$scrollRect||(this.$scrollRect=new t.Rectangle),this.$scrollRect.copyFrom(e)):this.$scrollRect=null,this.invalidatePosition())},r(p,"blendMode",function(){return t.sys.numberToBlendMode(this.$blendMode)},function(e){var i=t.sys.blendModeToNumber(e);i!=this.$blendMode&&(this.$blendMode=i,this.$invalidateTransform())}),r(p,"mask",function(){return this.$mask?this.$mask:this.$maskRect},function(t){if(t!==this){if(t)if(t instanceof n){if(t==this.$mask)return;t.$maskedObject&&(t.$maskedObject.mask=null),t.$maskedObject=this,this.$mask=t,this.$maskRect=null}else this.$setMaskRect(t),this.$mask=null;else this.$mask=null,this.$maskRect=null;this.$invalidateTransform()}}),p.$setMaskRect=function(e){(e||this.$maskRect)&&(e?(this.$maskRect||(this.$maskRect=new t.Rectangle),this.$maskRect.copyFrom(e)):this.$maskRect=null,this.invalidatePosition())},p.getTransformedBounds=function(t,e){return t=t||this,this.$getTransformedBounds(t,e)},p.getBounds=function(t,e){if(void 0===e&&(e=!0),t=this.$getTransformedBounds(this,t),e){var i=this.$DisplayObject;(0!=i[12]||0!=i[13])&&(t.x-=i[12],t.y-=i[13])}return t},p.$getTransformedBounds=function(e,i){var n=this.$getOriginalBounds();if(i||(i=new t.Rectangle),i.copyFrom(n),e==this||i.isEmpty())return i;var r;if(e){r=t.$TempMatrix;var s=e.$getInvertedConcatenatedMatrix();s.$preMultiplyInto(this.$getConcatenatedMatrix(),r)}else r=this.$getConcatenatedMatrix();return r.$transformBounds(i),i},p.globalToLocal=function(t,e,i){var n=this.$getInvertedConcatenatedMatrix();return n.transformPoint(t,e,i)},p.localToGlobal=function(t,e,i){var n=this.$getConcatenatedMatrix();return n.transformPoint(t,e,i)},p.$invalidateContentBounds=function(){this.$invalidate(),this.$setFlags(2),this.$propagateFlagsUp(4)},p.$getOriginalBounds=function(){var t=this.$DisplayObject[9];return this.$hasFlags(4)&&(t.copyFrom(this.$getContentBounds()),this.$measureChildBounds(t),this.$removeFlags(4),this.$displayList&&(this.$displayList.$renderRegion.moved=!0)),t},p.$measureChildBounds=function(){},p.$getContentBounds=function(){var t=this.$DisplayObject[10];return this.$hasFlags(2)&&(this.$measureContentBounds(t),this.$renderRegion&&(this.$renderRegion.moved=!0),this.$removeFlags(2)),t},p.$measureContentBounds=function(){},p.$invalidate=function(){if(this.$renderRegion&&!this.$hasFlags(256)){this.$setFlags(256);var t=this.$displayList?this.$displayList:this.$parentDisplayList;t&&t.markDirty(this)}},p.$invalidateTransform=function(){if(!this.$hasFlags(512)){this.$setFlags(512);var t=this.$displayList;(t||this.$renderRegion)&&this.$parentDisplayList&&this.$parentDisplayList.markDirty(t||this)}},p.$update=function(){this.$removeFlagsUp(768),this.$getConcatenatedAlpha();var t=this.$getConcatenatedMatrix(),e=this.$getContentBounds(),i=this.$displayList||this.$parentDisplayList,n=this.$renderRegion;if(!i)return n.setTo(0,0,0,0),n.moved=!1,!1;if(!n.moved&&!i.$ratioChanged)return!1;n.moved=!1;var r=this.$renderMatrix;r.copyFrom(t);var s=i.root;return s!==this.$stage&&this.$getConcatenatedMatrixAt(s,r),i.$ratioMatrix.$preMultiplyInto(r,r),n.updateRegion(e,r),!0},p.$getConcatenatedMatrixAt=function(e,i){var n=e.$getInvertedConcatenatedMatrix();if(0===n.a||0===n.d){var r=this,s=e.$nestLevel;for(i.identity();r.$nestLevel>s;){var a=r.$scrollRect;a&&i.concat(t.$TempMatrix.setTo(1,0,0,1,-a.x,-a.y)),i.concat(r.$getMatrix()),r=r.$parent}}else n.$preMultiplyInto(i,i)},p.$render=function(){},p.$hitTest=function(t,e){if(!this.$renderRegion||!this.$visible)return null;var i=this.$getInvertedConcatenatedMatrix(),n=this.$getContentBounds(),r=i.a*t+i.c*e+i.tx,s=i.b*t+i.d*e+i.ty;if(n.contains(r,s)){if(!this.$children){var a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,e))return null}return this}return null},p.hitTestPoint=function(t,e){return!!this.$hitTest(t,e)},p.$addListener=function(e,r,s,a,o,h){i.prototype.$addListener.call(this,e,r,s,a,o,h);var l=e==t.Event.ENTER_FRAME;if(l||e==t.Event.RENDER){var u=l?n.$enterFrameCallBackList:n.$renderCallBackList;-1==u.indexOf(this)&&u.push(this)}},p.removeEventListener=function(e,r,s,a){i.prototype.removeEventListener.call(this,e,r,s,a);var o=e==t.Event.ENTER_FRAME;if((o||e==t.Event.RENDER)&&!this.hasEventListener(e)){var h=o?n.$enterFrameCallBackList:n.$renderCallBackList,l=h.indexOf(this);-1!==l&&h.splice(l,1)}},p.dispatchEvent=function(t){if(!t.$bubbles)return i.prototype.dispatchEvent.call(this,t);var e=this.$getPropagationList(this),n=.5*e.length;return t.$setTarget(this),this.$emitPropagationEvent(t,e,n),!t.$isDefaultPrevented},p.$getPropagationList=function(t){for(var e=[];t;)e.push(t),t=t.$parent;var i=e.concat();return i.reverse(),e=i.concat(e)},p.$emitPropagationEvent=function(t,e,i){for(var n=e.length,r=i-1,s=0;n>s;s++){var a=e[s];if(t.$currentTarget=a,t.$eventPhase=r>s?1:s==i||s==r?2:3,a.$notifyListener(t,i>s),t.$isPropagationStopped||t.$isPropagationImmediateStopped)return}},p.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.$parent}return!1},n.$enterFrameCallBackList=[],n.$renderCallBackList=[],n}(t.EventDispatcher);t.DisplayObject=i,t.registerClass(i,"egret.DisplayObject",["egret.sys.Renderable"])}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n,r){t.call(this),this.$eventPhase=2,this.$currentTarget=null,this.$target=null,this.$isDefaultPrevented=!1,this.$isPropagationStopped=!1,this.$isPropagationImmediateStopped=!1,this.$type=e,this.$bubbles=!!i,this.$cancelable=!!n,this.data=r}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"type",function(){return this.$type}),i(p,"bubbles",function(){return this.$bubbles}),i(p,"cancelable",function(){return this.$cancelable}),i(p,"eventPhase",function(){return this.$eventPhase}),i(p,"currentTarget",function(){return this.$currentTarget}),i(p,"target",function(){return this.$target}),p.$setTarget=function(t){this.$target=t},p.isDefaultPrevented=function(){return this.$isDefaultPrevented},p.preventDefault=function(){this.$cancelable&&(this.$isDefaultPrevented=!0)},p.stopPropagation=function(){this.$bubbles&&(this.$isPropagationStopped=!0)},p.stopImmediatePropagation=function(){this.$bubbles&&(this.$isPropagationImmediateStopped=!0)},p.clean=function(){this.data=this.$currentTarget=null,this.$setTarget(null)},e.dispatchEvent=function(t,i,n,r){void 0===n&&(n=!1);var s=e.create(e,i,n),a=e._getPropertyData(e);void 0!=r&&(a.data=r);var o=t.dispatchEvent(s);return e.release(s),o},e._getPropertyData=function(t){var e=t._props;return e||(e=t._props={}),e},e.create=function(t,e,i,n){var r=t.eventPool;if(r||(r=t.eventPool=[]),r.length){var s=r.pop();return s.$type=e,s.$bubbles=!!i,s.$cancelable=!!n,s.$isDefaultPrevented=!1,s.$isPropagationStopped=!1,s.$isPropagationImmediateStopped=!1,s.$eventPhase=2,s}return new t(e,i,n)},e.release=function(t){t.clean();var e=Object.getPrototypeOf(t).constructor;e.eventPool.push(t)},e.ADDED_TO_STAGE="addedToStage",e.REMOVED_FROM_STAGE="removedFromStage",e.ADDED="added",e.REMOVED="removed",e.ENTER_FRAME="enterFrame",e.RENDER="render",e.RESIZE="resize",e.CHANGE="change",e.CHANGING="changing",e.COMPLETE="complete",e.LOOP_COMPLETE="loopComplete",e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e.ENDED="ended",e.ACTIVATE="activate",e.DEACTIVATE="deactivate",e.CLOSE="close",e.CONNECT="connect",e.LEAVE_STAGE="leaveStage",e.SOUND_COMPLETE="soundComplete",e}(t.HashObject);t.Event=e,t.registerClass(e,"egret.Event")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$touchChildren=!0,this.$children=[]}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.$propagateFlagsDown=function(t){if(!this.$hasFlags(t)){this.$setFlags(t);for(var e=this.$children,i=0;i<e.length;i++)e[i].$propagateFlagsDown(t)}},n(p,"numChildren",function(){return this.$children.length}),p.addChild=function(t){var e=this.$children.length;return t.$parent==this&&e--,this.$doAddChild(t,e)},p.addChildAt=function(t,e){return e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length,t.$parent==this&&e--),this.$doAddChild(t,e)},p.$doAddChild=function(e,n,r){void 0===r&&(r=!0);var s=e.$parent;if(s==this)return this.doSetChildIndex(e,n),e;s&&s.removeChild(e),this.$children.splice(n,0,e),e.$setParent(this);var a=this.$stage;if(a&&e.$onAddToStage(a,this.$nestLevel+1),r&&e.dispatchEventWith(t.Event.ADDED,!0),a)for(var o=i.$EVENT_ADD_TO_STAGE_LIST;o.length;){var h=o.shift();h.$stage&&r&&h.dispatchEventWith(t.Event.ADDED_TO_STAGE)}var l=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(e,l,l),e.$propagateFlagsDown(624),this.$propagateFlagsUp(4),this.$childAdded(e,n),e},p.contains=function(t){for(;t;){if(t==this)return!0;t=t.$parent}return!1},p.getChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$children[t]:null},p.getChildIndex=function(t){return this.$children.indexOf(t)},p.getChildByName=function(t){for(var e,i=this.$children,n=i.length,r=0;n>r;r++)if(e=i[r],e.name==t)return e;return null},p.removeChild=function(t){var e=this.$children.indexOf(t);return e>=0?this.$doRemoveChild(e):null},p.removeChildAt=function(t){return t=0|+t,t>=0&&t<this.$children.length?this.$doRemoveChild(t):null},p.$doRemoveChild=function(e,n){void 0===n&&(n=!0),e=0|+e;var r=this.$children,s=r[e];if(this.$childRemoved(s,e),n&&s.dispatchEventWith(t.Event.REMOVED,!0),this.$stage){s.$onRemoveFromStage();for(var a=i.$EVENT_REMOVE_FROM_STAGE_LIST;a.length>0;){var o=a.shift();n&&o.dispatchEventWith(t.Event.REMOVED_FROM_STAGE),o.$stage=null}}var h=this.$displayList||this.$parentDisplayList;return this.assignParentDisplayList(s,h,null),s.$propagateFlagsDown(624),s.$setParent(null),r.splice(e,1),this.$propagateFlagsUp(4),s},p.setChildIndex=function(t,e){e=0|+e,(0>e||e>=this.$children.length)&&(e=this.$children.length-1),this.doSetChildIndex(t,e)},p.doSetChildIndex=function(t,e){var i=this.$children.indexOf(t);i!=e&&(this.$childRemoved(t,i),this.$children.splice(i,1),this.$children.splice(e,0,t),this.$childAdded(t,e),t.$invalidateTransform(),this.$propagateFlagsUp(4))},p.swapChildrenAt=function(t,e){t=0|+t,e=0|+e,t>=0&&t<this.$children.length&&e>=0&&e<this.$children.length&&this.doSwapChildrenAt(t,e)},p.swapChildren=function(t,e){var i=this.$children.indexOf(t),n=this.$children.indexOf(e);-1==i||-1==n||this.doSwapChildrenAt(i,n)},p.doSwapChildrenAt=function(t,e){if(t>e){var i=e;e=t,t=i}else if(t==e)return;var n=this.$children,r=n[t],s=n[e];this.$childRemoved(r,t),this.$childRemoved(s,e),n[t]=s,n[e]=r,this.$childAdded(s,t),this.$childAdded(r,e),r.$invalidateTransform(),s.$invalidateTransform(),this.$propagateFlagsUp(4)},p.removeChildren=function(){for(var t=this.$children,e=t.length-1;e>=0;e--)this.$doRemoveChild(e)},p.$childAdded=function(){},p.$childRemoved=function(){},p.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i);var n=this.$children,r=n.length;i++;for(var s=0;r>s;s++){var a=this.$children[s];a.$onAddToStage(t,i)}},p.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this);for(var t=this.$children,i=t.length,n=0;i>n;n++){var r=t[n];r.$onRemoveFromStage()}},p.$measureChildBounds=function(e){var i=this.$children,n=i.length;if(0!=n){for(var r=0,s=0,a=0,o=0,h=!1,l=-1;n>l;l++){var u=-1==l?e:i[l].$getTransformedBounds(this,t.$TempRectangle);u.isEmpty()||(h?(r=Math.min(r,u.x),s=Math.max(s,u.x+u.width),a=Math.min(a,u.y),o=Math.max(o,u.y+u.height)):(h=!0,r=u.x,s=r+u.width,a=u.y,o=a+u.height))}e.setTo(r,a,s-r,o-a)}},n(p,"touchChildren",function(){return this.$getTouchChildren()},function(t){this.$setTouchChildren(!!t)}),p.$getTouchChildren=function(){return this.$touchChildren},p.$setTouchChildren=function(t){this.$touchChildren=t},p.$invalidate=function(t){if(e.prototype.$invalidate.call(this,t),t){var i=this.$displayList||this.$parentDisplayList,n=this.$children;if(n)for(var r=n.length-1;r>=0;r--)this.markChildDirty(n[r],i)}},p.$invalidateTransform=function(){this.markChildDirty(this,this.$parentDisplayList)},p.markChildDirty=function(t,e){if(!t.$hasFlags(512)){t.$setFlags(512);var i=t.$displayList;if((i||t.$renderRegion)&&e&&e.markDirty(i||t),!i){var n=t.$children;if(n)for(var r=n.length-1;r>=0;r--)this.markChildDirty(n[r],e)}}},p.$cacheAsBitmapChanged=function(){e.prototype.$cacheAsBitmapChanged.call(this);for(var t=this.$displayList||this.$parentDisplayList,i=this.$children,n=i.length-1;n>=0;n--)this.assignParentDisplayList(i[n],t,t)},p.assignParentDisplayList=function(t,e,i){t.$parentDisplayList=i,t.$setFlags(512);var n=t.$displayList;if((t.$renderRegion||n)&&e&&e.markDirty(n||t),!n){var r=t.$children;if(r)for(var s=r.length-1;s>=0;s--)this.assignParentDisplayList(r[s],e,i)}},p.$hitTest=function(t,i){if(!this.$visible)return null;var n=this.$getInvertedConcatenatedMatrix(),r=n.a*t+n.c*i+n.tx,s=n.b*t+n.d*i+n.ty,a=this.$scrollRect?this.$scrollRect:this.$maskRect;if(a&&!a.contains(r,s))return null;if(this.$mask&&!this.$mask.$hitTest(t,i))return null;for(var o=this.$children,h=!1,l=o.length-1;l>=0;l--){var u=o[l];if(!u.$maskedObject){var c=u.$hitTest(t,i);if(c){if(h=!0,c.$touchEnabled)break;c=null}}}return c?this.$touchChildren?c:this:h?this:e.prototype.$hitTest.call(this,t,i)},i.$EVENT_ADD_TO_STAGE_LIST=[],i.$EVENT_REMOVE_FROM_STAGE_LIST=[],i}(t.DisplayObject);t.DisplayObjectContainer=e,t.registerClass(e,"egret.DisplayObjectContainer",["egret.IDisplayObjectContainer"])}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.type=null}__extends(e,t);var i=e;return p=i.prototype,e}(t.HashObject);t.Filter=e,t.registerClass(e,"egret.Filter")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.isNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.sin=function(e){var i=Math.floor(e),n=i+1,r=t.sinInt(i),s=t.sinInt(n);return(e-i)*s+(n-e)*r},t.sinInt=function(t){return t%=360,0>t&&(t+=360),90>t?egret_sin_map[t]:180>t?egret_cos_map[t-90]:270>t?-egret_sin_map[t-180]:-egret_cos_map[t-270]},t.cos=function(e){var i=Math.floor(e),n=i+1,r=t.cosInt(i),s=t.cosInt(n);return(e-i)*s+(n-e)*r},t.cosInt=function(t){return t%=360,0>t&&(t+=360),90>t?egret_cos_map[t]:180>t?-egret_sin_map[t-90]:270>t?-egret_cos_map[t-180]:egret_sin_map[t-270]},t}();t.NumberUtils=e,t.registerClass(e,"egret.NumberUtils")}(egret||(egret={}));for(var egret_sin_map={},egret_cos_map={},DEG_TO_RAD=Math.PI/180,NumberUtils_i=0;90>=NumberUtils_i;NumberUtils_i++)egret_sin_map[NumberUtils_i]=Math.sin(NumberUtils_i*DEG_TO_RAD),egret_cos_map[NumberUtils_i]=Math.cos(NumberUtils_i*DEG_TO_RAD);Function.prototype.bind||(Function.prototype.bind=function(t){"function"!=typeof this&&egret.$error(1029);var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r});var egret;!function(t){t.$TextureScaleFactor=1;var e=function(e){function i(){e.call(this),this._bitmapX=0,this._bitmapY=0,this._bitmapWidth=0,this._bitmapHeight=0,this._offsetX=0,this._offsetY=0,this._textureWidth=0,this._textureHeight=0,this._sourceWidth=0,this._sourceHeight=0,this._bitmapData=null}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"textureWidth",function(){return this.$getTextureWidth()}),p.$getTextureWidth=function(){return this._textureWidth},n(p,"textureHeight",function(){return this.$getTextureHeight()}),p.$getTextureHeight=function(){return this._textureHeight},p.$getScaleBitmapWidth=function(){return this._bitmapWidth*t.$TextureScaleFactor},p.$getScaleBitmapHeight=function(){return this._bitmapHeight*t.$TextureScaleFactor},p._setBitmapData=function(e){this._bitmapData=e;var i=e.width*t.$TextureScaleFactor,n=e.height*t.$TextureScaleFactor;this.$setData(0,0,i,n,0,0,i,n,i,n)},p.$setData=function(e,i,n,r,s,a,o,h,l,u){var c=t.$TextureScaleFactor;this._bitmapX=e/c,this._bitmapY=i/c,this._bitmapWidth=n/c,this._bitmapHeight=r/c,this._offsetX=s,this._offsetY=a,this._textureWidth=o,this._textureHeight=h,this._sourceWidth=l,this._sourceHeight=u},p.getPixel32=function(){throw new Error},p.toDataURL=function(){throw new Error},p.saveToFile=function(){throw new Error},p.dispose=function(){throw new Error},i.$addDisplayObject=function(t,e){var n=e._bitmapData.$hashCode;if(!i._displayList[n])return void(i._displayList[n]=[t]);var r=i._displayList[n];r.indexOf(t)<0&&r.push(t)},i.$removeDisplayObject=function(t,e){var n=e._bitmapData.$hashCode;if(i._displayList[n]){var r=i._displayList[n],s=r.indexOf(t);s>=0&&r.splice(s)}},i.$dispose=function(t){var e=t._bitmapData.$hashCode;if(i._displayList[e])for(var n=i._displayList[e],r=0;r<n.length;r++)n[r].$invalidateContentBounds()},i.$loaded=function(t){var e=t._bitmapData.$hashCode;if(i._displayList[e])for(var n=i._displayList[e],r=0;r<n.length;r++)n[r].$invalidateContentBounds()},i._displayList={},i}(t.HashObject);t.Texture=e,t.registerClass(e,"egret.Texture")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t){e.call(this),this._bitmapX=0,this._bitmapY=0,this._textureMap={},this.texture=t,this._bitmapX=t._bitmapX-t._offsetX,this._bitmapY=t._bitmapY-t._offsetY}__extends(i,e);var n=i;return p=n.prototype,p.getTexture=function(t){return this._textureMap[t]},p.createTexture=function(e,i,n,r,s,a,o,h,l){void 0===a&&(a=0),void 0===o&&(o=0),t.isUndefined(h)&&(h=a+r),t.isUndefined(l)&&(l=o+s);var u=new t.Texture;return u._bitmapData=this.texture._bitmapData,u.$setData(this._bitmapX+i,this._bitmapY+n,r,s,a,o,h,l,this.texture._sourceWidth,this.texture._sourceHeight),this._textureMap[e]=u,u},p.dispose=function(){this.texture&&this.texture.dispose()},i}(t.HashObject);t.SpriteSheet=e,t.registerClass(e,"egret.SpriteSheet")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$stageWidth=0,this.$stageHeight=0,this.implMap={},this.$scaleMode=t.StageScaleMode.SHOW_ALL,this.$maxTouches=99,this.$stage=this,this.$nestLevel=1}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"frameRate",function(){return t.sys.$ticker.$frameRate},function(e){t.sys.$ticker.$setFrameRate(e)}),n(p,"stageWidth",function(){return this.$stageWidth}),n(p,"stageHeight",function(){return this.$stageHeight}),p.invalidate=function(){t.sys.$invalidateRenderFlag=!0},p.registerImplementation=function(t,e){this.implMap[t]=e},p.getImplementation=function(t){return this.implMap[t]},n(p,"scaleMode",function(){return this.$scaleMode},function(t){this.$scaleMode!=t&&(this.$scaleMode=t,this.$screen.updateScreenSize())}),n(p,"textureScaleFactor",function(){return t.$TextureScaleFactor},function(e){t.$TextureScaleFactor=e}),n(p,"maxTouches",function(){return this.$maxTouches},function(t){this.$maxTouches!=t&&(this.$maxTouches=t,this.$screen.updateMaxTouches())}),i}(t.DisplayObjectContainer);t.Stage=e,t.registerClass(e,"egret.Stage")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n,r,s,a,o,h){void 0===e&&(e=16711680),void 0===i&&(i=1),void 0===n&&(n=6),void 0===r&&(r=6),void 0===s&&(s=2),void 0===a&&(a=1),void 0===o&&(o=!1),void 0===h&&(h=!1),t.call(this),this.color=e,this.alpha=i,this.blurX=n,this.blurY=r,this.strength=s,this.quality=a,this.inner=o,this.knockout=h,this.type="glow",this.$blue=255&e,this.$green=(65280&e)>>8,this.$red=e>>16}__extends(e,t);var i=e;return p=i.prototype,e}(t.Filter);t.GlowFilter=e,t.registerClass(e,"egret.GlowFilter")}(egret||(egret={}));var egret;!function(t){var e=[],i=Math.PI/180,n=function(n){function r(t,e){void 0===t&&(t=0),void 0===e&&(e=0),n.call(this),this.x=t,this.y=e}__extends(r,n);var s=__define,a=r;return p=a.prototype,r.release=function(t){t&&e.push(t)},r.create=function(t,i){var n=e.pop();return n||(n=new r),n.setTo(t,i)},s(p,"length",function(){return Math.sqrt(this.x*this.x+this.y*this.y)}),p.setTo=function(t,e){return this.x=t,this.y=e,this},p.clone=function(){return new r(this.x,this.y)},p.equals=function(t){return this.x==t.x&&this.y==t.y},r.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},p.copyFrom=function(t){this.x=t.x,this.y=t.y},p.add=function(t){return new r(this.x+t.x,this.y+t.y)},r.interpolate=function(t,e,i){var n=1-i;return new r(t.x*i+e.x*n,t.y*i+e.y*n)},p.normalize=function(t){if(0!=this.x||0!=this.y){var e=t/this.length;this.x*=e,this.y*=e}},p.offset=function(t,e){this.x+=t,this.y+=e},r.polar=function(e,n){return new r(e*t.NumberUtils.cos(n/i),e*t.NumberUtils.sin(n/i))},p.subtract=function(t){return new r(this.x-t.x,this.y-t.y)},p.toString=function(){return"(x="+this.x+", y="+this.y+")"},r}(t.HashObject);t.Point=n,t.registerClass(n,"egret.Point"),t.$TempPoint=new n}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$language="en_US"}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];
var r=t.$locale_strings[t.$language][e];if(!r)return"{"+e+"}";for(var s=i.length,a=0;s>a;a++)r=r.replace("{"+a+"}",i[a]);return r}e.tr=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=[],n=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0,this.moved=!1}var e=t;return p=e.prototype,t.release=function(t){i.push(t)},t.create=function(){var e=i.pop();return e||(e=new t),e},p.setTo=function(t,e,i,n){return this.minX=t,this.minY=e,this.maxX=i,this.maxY=n,this.updateArea(),this},p.updateArea=function(){this.width=this.maxX-this.minX,this.height=this.maxY-this.minY,this.area=this.width*this.height},p.union=function(t){this.minX>t.minX&&(this.minX=t.minX),this.minY>t.minY&&(this.minY=t.minY),this.maxX<t.maxX&&(this.maxX=t.maxX),this.maxY<t.maxY&&(this.maxY=t.maxY),this.updateArea()},p.intersect=function(t){return this.minX<t.minX&&(this.minX=t.minX),this.maxX>t.maxX&&(this.maxX=t.maxX),this.minX>=this.maxX?void this.setEmpty():(this.minY<t.minY&&(this.minY=t.minY),this.maxY>t.maxY&&(this.maxY=t.maxY),this.minY>=this.maxY?void this.setEmpty():void this.updateArea())},p.setEmpty=function(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.width=0,this.height=0,this.area=0},p.isEmpty=function(){return this.width<=0||this.height<=0},p.intersects=function(t){var e=this.minX>t.minX?this.minX:t.minX,i=this.maxX<t.maxX?this.maxX:t.maxX;return e>i?!1:(e=this.minY>t.minY?this.minY:t.minY,i=this.maxY<t.maxY?this.maxY:t.maxY,i>=e)},p.updateRegion=function(t,e){var i,n,r,s,a=e,o=a.a,h=a.b,l=a.c,u=a.d,c=a.tx,p=a.ty,d=t.x,f=t.y,g=d+t.width,v=f+t.height;if(1==o&&0==h&&0==l&&1==u)i=Math.floor(d+c)-1,n=Math.floor(f+p)-1,r=Math.ceil(g+c)+1,s=Math.ceil(v+p)+1;else{var m=o*d+l*f+c,_=h*d+u*f+p,$=o*g+l*f+c,y=h*g+u*f+p,x=o*g+l*v+c,T=h*g+u*v+p,E=o*d+l*v+c,b=h*d+u*v+p,w=0;m>$&&(w=m,m=$,$=w),x>E&&(w=x,x=E,E=w),i=Math.floor(x>m?m:x)-1,r=Math.ceil($>E?$:E)+1,_>y&&(w=_,_=y,y=w),T>b&&(w=T,T=b,b=w),n=Math.floor(T>_?_:T)-1,s=Math.ceil(y>b?y:b)+1}this.minX=i,this.minY=n,this.maxX=r,this.maxY=s,this.width=r-i,this.height=s-n,this.area=this.width*this.height},t}();e.Region=n,t.registerClass(n,"egret.sys.Region")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){t.StageText}(egret||(egret={}));var egret;!function(t){t.Sound}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(t,e,n){i.call(this),this.isPlaying=!1,this.entryClassName=n,this.stage=e,this.screenDisplayList=this.createDisplayList(e,t)}__extends(n,i);var r=n;return p=r.prototype,p.createDisplayList=function(t,i){var n=new e.DisplayList(t);return n.renderContext=i,t.$displayList=n,n.setClipRect(t.$stageWidth,t.$stageHeight),n},p.start=function(){!this.isPlaying&&this.stage&&(this.isPlaying=!0,this.root||this.initialize(),e.$ticker.$addPlayer(this))},p.initialize=function(){var e;if(this.entryClassName&&(e=t.getDefinitionByName(this.entryClassName)),e){var i=new e;this.root=i,i instanceof t.DisplayObject&&this.stage.addChild(i)}},p.stop=function(){this.pause(),this.stage=null},p.pause=function(){this.isPlaying&&(this.isPlaying=!1,e.$ticker.$removePlayer(this))},p.$render=function(e){this.callLaters(),this.callLaterAsyncs();var i=this.stage,n=(t.getTimer(),i.$displayList.updateDirtyRegions()),r=(t.getTimer(),0);n.length>0&&(n=n.concat(),r=i.$displayList.drawToSurface())},p.callLaters=function(){if(t.$callLaterFunctionList.length>0){var e=t.$callLaterFunctionList;t.$callLaterFunctionList=[];var i=t.$callLaterThisList;t.$callLaterThisList=[];var n=t.$callLaterArgsList;t.$callLaterArgsList=[]}if(e)for(var r=e.length,s=0;r>s;s++){var a=e[s];null!=a&&a.apply(i[s],n[s])}},p.callLaterAsyncs=function(){if(t.$callAsyncFunctionList.length>0){var e=t.$callAsyncFunctionList,i=t.$callAsyncThisList,n=t.$callAsyncArgsList;t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[];for(var r=0;r<e.length;r++){var s=e[r];null!=s&&s.apply(i[r],n[r])}}},p.updateStageSize=function(e,i,n){void 0===n&&(n=1);var r=this.stage;(e!==r.$stageWidth||i!==r.$stageHeight||this.screenDisplayList.$pixelRatio!==n)&&(r.$stageWidth=e,r.$stageHeight=i,this.screenDisplayList.setDevicePixelRatio(n),this.screenDisplayList.setClipRect(e,i),r.dispatchEventWith(t.Event.RESIZE),r.$invalidate(!0))},n}(t.HashObject);e.Player=i,t.registerClass(i,"egret.sys.Player"),e.$logToFPS}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(){return Date.now()-t.$START_TIME}t.$START_TIME=0,t.getTimer=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}__extends(i,e);var n=i;return p=n.prototype,i.dispatchIOErrorEvent=function(e){var n=t.Event.create(i,i.IO_ERROR),r=e.dispatchEvent(n);return t.Event.release(n),r},i.IO_ERROR="ioError",i}(t.Event);t.IOErrorEvent=e,t.registerClass(e,"egret.IOErrorEvent")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(e){var n=this;i.call(this),this.$startTime=0,this.audio=null,this.onPlayEnd=function(){return 1==n.$loops?(n.stop(),void n.dispatchEventWith(t.Event.SOUND_COMPLETE)):(n.$loops>0&&n.$loops--,n.audio.load(),void n.$play())},e.addEventListener("ended",this.onPlayEnd),this.audio=e}__extends(n,i);var r=__define,s=n;return p=s.prototype,p.$play=function(){try{this.audio.currentTime=this.$startTime}catch(t){}finally{this.audio.play()}},p.stop=function(){if(this.audio){var t=this.audio;t.pause(),t.removeEventListener("ended",this.onPlayEnd),this.audio=null,e.HtmlSound.$recycle(this.$url,t)}},r(p,"volume",function(){return this.audio?this.audio.volume:1},function(t){this.audio&&(this.audio.volume=t)}),r(p,"position",function(){return this.audio?this.audio.currentTime:0}),n}(t.EventDispatcher);e.HtmlSoundChannel=i,t.registerClass(i,"egret.web.HtmlSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=this;e.call(this),this.$startTime=0,this.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(t.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},this._startTime=0}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.$play=function(){var e=this;this._startTime=Date.now();var i=0;i=e.$loops>0?e.$loops-1:-1,this.$type==t.Sound.EFFECT?QZAppExternal.playLocalSound(function(){},{bid:-1,url:e.$url,loop:i}):QZAppExternal.playLocalBackSound(function(){},{bid:-1,url:e.$url,loop:i})},p.stop=function(){this.$type==t.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()},n(p,"volume",function(){return 1},function(){}),n(p,"position",function(){return Math.floor(Date.now()-this._startTime)}),i}(t.EventDispatcher);e.QQSoundChannel=i,t.registerClass(i,"egret.web.QQSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(){var n=this;i.call(this),this.$startTime=0,this.bufferSource=null,this.context=e.WebAudioDecode.ctx,this._currentTime=0,this._volume=1,this.onPlayEnd=function(){return 1==n.$loops?(n.stop(),void n.dispatchEventWith(t.Event.SOUND_COMPLETE)):(n.$loops>0&&n.$loops--,void n.$play())},this._startTime=0,this.gain=this.context.createGain?this.context.createGain():this.context.createGainNode()}__extends(n,i);var r=__define,s=n;return p=s.prototype,p.$play=function(){this.bufferSource&&(this.bufferSource.onended=null,this.bufferSource=null);var t=this.context,e=this.gain,i=t.createBufferSource();this.bufferSource=i,i.buffer=this.$audioBuffer,i.connect(e),e.connect(t.destination),i.onended=this.onPlayEnd,this._startTime=Date.now(),this.gain.gain.value=this._volume,i.start(0,this._currentTime),this._currentTime=0},p.stop=function(){if(this.bufferSource){var t=this.bufferSource;t.stop?t.stop(0):t.noteOff(0),this.bufferSource.disconnect(),this.bufferSource=null}},r(p,"volume",function(){return this._volume},function(t){this._volume=t,this.gain.gain.value=t}),r(p,"position",function(){return this.bufferSource?Math.floor(Date.now()-this._startTime):0}),n}(t.EventDispatcher);e.WebAudioSoundChannel=i,t.registerClass(i,"egret.web.WebAudioSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.$invalidateRenderFlag=!1,e.$requestRenderingFlag=!1;var i=function(){function i(){this.playerList=[],this.callBackList=[],this.thisObjectList=[],this.$frameRate=30,this.frameInterval=2e3,this.lastCount=2e3,t.$START_TIME=Date.now()}var n=i;return p=n.prototype,p.$addPlayer=function(t){-1==this.playerList.indexOf(t)&&(this.playerList=this.playerList.concat(),this.playerList.push(t))},p.$removePlayer=function(t){var e=this.playerList.indexOf(t);if(-1!==e){this.playerList=this.playerList.concat(),this.playerList.splice(e,1)}},p.$startTick=function(t,e){var i=this.getTickIndex(t,e);-1==i&&(this.concatTick(),this.callBackList.push(t),this.thisObjectList.push(e))},p.$stopTick=function(t,e){var i=this.getTickIndex(t,e);-1!=i&&(this.concatTick(),this.callBackList.splice(i,1),this.thisObjectList.splice(i,1))},p.getTickIndex=function(t,e){for(var i=this.callBackList,n=this.thisObjectList,r=i.length-1;r>=0;r--)if(i[r]==t&&n[r]==e)return r;return-1},p.concatTick=function(){this.callBackList=this.callBackList.concat(),this.thisObjectList=this.thisObjectList.concat()},p.$setFrameRate=function(t){t=+t||0,0>=t||this.$frameRate!=t&&(this.$frameRate=t,t>60&&(t=60),this.lastCount=this.frameInterval=Math.round(6e4/t))},p.update=function(){for(var i=this.callBackList,n=this.thisObjectList,r=i.length,s=e.$requestRenderingFlag,a=t.getTimer(),o=0;r>o;o++)i[o].call(n[o],a)||(s=!0);return this.lastCount-=1e3,this.lastCount>0?void(s&&this.render(!1)):(this.lastCount+=this.frameInterval,this.render(!0),void this.broadcastEnterFrame())},p.render=function(t){var i=this.playerList,n=i.length;if(0!=n){e.$invalidateRenderFlag&&(this.broadcastRender(),e.$invalidateRenderFlag=!1);for(var r=0;n>r;r++)i[r].$render(t);e.$requestRenderingFlag=!1}},p.broadcastEnterFrame=function(){var e=t.DisplayObject.$enterFrameCallBackList,i=e.length;if(0!=i){e=e.concat();for(var n=0;i>n;n++)e[n].dispatchEventWith(t.Event.ENTER_FRAME);for(e=t.Recycler._callBackList,n=e.length-1;n>=0;n--)e[n].$checkFrame()}},p.broadcastRender=function(){var e=t.DisplayObject.$renderCallBackList,i=e.length;if(0!=i){e=e.concat();for(var n=0;i>n;n++)e[n].dispatchEventWith(t.Event.RENDER)}},i}();e.SystemTicker=i,t.registerClass(i,"egret.sys.SystemTicker"),e.$ticker=new e.SystemTicker}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret_stages,egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.LEFT="left",t.RIGHT="right",t.CENTER="center",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.HorizontalAlign=e,t.registerClass(e,"egret.HorizontalAlign")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.DYNAMIC="dynamic",t.INPUT="input",t}();t.TextFieldType=e,t.registerClass(e,"egret.TextFieldType")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.TOP="top",t.BOTTOM="bottom",t.MIDDLE="middle",t.JUSTIFY="justify",t.CONTENT_JUSTIFY="contentJustify",t}();t.VerticalAlign=e,t.registerClass(e,"egret.VerticalAlign")}(egret||(egret={}));var egret;!function(t){function e(){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.sys.tr.apply(t.sys,arguments)}var i=function(){function t(){}var e=__define,i=t;return p=i.prototype,e(t,"logLevel",void 0,function(e){switch(null==t.logFuncs&&(t.logFuncs={error:console.error,debug:console.debug,warn:console.warn,info:console.info,log:console.log}),e){case t.OFF:console.error=function(){};case t.ERROR:console.warn=function(){};case t.WARN:console.info=function(){},console.log=function(){};case t.INFO:console.debug=function(){}}switch(e){case t.ALL:case t.DEBUG:console.debug=t.logFuncs.debug;case t.INFO:console.log=t.logFuncs.log,console.info=t.logFuncs.info;case t.WARN:console.warn=t.logFuncs.warn;case t.ERROR:console.error=t.logFuncs.error}}),t.ALL="all",t.DEBUG="debug",t.INFO="info",t.WARN="warn",t.ERROR="error",t.OFF="off",t}();t.Logger=i,t.registerClass(i,"egret.Logger"),t.getString=e}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=""),e.call(this,t,i,n),this.text=r}__extends(i,e);var n=i;return p=n.prototype,i.dispatchTextEvent=function(e,n,r){var s=t.Event.create(i,n);s.text=r;var a=e.dispatchEvent(s);return t.Event.release(s),a},i.LINK="link",i}(t.Event);t.TextEvent=e,t.registerClass(e,"egret.TextEvent")}(egret||(egret={}));var egret;!function(t){var e=new t.Point,i=function(i){function n(t,e,n,r,s,a){i.call(this,t,e,n),this.targetChanged=!0,this.touchDown=!1,this.$setTo(r,s,a)}__extends(n,i);var r=__define,s=n;return p=s.prototype,p.$setTo=function(t,e,i){this.touchPointID=+i||0,this.$stageX=+t||0,this.$stageY=+e||0},r(p,"stageX",function(){return this.$stageX}),r(p,"stageY",function(){return this.$stageY}),r(p,"localX",function(){return this.targetChanged&&this.getLocalXY(),this._localX}),r(p,"localY",function(){return this.targetChanged&&this.getLocalXY(),this._localY}),p.getLocalXY=function(){this.targetChanged=!1;var t=this.$target.$getInvertedConcatenatedMatrix();t.transformPoint(this.$stageX,this.$stageY,e),this._localX=e.x,this._localY=e.y},p.$setTarget=function(t){this.$target=t,this.targetChanged=!!t},p.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},n.dispatchTouchEvent=function(e,i,r,s,a,o,h,l){if(void 0===l&&(l=!1),!r&&!e.hasEventListener(i))return!0;var u=t.Event.create(n,i,r,s);u.$setTo(a,o,h),u.touchDown=l;var c=e.dispatchEvent(u);return t.Event.release(u),c},n.TOUCH_MOVE="touchMove",n.TOUCH_BEGIN="touchBegin",n.TOUCH_END="touchEnd",n.TOUCH_TAP="touchTap",n.TOUCH_RELEASE_OUTSIDE="touchReleaseOutside",n.TOUCH_ROLL_OUT="touchRollOut",n.TOUCH_ROLL_OVER="touchRollOver",n}(t.Event);t.TouchEvent=i,t.registerClass(i,"egret.TouchEvent")}(egret||(egret={}));var egret;!function(t){var e=[],i=function(i){function n(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),i.call(this),this.x=t,this.y=e,this.width=n,this.height=r}__extends(n,i);var r=__define,s=n;return p=s.prototype,n.release=function(t){t&&e.push(t)},n.create=function(){var t=e.pop();return t||(t=new n),t},r(p,"right",function(){return this.x+this.width},function(t){this.width=t-this.x}),r(p,"bottom",function(){return this.y+this.height},function(t){this.height=t-this.y}),r(p,"left",function(){return this.x},function(t){this.width+=this.x-t,this.x=t}),r(p,"top",function(){return this.y},function(t){this.height+=this.y-t,this.y=t}),r(p,"topLeft",function(){return new t.Point(this.left,this.top)},function(t){this.top=t.y,this.left=t.x}),r(p,"bottomRight",function(){return new t.Point(this.right,this.bottom)},function(t){this.bottom=t.y,this.right=t.x}),p.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},p.setTo=function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},p.contains=function(t,e){return this.x<=t&&this.x+this.width>=t&&this.y<=e&&this.y+this.height>=e},p.intersection=function(t){return this.clone().$intersectInPlace(t)},p.inflate=function(t,e){this.x-=t,this.width+=2*t,this.y-=e,this.height+=2*e},p.$intersectInPlace=function(t){var e=this.x,i=this.y,n=t.x,r=t.y,s=Math.max(e,n),a=Math.min(e+this.width,n+t.width);if(a>=s){var o=Math.max(i,r),h=Math.min(i+this.height,r+t.height);if(h>=o)return this.setTo(s,o,a-s,h-o),this}return this.setEmpty(),this},p.intersects=function(t){return Math.max(this.x,t.x)<=Math.min(this.right,t.right)&&Math.max(this.y,t.y)<=Math.min(this.bottom,t.bottom)},p.isEmpty=function(){return this.width<=0||this.height<=0},p.setEmpty=function(){this.x=0,this.y=0,this.width=0,this.height=0},p.clone=function(){return new n(this.x,this.y,this.width,this.height)},p.containsPoint=function(t){return this.x<t.x&&this.x+this.width>t.x&&this.y<t.y&&this.y+this.height>t.y?!0:!1},p.containsRect=function(t){var e=t.x+t.width,i=t.y+t.height,n=this.x+this.width,r=this.y+this.height;return t.x>=this.x&&t.x<n&&t.y>=this.y&&t.y<r&&e>this.x&&n>=e&&i>this.y&&r>=i},p.equals=function(t){return this===t?!0:this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},p.inflatePoint=function(t){this.inflate(t.x,t.y)},p.offset=function(t,e){this.x+=t,this.y+=e},p.offsetPoint=function(t){this.offset(t.x,t.y)},p.toString=function(){return"(x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"},p.union=function(t){var e=this.clone();if(t.isEmpty())return e;if(e.isEmpty())return e.copyFrom(t),e;var i=Math.min(e.x,t.x),n=Math.min(e.y,t.y);return e.setTo(i,n,Math.max(e.right,t.right)-i,Math.max(e.bottom,t.bottom)-n),e},p.$getBaseWidth=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return e*this.width+i*this.height},p.$getBaseHeight=function(t){var e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t));return i*this.width+e*this.height},n}(t.HashObject);t.Rectangle=i,t.registerClass(i,"egret.Rectangle"),t.$TempRectangle=new i}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(){i.call(this),this.loaded=!1}__extends(n,i);var r=n;return p=r.prototype,p.load=function(e){function i(){s(),a.loaded=!0,a.dispatchEventWith(t.Event.COMPLETE)}function r(){s(),a.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}function s(){o.removeEventListener("canplaythrough",i),o.removeEventListener("error",r)}var a=this;this.url=e;var o=new Audio(e);o.addEventListener("canplaythrough",i),o.addEventListener("error",r),o.load(),this.originAudio=o,n.$recycle(this.url,o)},p.play=function(t,i){t=+t||0,i=+i||0;var r=n.$pop(this.url);null==r?r=this.originAudio.cloneNode():r.load(),r.autoplay=!0;var s=new e.HtmlSoundChannel(r);return s.$url=this.url,s.$loops=i,s.$startTime=t,s.$play(),s},p.preload=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.type=t,e&&window.setTimeout(function(){e.call(i)},0)},p.close=function(){0==this.loaded&&this.originAudio&&(this.originAudio.src=""),this.originAudio&&(this.originAudio=null),n.$clear(this.url)},p.destroy=function(){this.originAudio=null,this.loaded=!1},n.$clear=function(t){var e=n.audios[t];e&&(e.length=0)},n.$pop=function(t){var e=n.audios[t];return e&&e.length>0?e.pop():null},n.$recycle=function(t,e){var i=n.audios[t];null==n.audios[t]&&(i=n.audios[t]=[]),i.push(e)},n.MUSIC="music",n.EFFECT="effect",n.audios={},n}(t.EventDispatcher);e.HtmlSound=i,t.registerClass(i,"egret.web.HtmlSound",["egret.Sound"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(){i.call(this),this.loaded=!1}__extends(n,i);var r=n;return p=r.prototype,p.load=function(i){var n=this;this.url=i,QZAppExternal.preloadSound(function(e){0==e.code?(n.loaded=!0,n.dispatchEventWith(t.Event.COMPLETE)):n.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},{bid:-1,url:e.Html5Capatibility._QQRootPath+i,refresh:1})},p.preload=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.type=t,e&&window.setTimeout(function(){e.call(i)},0)},p.play=function(t,i){t=+t||0,i=+i||0;var n=new e.QQSoundChannel;return n.$url=this.url,n.$loops=i,n.$type=this.type,n.$startTime=t,n.$play(),n},p.close=function(){},p.destroy=function(){this.loaded=!1,this.type==t.Sound.EFFECT?QZAppExternal.stopSound():QZAppExternal.stopBackSound()},n.MUSIC="music",n.EFFECT="effect",n}(t.EventDispatcher);e.QQSound=i,t.registerClass(i,"egret.web.QQSound",["egret.Sound"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function e(){}var i=e;return p=i.prototype,e.decodeAudios=function(){if(!(e.decodeArr.length<=0||e.isDecoding)){e.isDecoding=!0;var i=e.decodeArr.shift();e.ctx.decodeAudioData(i.buffer,function(t){i.self.audioBuffer=t,i.success&&i.success(),e.isDecoding=!1,e.decodeAudios()},function(){alert(t.getString(1034,i.url)),i.fail&&i.fail(),e.isDecoding=!1,e.decodeAudios()})}},e.canUseWebAudio=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,e.ctx=e.canUseWebAudio?new(window.AudioContext||window.webkitAudioContext||window.mozAudioContext):void 0,e.decodeArr=[],e.isDecoding=!1,e}();e.WebAudioDecode=i,t.registerClass(i,"egret.web.WebAudioDecode");var n=function(n){function r(){n.call(this),this.loaded=!1}__extends(r,n);var s=r;return p=s.prototype,p.load=function(e){function n(){s.loaded=!0,s.dispatchEventWith(t.Event.COMPLETE)}function r(){s.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}var s=this;this.url=e;var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",console.log("loadWebAudio"),a.onload=function(){s._arrayBuffer=a.response,i.decodeArr.push({buffer:s._arrayBuffer,success:n,fail:r,self:s,url:s.url}),i.decodeAudios()},a.send()},p.preload=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.type=t,e&&window.setTimeout(function(){e.call(i)},0)},p.play=function(t,i){t=+t||0,i=+i||0;var n=new e.WebAudioSoundChannel;return n.$url=this.url,n.$loops=i,n.$audioBuffer=this.audioBuffer,n.$startTime=t,n.$play(),n},p.close=function(){},p.destroy=function(){this.loaded=!1},r.MUSIC="music",r.EFFECT="effect",r}(t.EventDispatcher);e.WebAudioSound=n,t.registerClass(n,"egret.web.WebAudioSound",["egret.Sound"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){t.sharedRenderContext,t.surfaceFactory}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=__define,i=t;return p=i.prototype,e(t,"language",function(){return t.$language}),e(t,"isMobile",function(){return t.$isMobile}),e(t,"os",function(){return t.$os}),e(t,"hasGeolocation",function(){return t.$hasGeolocation}),e(t,"hasOrientation",function(){return t.$hasOrientation}),e(t,"hasMotion",function(){return t.$hasMotion}),t.$language="zh-CN",t.$os="Unknown",t}();t.Capabilities=e,t.registerClass(e,"egret.Capabilities")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}var i=e;return p=i.prototype,e._getStartLine=function(t){var i=e._getTextHeight(t),n=0,r=t.$TextField[4];return isNaN(r)||(r>i||i>r&&(n=Math.max(t.$TextField[28]-1,0),n=Math.min(t.$TextField[29]-1,n)),t.$TextField[30]||(n=Math.max(t.$TextField[28]-1,0),n=Math.min(t.$TextField[29]-1,n))),n},e._getHalign=function(e){var i=e._getLinesArr(),n=0;return e.$TextField[9]==t.HorizontalAlign.CENTER?n=.5:e.$TextField[9]==t.HorizontalAlign.RIGHT&&(n=1),e.$TextField[24]==t.TextFieldType.INPUT&&!e.$TextField[30]&&i.length>1&&(n=0),n},e._getTextHeight=function(e){var i=t.TextFieldType.INPUT!=e.$TextField[24]||e.$TextField[30]?e.$TextField[6]+(e.$TextField[29]-1)*e.$TextField[1]:e.$TextField[0];return i},e._getValign=function(i){var n=e._getTextHeight(i),r=i.$TextField[4];if(!isNaN(r)&&r>n){var s=0;return i.$TextField[10]==t.VerticalAlign.MIDDLE?s=.5:i.$TextField[10]==t.VerticalAlign.BOTTOM&&(s=1),s}return 0},e._getTextElement=function(t,i,n){var r=e._getHit(t,i,n),s=t._getLinesArr();return r&&s[r.lineIndex]&&s[r.lineIndex].elements[r.textElementIndex]?s[r.lineIndex].elements[r.textElementIndex]:null},e._getHit=function(t,i,n){var r=t._getLinesArr();if(0==t.$TextField[3])return null;var s=0,a=e._getTextHeight(t),o=0,h=t.$TextField[4];if(!isNaN(h)&&h>a){var l=e._getValign(t);o=l*(h-a),0!=o&&(n-=o)}for(var u=e._getStartLine(t),c=0,p=u;p<r.length;p++){var d=r[p];if(c+d.height>=n){s=p+1;break}if(c+=d.height,c+t.$TextField[1]>n)return null;c+=t.$TextField[1]}if(0==s)return null;var f=r[s-1],g=0;for(p=0;p<f.elements.length;p++){var v=f.elements[p];if(!(g+v.width<i))return{lineIndex:s-1,textElementIndex:p};g+=v.width}return null},e._getScrollNum=function(t){var e=1;if(t.$TextField[30]){var i=t.height,n=t.size,r=t.lineSpacing;e=Math.floor(i/(n+r));var s=i-(n+r)*e;s>n/2&&e++}return e},e}();t.TextFieldUtils=e,t.registerClass(e,"egret.TextFieldUtils")}(egret||(egret={}));var egret;!function(t){function e(t){for(var e=t.toString(16).toUpperCase();e.length>6;)e=e.slice(1,e.length);for(;e.length<6;)e="0"+e;return"#"+e}t.toColorString=e}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(t){e.call(this),this.maxTouches=0,this.useTouchesCount=0,this.touchDownTarget={},this.lastTouchX=-1,this.lastTouchY=-1,this.stage=t}__extends(i,e);var n=i;return p=n.prototype,p.$setMaxTouches=function(){this.maxTouches=this.stage.$maxTouches},p.onTouchBegin=function(e,i,n){if(!(this.useTouchesCount>=this.maxTouches)){this.lastTouchX=e,this.lastTouchY=i;var r=this.findTarget(e,i);null==this.touchDownTarget[n]&&(this.touchDownTarget[n]=r,this.useTouchesCount++),t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_BEGIN,!0,!0,e,i,n,!0)}},p.onTouchMove=function(e,i,n){if(null!=this.touchDownTarget[n]&&(this.lastTouchX!=e||this.lastTouchY!=i)){this.lastTouchX=e,this.lastTouchY=i;var r=this.findTarget(e,i);t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_MOVE,!0,!0,e,i,n,!0)}},p.onTouchEnd=function(e,i,n){if(null!=this.touchDownTarget[n]){var r=this.findTarget(e,i),s=this.touchDownTarget[n];delete this.touchDownTarget[n],this.useTouchesCount--,t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_END,!0,!0,e,i,n,!1),s==r?t.TouchEvent.dispatchTouchEvent(r,t.TouchEvent.TOUCH_TAP,!0,!0,e,i,n,!1):t.TouchEvent.dispatchTouchEvent(s,t.TouchEvent.TOUCH_RELEASE_OUTSIDE,!0,!0,e,i,n,!1)}},p.findTarget=function(t,e){var i=this.stage.$hitTest(t,e);return i||(i=this.stage),i},i}(t.HashObject);e.TouchHandler=i,t.registerClass(i,"egret.sys.TouchHandler")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(e,n,r,s,a,o,h){void 0===h&&(h=null),i(e,n,h),h=h||{};var l;l=null!=h.textColor?t.toColorString(h.textColor):n.$TextField[11];var u;u=null!=h.strokeColor?t.toColorString(h.strokeColor):n.$TextField[26];var c;c=null!=h.stroke?h.stroke:n.$TextField[27],e.fillStyle=l,e.strokeStyle=u,c&&(e.lineWidth=2*c,e.strokeText(r,s,a,o||65535)),e.fillText(r,s,a,o||65535)}function i(t,e,i){void 0===i&&(i=null),i=i||{};var n=null==i.italic?e.$TextField[16]:i.italic,r=null==i.bold?e.$TextField[15]:i.bold,s=null==i.size?e.$TextField[0]:i.size,a=null==i.fontFamily?e.$TextField[8]:i.fontFamily,o=n?"italic ":"normal ";o+=r?"bold ":"normal ",o+=s+"px "+a,t.font=o,t.textAlign="left",t.textBaseline="middle"}var n=function(n){function r(){n.call(this),this._inputUtils=null,this._bgGraphics=null,this._isFlow=!1,this._textArr=[],this._linesArr=[],this._isTyping=!1,this.$renderRegion=new t.sys.Region,this.$TextField={0:30,1:0,2:16777215,3:0/0,4:0/0,5:0,6:0,7:0,8:"sans-serif",9:"left",10:"top",11:"#ffffff",12:"",13:"",14:[],15:!1,16:!1,17:!0,18:!1,19:!1,20:!1,21:0,22:0,23:0,24:t.TextFieldType.DYNAMIC,25:0,26:"#000000",27:0,28:-1,29:0,30:!1,31:!1,32:0,33:!1,34:16777215,35:null,36:null}}__extends(r,n);var s=__define,a=r;return p=a.prototype,p.isInput=function(){return this.$TextField[24]==t.TextFieldType.INPUT},s(p,"fontFamily",function(){return this.$TextField[8]},function(t){var e=this.$TextField;e[8]!=t&&(e[8]=t,this.invalidateFontString())}),s(p,"size",function(){return this.$TextField[0]},function(e){e=t.getNumber(e);var i=this.$TextField;i[0]!=e&&(i[0]=e,this.invalidateFontString())}),s(p,"bold",function(){return this.$TextField[15]},function(t){t=!!t;var e=this.$TextField;t!=e[15]&&(e[15]=t,this.invalidateFontString())}),s(p,"italic",function(){return this.$TextField[16]},function(t){t=!!t;var e=this.$TextField;t!=e[16]&&(e[16]=t,this.invalidateFontString())}),p.invalidateFontString=function(){this.$TextField[17]=!0,this.$invalidateTextField()},p.getFontString=function(){var e=this.$TextField;return e[17]&&(e[17]=!1,e[12]=t.sys.toFontString(this)),e[12]},s(p,"textAlign",function(){return this.$TextField[9]},function(t){var e=this.$TextField;e[9]!=t&&(e[9]=t,this.$invalidateTextField())}),s(p,"verticalAlign",function(){return this.$TextField[10]},function(t){var e=this.$TextField;e[10]!=t&&(e[10]=t,this.$invalidateTextField())}),s(p,"lineSpacing",function(){return this.$TextField[1]},function(e){e=t.getNumber(e);var i=this.$TextField;i[1]!=e&&(i[1]=e,this.$invalidateTextField())}),s(p,"textColor",function(){return this.$TextField[2]},function(e){e=0|+e;var i=this.$TextField;i[2]!=e&&(i[2]=e,i[11]=t.sys.toColorString(e),this.$invalidate())}),s(p,"wordWrap",function(){return this.$TextField[19]},function(t){t=!!t;var e=this.$TextField;t!=e[19]&&(e[20]||(e[19]=t,this.$invalidateTextField()))}),s(p,"type",function(){return this.$TextField[24]},function(t){this._setType(t)}),p._setType=function(e){this.$TextField[24]!=e&&(this.$TextField[24]=e,e==t.TextFieldType.INPUT?(isNaN(this.$TextField[3])&&this.$setWidth(100),isNaN(this.$TextField[4])&&this.$setHeight(30),this.$setTouchEnabled(!0),null==this._inputUtils&&(this._inputUtils=new t.InputController),this._inputUtils.init(this),this.$invalidateTextField(),this.$stage&&this._inputUtils._addStageText()):(this._inputUtils&&(this._inputUtils._removeStageText(),this._inputUtils=null),this.$setTouchEnabled(!1)))},s(p,"text",function(){return this.$getText()},function(t){this.$setText(t)}),p.$getText=function(){return this.$TextField[24]==t.TextFieldType.INPUT?this._inputUtils._getText():this.$TextField[13]},p._setBaseText=function(t){if(null==t&&(t=""),t=t.toString(),this._isFlow=!1,this.$TextField[13]!=t){this.$invalidateTextField(),this.$TextField[13]=t;var e="";e=this.$TextField[20]?this.changeToPassText(t):t,this.setMiddleStyle([{text:e}])}},p.$setText=function(t){null==t&&(t=""),this._setBaseText(t),this._inputUtils&&this._inputUtils._setText(this.$TextField[13])},s(p,"displayAsPassword",function(){return this.$TextField[20]},function(t){this._setDisplayAsPassword(t)}),p._setDisplayAsPassword=function(t){if(this.$TextField[20]!=t){this.$TextField[20]=t,this.$invalidateTextField();var e="";e=t?this.changeToPassText(this.$TextField[13]):this.$TextField[13],this.setMiddleStyle([{text:e}])}},s(p,"strokeColor",function(){return this.$TextField[25]},function(t){this._setStrokeColor(t)}),p._setStrokeColor=function(e){this.$TextField[25]!=e&&(this.$invalidateTextField(),this.$TextField[25]=e,this.$TextField[26]=t.toColorString(e))},s(p,"stroke",function(){return this.$TextField[27]},function(t){this._setStroke(t)}),p._setStroke=function(t){this.$TextField[27]!=t&&(this.$invalidateTextField(),this.$TextField[27]=t)},s(p,"maxChars",function(){return this.$TextField[21]},function(t){this._setMaxChars(t)}),p._setMaxChars=function(t){this.$TextField[21]!=t&&(this.$TextField[21]=t)},s(p,"scrollV",function(){return Math.min(Math.max(this.$TextField[28],1),this.maxScrollV)},function(t){this.$TextField[28]=Math.max(t,1),this.$invalidateTextField()}),s(p,"maxScrollV",function(){return this._getLinesArr(),Math.max(this.$TextField[29]-t.TextFieldUtils._getScrollNum(this)+1,1)}),s(p,"selectionBeginIndex",function(){return 0}),s(p,"selectionEndIndex",function(){return 0}),s(p,"caretIndex",function(){return 0}),p.$setSelection=function(){},p.$getLineHeight=function(){return this.$TextField[1]+this.$TextField[0]},s(p,"numLines",function(){return this.$TextField[29]}),s(p,"multiline",function(){return this.$TextField[30]},function(t){this._setMultiline(t)}),p._setMultiline=function(t){this.$TextField[30]=t,this.$invalidateTextField()},s(p,"restrict",function(){var t=this.$TextField,e=null;return null!=t[35]&&(e=t[35]),null!=t[36]&&(null==e&&(e=""),e+="^"+t[36]),e},function(t){var e=this.$TextField;if(null==t)e[35]=null,e[36]=null;else{for(var i=-1;i<t.length&&(i=t.indexOf("^",i),0!=i)&&i>0&&"\\"==t.charAt(i-1);)i++;0==i?(e[35]=null,e[36]=t.substring(i+1)):i>0?(e[35]=t.substring(0,i),e[36]=t.substring(i+1)):(e[35]=t,e[36]=null)}}),p.$setWidth=function(t){var e=this.$TextField;e[3]=isNaN(t)?0/0:t,t=+t,0>t||this.$invalidateTextField()},p.$setHeight=function(t){var e=this.$TextField;
e[4]=isNaN(t)?0/0:t,t=+t,0>t||this.$invalidateTextField()},p.$getWidth=function(){var t=this.$TextField;return isNaN(t[3])?this.$getContentBounds().width:t[3]},p.$getHeight=function(){var t=this.$TextField;return isNaN(t[4])?this.$getContentBounds().height:t[4]},s(p,"border",function(){return this.$TextField[31]},function(t){this.$TextField[31]=t,this.fillBackground()}),s(p,"borderColor",function(){return this.$TextField[32]},function(t){this.$TextField[32]=t,this.fillBackground()}),s(p,"background",function(){return this.$TextField[33]},function(t){this.$TextField[33]=t,this.fillBackground()}),s(p,"backgroundColor",function(){return this.$TextField[34]},function(t){this.$TextField[34]=t,this.fillBackground()}),p.fillBackground=function(){var e=this,i=e._bgGraphics;i&&i.clear(),(this.$TextField[33]||this.$TextField[31])&&(null==i&&(i=e._bgGraphics=new t.Graphics,this._bgGraphics.$renderContext.$targetDisplay=this),this.$TextField[33]&&i.beginFill(this.$TextField[34],1),this.$TextField[31]&&i.lineStyle(1,this.$TextField[32]),i.drawRect(0,0,e.$getWidth(),e.$getHeight()),i.endFill())},p.setFocus=function(){t.$warn(1013)},p.$onRemoveFromStage=function(){n.prototype.$onRemoveFromStage.call(this),this._removeEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this._inputUtils._removeStageText()},p.$onAddToStage=function(e,i){n.prototype.$onAddToStage.call(this,e,i),this._addEvent(),this.$TextField[24]==t.TextFieldType.INPUT&&this._inputUtils._addStageText()},p.$invalidateTextField=function(){this.$invalidateContentBounds(),this.$TextField[18]=!0},p.$measureContentBounds=function(e){var i=this;this._getLinesArr();var n=isNaN(this.$TextField[3])?this.$TextField[5]:this.$TextField[3],r=isNaN(this.$TextField[4])?t.TextFieldUtils._getTextHeight(i):this.$TextField[4];i.border&&(n+=2,r+=2),e.setTo(0,0,n,r)},p.$render=function(e){if(this._bgGraphics&&this._bgGraphics.$render(e),this.$TextField[24]==t.TextFieldType.INPUT){if(this._inputUtils._updateProperties(),this._isTyping)return}else if(0==this.$TextField[3])return;this.drawText(e)},s(p,"textFlow",function(){return this._textArr},function(t){this._isFlow=!0;var e="";null==t&&(t=[]);for(var i=0;i<t.length;i++){var n=t[i];e+=n.text}this.$TextField[20]?this._setBaseText(e):(this.$TextField[13]=e,this.setMiddleStyle(t))}),p.changeToPassText=function(t){if(this.$TextField[20]){for(var e="",i=0,n=t.length;n>i;i++)switch(t.charAt(i)){case"\n":e+="\n";break;case"\r":break;default:e+="*"}return e}return t},p.setMiddleStyle=function(t){this.$TextField[18]=!0,this._textArr=t,this.$invalidateTextField()},s(p,"textWidth",function(){return this._getLinesArr(),this.$TextField[5]}),s(p,"textHeight",function(){return this._getLinesArr(),t.TextFieldUtils._getTextHeight(this)}),p.appendText=function(t){this.appendElement({text:t})},p.appendElement=function(t){var e=this.$TextField[13]+t.text;this.$TextField[20]?this._setBaseText(e):(this.$TextField[13]=e,this._textArr.push(t),this.setMiddleStyle(this._textArr))},p._getLinesArr=function(){var e=this;if(!e.$TextField[18])return e._linesArr;e.$TextField[18]=!1;var n=e._textArr,r=t.sys.sharedRenderContext;e._linesArr.length=0,this.$TextField[6]=0,this.$TextField[5]=0;var s=this.$TextField[3];if(!isNaN(s)&&0==s)return this.$TextField[29]=0,[{width:0,height:0,charNum:0,elements:[],hasNextLine:!1}];e._isFlow||i(r,e);for(var a,o=e._linesArr,h=0,l=0,u=0,c=0,p=0,d=n.length;d>p;p++){var f=n[p];f.style=f.style||{};for(var g=f.text.toString(),v=g.split(/(?:\r\n|\r|\n)/),m=0,_=v.length;_>m;m++){null==o[c]&&(a={width:0,height:0,elements:[],charNum:0,hasNextLine:!1},o[c]=a,h=0,u=0,l=0),u=this.$TextField[24]==t.TextFieldType.INPUT?this.$TextField[0]:Math.max(u,f.style.size||this.$TextField[0]);var $=!0;if(""==v[m])m==_-1&&($=!1);else{e._isFlow&&i(r,e,f.style);var y=r.measureText(v[m]).width;if(isNaN(s))h+=y,l+=v[m].length,a.elements.push({width:y,text:v[m],style:f.style}),m==_-1&&($=!1);else if(s>=h+y)a.elements.push({width:y,text:v[m],style:f.style}),h+=y,l+=v[m].length,m==_-1&&($=!1);else{var x=0,T=0,E=v[m];if(this.$TextField[19])var b=E.split(/\b/);else b=E.match(/./g);for(var w=b.length,C=0;w>x&&(y=r.measureText(b[x]).width,!(0!=h&&h+y>s&&h+x!=0));x++)C+=b[x].length,T+=y,h+=y,l+=C;if(x>0){a.elements.push({width:T,text:E.substring(0,C),style:f.style});for(var S=E.substring(C),F=0,O=S.length;O>F&&" "==S.charAt(F);F++);v[m]=S.substring(F)}""!=v[m]&&(m--,$=!1)}}$&&(l++,a.hasNextLine=!0),m<v.length-1&&(a.width=h,a.height=u,a.charNum=l,this.$TextField[5]=Math.max(this.$TextField[5],h),this.$TextField[6]+=u,c++)}p==n.length-1&&a&&(a.width=h,a.height=u,a.charNum=l,this.$TextField[5]=Math.max(this.$TextField[5],h),this.$TextField[6]+=u)}return this.$TextField[29]=o.length,this.fillBackground(),o},p.drawText=function(i){var n=this,r=this.$TextField,s=n._getLinesArr();if(0!=r[5]){var a=isNaN(r[3])?r[5]:r[3],o=t.TextFieldUtils._getTextHeight(n),h=0,l=t.TextFieldUtils._getStartLine(n),u=r[4];if(!isNaN(u)&&u>o){var c=t.TextFieldUtils._getValign(n);h+=c*(u-o)}h=Math.round(h);for(var p=t.TextFieldUtils._getHalign(n),d=[],f=0,g=l,v=r[29];v>g;g++){var m=s[g],_=m.height;if(h+=_/2,g!=l){if(r[24]==t.TextFieldType.INPUT&&!r[30])break;if(!isNaN(u)&&h>u)break}f=Math.round((a-m.width)*p);for(var $=0,y=m.elements.length;y>$;$++){var x=m.elements[$],T=x.style.size||r[0];e(i,n,x.text,f,h+(_-T)/2,x.width,x.style),x.style.href&&d.push({x:f,y:h+_/2,w:x.width,c:x.style.textColor}),f+=x.width}h+=_/2+r[1]}if(d.length>0){i.save(),i.lineWidth=1,i.beginPath();for(var E=0;E<d.length;E++){var b=d[E];i.strokeStyle=t.toColorString(b.c)||r[11],i.rect(b.x,b.y,b.w,1)}i.closePath(),i.stroke(),i.restore()}}},p._addEvent=function(){this.addEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},p._removeEvent=function(){this.removeEventListener(t.TouchEvent.TOUCH_TAP,this.onTapHandler,this)},p.onTapHandler=function(e){if(this.$TextField[24]!=t.TextFieldType.INPUT){var i=t.TextFieldUtils._getTextElement(this,e.localX,e.localY);if(null!=i){var n=i.style;if(n&&n.href)if(n.href.match(/^event:/)){var r=n.href.match(/^event:/)[0];t.TextEvent.dispatchTextEvent(this,t.TextEvent.LINK,n.href.substring(r.length))}else open(n.href,n.target||"_blank")}}},r.default_fontFamily="Arial",r}(t.DisplayObject);t.TextField=n,t.registerClass(n,"egret.TextField")}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){var e="";return t.italic&&(e+="italic "),t.bold&&(e+="bold "),e+=(t.fontSize||12)+"px ",e+=t.fontFamily||"sans-serif"}function i(t){0>t&&(t=0),t>16777215&&(t=16777215);for(var e=t.toString(16).toUpperCase();e.length<6;)e="0"+e;return"#"+e}t.toFontString=e,t.toColorString=i}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){function e(t){return"undefined"==typeof t}function i(t){return+t||0}t.isUndefined=e,t.getNumber=i}(egret||(egret={}));var egret;!function(t){function e(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.$callLaterFunctionList.push(e),t.$callLaterThisList.push(i),t.$callLaterArgsList.push(n)}function i(e,i){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];t.$callAsyncFunctionList.push(e),t.$callAsyncThisList.push(i),t.$callAsyncArgsList.push(n)}t.$callLaterFunctionList=[],t.$callLaterThisList=[],t.$callLaterArgsList=[],t.callLater=e,t.$callAsyncFunctionList=[],t.$callAsyncThisList=[],t.$callAsyncArgsList=[],t.$callAsync=i}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e){var i="";if(null!=e)i=n(t,e);else{if(null==o){var r=document.createElement("div").style;o=n("transform",r)}i=o}return""==i?t:i+t.charAt(0).toUpperCase()+t.substring(1,t.length)}function n(t,e){if(t in e)return"";t=t.charAt(0).toUpperCase()+t.substring(1,t.length);for(var i=["webkit","ms","Moz","O"],n=0;n<i.length;n++){var r=i[n]+t;if(r in e)return i[n]}return""}var r=function(){function t(){}var e=t;return p=e.prototype,t.QQ_AUDIO=1,t.WEB_AUDIO=2,t.HTML5_AUDIO=3,t}();e.AudioType=r,t.registerClass(r,"egret.web.AudioType");var s=function(){function t(){}var e=t;return p=e.prototype,t.WPHONE=1,t.IOS=2,t.ADNROID=3,t}();e.SystemOSType=s,t.registerClass(s,"egret.web.SystemOSType");var a=function(e){function i(){e.call(this)}__extends(i,e);var n=i;return p=n.prototype,i._init=function(){var e=navigator.userAgent.toLowerCase();if(i.ua=e,t.Capabilities.$isMobile=-1!=e.indexOf("mobile")||-1!=e.indexOf("android"),i._canUseBlob=!1,i._audioType=r.HTML5_AUDIO,i._AudioClass=t.web.HtmlSound,i._audioMustLoad=!0,e.indexOf("windows phone")>=0)i._System_OS=s.WPHONE,i._audioMustLoad=!1,t.Capabilities.$os="Windows Phone";else if(e.indexOf("android")>=0){if(i._System_OS=s.ADNROID,e.indexOf("ucbrowser")>=0&&(i._audioMustLoad=!1),t.Capabilities.$os="Android",i._System_OS=s.ADNROID,window.hasOwnProperty("QZAppExternal")&&e.indexOf("qzone")>=0){i._audioType=r.QQ_AUDIO,i._AudioClass=t.web.QQSound;var n=document.getElementsByTagName("base");if(n&&n.length>0)i._QQRootPath=n[0].baseURI;else{var a=window.location.href.indexOf("?");-1==a&&(a=window.location.href.length);var o=window.location.href.substring(0,a);o=o.substring(0,o.lastIndexOf("/")),i._QQRootPath=o+"/"}}}else e.indexOf("iphone")>=0||e.indexOf("ipad")>=0||e.indexOf("ipod")>=0?(t.Capabilities.$os="iOS",i._System_OS=s.IOS,i.getIOSVersion()>=7&&(i._canUseBlob=!0,i._AudioClass=t.web.WebAudioSound,i._audioType=r.WEB_AUDIO)):-1!=e.indexOf("windows nt")?t.Capabilities.$os="Windows PC":-1!=e.indexOf("mac os")&&(t.Capabilities.$os="Mac OS");var h=window.URL||window.webkitURL;h||(i._canUseBlob=!1);var l=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;l||i._audioType!=r.WEB_AUDIO||(i._audioType=r.HTML5_AUDIO,i._AudioClass=t.web.HtmlSound),t.Sound=i._AudioClass},i.getIOSVersion=function(){var t=i.ua.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];return parseInt(t.match(/\d(_\d)*/)[0])||0},i.checkHtml5Support=function(){var e="geolocation"in navigator,i="DeviceOrientationEvent"in window,n="DeviceMotionEvent"in window;t.Capabilities.$hasGeolocation=e,t.Capabilities.$hasMotion=n,t.Capabilities.$hasOrientation=i;var r=(navigator.language||navigator.browserLanguage).toLowerCase(),s=r.split("-");s.length>1&&(s[1]=s[1].toUpperCase()),t.Capabilities.$language=s.join("-")},i._canUseBlob=!1,i._audioType=0,i._audioMustLoad=!1,i._QQRootPath="",i._System_OS=0,i._WebPSupport=!1,i.ua="",i}(t.HashObject);e.Html5Capatibility=a,t.registerClass(a,"egret.web.Html5Capatibility"),a._init();var o=null;e.getPrefixStyleName=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i){t.call(this),this._name=e,this._frame=0|i}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"name",function(){return this._name}),i(p,"frame",function(){return this._frame}),p.clone=function(){return new e(this._name,this._frame)},e}(t.EventDispatcher);t.FrameLabel=e,t.registerClass(e,"egret.FrameLabel")}(egret||(egret={}));var egret;!function(t){function e(t){return t%=2*s,0>t&&(t+=2*s),t}function i(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}function n(t,e,n,r,s){var a=i(t,e,n,r);s.x=(n-t)/a,s.y=(r-e)/a}function r(t){var e=t.graphicsMap={};return e[6]=t.arc,e[18]=t.arcTo,e[17]=t.beginPath,e[14]=t.bezierCurveTo,e[10]=t.closePath,e[9]=t.fill,e[13]=t.fillRect,e[8]=t.lineTo,e[12]=t.moveTo,e[7]=t.quadraticCurveTo,e[11]=t.rect,e[15]=t.stroke,e[16]=t.strokeRect,e[19]=t.scale,e[3]=function(e){t.lineWidth=e},e[0]=function(e){t.miterLimit=e},e[5]=function(e){t.fillStyle=e},e[1]=function(e){t.lineCap=e},e[2]=function(e){t.lineJoin=e},e[4]=function(e){t.strokeStyle=e},e}var s=Math.PI,a=s/2,o=s+a,h=2*s,l={x:0,y:0},u={x:0,y:0},c={x:0,y:0},d=function(d){function f(){d.call(this),this.$commands=[],this.reset()}__extends(f,d);var g=__define,v=f;return p=v.prototype,f.createRadialGradient=function(e,i,n,r,s,a){return t.sys.sharedRenderContext.createRadialGradient(e,i,n,r,s,a)},f.createLinearGradient=function(e,i,n,r){return t.sys.sharedRenderContext.createLinearGradient(e,i,n,r)},f.createPattern=function(e,i){return t.sys.sharedRenderContext.createPattern(e,i)},g(p,"fillStyle",function(){return this._fillStyle},function(e){"number"==typeof e&&(e=t.sys.toColorString(e)),this._fillStyle=e,this.pushCommand(5,arguments)}),g(p,"lineWidth",function(){return this._lineWidth},function(t){this._lineWidth=t,this.pushCommand(3,arguments)}),g(p,"lineCap",function(){return this._lineCap},function(t){this._lineCap=t,this.pushCommand(1,arguments)}),g(p,"strokeStyle",function(){return this._strokeStyle},function(e){"number"==typeof e&&(e=t.sys.toColorString(e)),this._strokeStyle=e,this.pushCommand(4,arguments)}),g(p,"lineJoin",function(){return this._lineJoin},function(t){this._lineJoin=t,this.pushCommand(2,arguments)}),g(p,"miterLimit",function(){return this._miterLimit},function(t){this._miterLimit=t,this.pushCommand(0,arguments)}),p.scale=function(){this.pushCommand(19,arguments)},p.arc=function(t,e,i,n,r,s){if(this.pushCommand(6,arguments),!(0>i)){if(s){var a=r;r=n,n=a}this.arcBounds(t,e,i,n,r)}},p.arcBounds=function(t,i,n,r,l){if(r=e(r),l=e(l),Math.abs(r-l)<.01)return this.extendByPoint(t-n,i-n),void this.extendByPoint(t+n,i+n);var u=0;r>l&&(u=h,l+=u);var c=Math.cos(r)*n,p=Math.cos(l)*n,d=Math.min(c,p),f=Math.max(c,p);s+u>=r&&l>=s+u&&(d=-n),u>=r&&l>=u&&(f=n);var g=Math.sin(r)*n,v=Math.sin(l)*n,m=Math.min(g,v),_=Math.max(g,v);o+u>=r&&l>=o+u&&(m=-n),a+u>=r&&l>=a+u&&(_=n),this.extendByPoint(d+t,m+i),this.extendByPoint(f+t,_+i)},p.quadraticCurveTo=function(t,e,i,n){this.pushCommand(7,arguments),this.checkMoveTo(),this.extendByPoint(t,e),this.extendByPoint(i,n)},p.bezierCurveTo=function(t,e,i,n,r,s){this.pushCommand(14,arguments),this.checkMoveTo(),this.extendByPoint(t,e),this.extendByPoint(i,n),this.extendByPoint(r,s)},p.lineTo=function(t,e){this.pushCommand(8,arguments),this.checkMoveTo(),this.extendByPoint(t,e)},p.fill=function(){this.pushCommand(9,arguments),this.hasFill=!0},p.closePath=function(){this.pushCommand(10,arguments)},p.rect=function(t,e,i,n){this.pushCommand(11,arguments),this.extendByPoint(t,e),this.extendByPoint(t+i,e+n)},p.moveTo=function(t,e){this.pushCommand(12,arguments),this.moveToX=t,this.moveToY=e,this.hasMoved=!0},p.fillRect=function(t,e,i,n){this.pushCommand(13,arguments),this.extendByPoint(t,e),this.extendByPoint(t+i,e+n),this.hasFill=!0},p.stroke=function(){this.pushCommand(15,arguments),this.hasStroke=!0},p.strokeRect=function(t,e,i,n){this.pushCommand(16,arguments),this.hasStroke=!0,this.extendByPoint(t,e),this.extendByPoint(t+i,e+n)},p.beginPath=function(){this.pushCommand(17,arguments),this.hasMoved=!1,this.moveToX=0/0,this.moveToY=0/0},p.arcTo=function(t,r,a,o,h){if(this.pushCommand(18,arguments),!isNaN(this.moveToX)){this.checkMoveTo(),n(this.moveToX,this.moveToY,t,r,u),n(a,o,t,r,c),l.x=u.x+c.x,l.y=u.y+c.y,n(l.x,l.y,0,0,l);var p=u.x*l.x+u.y*l.y,d=i(u.x,u.y,0,0),f=i(l.x,l.y,0,0),g=p/(d*f),v=Math.acos(g),m=h/Math.sin(v),_=t+l.x*m,$=r+l.y*m,y=h/Math.tan(v),x=t+u.x*y,T=r+u.y*y,E=t+c.x*y,b=r+c.y*y;n(_,$,x,T,l);var w=Math.atan2(l.y,l.x);n(_,$,E,b,l);var C=Math.atan2(l.y,l.x),S=C-w;if(S=e(S),S>s){var F=C;C=w,w=F}this.arcBounds(_,$,h,w,C)}},p.clear=function(){this.reset(),this.$commands.length=0,this.$targetDisplay.$invalidateContentBounds()},p.reset=function(){this._fillStyle=null,this._lineCap="butt",this._lineJoin="miter",this._lineWidth=1,this._miterLimit=10,this._strokeStyle=null,this.hasMoved=!1,this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.isFirst=!0,this.moveToX=0/0,this.moveToY=0/0,this.hasStroke=!1,this.hasFill=!1},p.pushCommand=function(t,e){this.$commands.push({type:t,arguments:e}),this.$targetDisplay.$invalidateContentBounds()},p.checkMoveTo=function(){this.hasMoved&&(this.hasMoved=!1,this.extendByPoint(this.moveToX,this.moveToY))},p.extendByPoint=function(t,e){this.isFirst?(this.isFirst=!1,this.maxX=this.minX=t,this.maxY=this.minY=e):(this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,e),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,e))},p.$measureContentBounds=function(t){if(!this.hasFill&&!this.hasStroke)return void t.setEmpty();if(this.hasStroke)var e=this._lineWidth,i=.5*e;else i=e=0;t.setTo(this.minX-i,this.minY-i,this.maxX-this.minX+e,this.maxY-this.minY+e)},p.$render=function(t,e){t.save(),t.fillStyle="#000000",t.lineCap="butt",t.lineJoin="miter",t.lineWidth=1,t.miterLimit=10,t.strokeStyle="#000000",t.beginPath();var i=t.graphicsMap;i||(i=r(t));var n=this.$commands,s=n.length;if(e)for(var a=0;s>a;a++){var o=n[a];5==o.type||4==o.type?i[o.type].apply(t,["rgba(1,1,1,1)"]):i[o.type].apply(t,o.arguments)}else for(var a=0;s>a;a++){var o=n[a];i[o.type].apply(t,o.arguments)}t.restore()},f}(t.HashObject);t.GraphicsRenderContext=d,t.registerClass(d,"egret.GraphicsRenderContext")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){e.call(this,t,i,n)}__extends(i,e);var n=i;return p=n.prototype,p.updateAfterEvent=function(){t.sys.$requestRenderingFlag=!0},i.emitTimerEvent=function(e,n,r,s){var a=t.Event.create(i,n,r,s),o=e.dispatchEvent(a);return t.Event.release(a),o},i.TIMER="timer",i.TIMER_COMPLETE="timerComplete",i}(t.Event);t.TimerEvent=e,t.registerClass(e,"egret.TimerEvent")}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t,e){var i=t.minX<e.minX?t.minX:e.minX,n=t.minY<e.minY?t.minY:e.minY,r=t.maxX>e.maxX?t.maxX:e.maxX,s=t.maxY>e.maxY?t.maxY:e.maxY;return(r-i)*(s-n)}var n=function(){function n(){this.dirtyList=[],this.hasClipRect=!1,this.clipWidth=0,this.clipHeight=0,this.clipArea=0,this.clipRectChanged=!1}var r=n;return p=r.prototype,p.setClipRect=function(t,e){this.hasClipRect=!0,this.clipRectChanged=!0,this.clipWidth=Math.ceil(t),this.clipHeight=Math.ceil(e),this.clipArea=this.clipWidth*this.clipHeight},p.addRegion=function(t){var i=t.minX,n=t.minY,r=t.maxX,s=t.maxY;if(this.hasClipRect&&(0>i&&(i=0),0>n&&(n=0),r>this.clipWidth&&(r=this.clipWidth),s>this.clipHeight&&(s=this.clipHeight)),i>=r||n>=s)return!1;if(this.clipRectChanged)return!0;var a=this.dirtyList,o=e.Region.create();return a.push(o.setTo(i,n,r,s)),this.mergeDirtyList(a),!0},p.clear=function(){for(var t=this.dirtyList,i=t.length,n=0;i>n;n++)e.Region.release(t[n]);t.length=0},p.getDirtyRegions=function(){var i=this.dirtyList;if(this.clipRectChanged){t.MainContext.runtimeType!=t.MainContext.RUNTIME_NATIVE&&(this.clipRectChanged=!1),this.clear();var n=e.Region.create();i.push(n.setTo(0,0,this.clipWidth,this.clipHeight))}else for(;this.mergeDirtyList(i););return this.dirtyList},p.mergeDirtyList=function(t){var n=t.length;if(2>n)return!1;for(var r=this.hasClipRect,s=n>3?Number.POSITIVE_INFINITY:0,a=0,o=0,h=0,l=0;n-1>l;l++){var u=t[l];r&&(h+=u.area);for(var c=l+1;n>c;c++){var p=t[c],d=i(u,p)-u.area-p.area;s>d&&(a=l,o=c,s=d)}}if(r&&h/this.clipArea>.95&&(this.clipRectChanged=!0),a!=o){var f=t[o];return t[a].union(f),e.Region.release(f),t.splice(o,1),!0}return!1},n}();e.DirtyRegion=n,t.registerClass(n,"egret.sys.DirtyRegion")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){}var e=t;return p=e.prototype,t.AUTO="auto",t.PORTRAIT="portrait",t.LANDSCAPE="landscape",t.LANDSCAPE_FLIPPED="landscapeFlipped",t}();e.OrientationMode=i,t.registerClass(i,"egret.sys.OrientationMode")}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){e.screenAdapter;var i=function(e){function i(){e.call(this)}__extends(i,e);var n=i;return p=n.prototype,p.calculateStageSize=function(e,i,n,r,s){var a=i,o=n,h=r,l=s,u=i/h||0,c=n/l||0;switch(e){case t.StageScaleMode.EXACT_FIT:break;case t.StageScaleMode.FIXED_HEIGHT:h=Math.round(i/c);break;case t.StageScaleMode.FIXED_WIDTH:l=Math.round(n/u);break;case t.StageScaleMode.NO_BORDER:u>c?o=Math.round(l*u):a=Math.round(h*c);break;case t.StageScaleMode.SHOW_ALL:u>c?a=Math.round(h*c):o=Math.round(l*u);break;default:h=i,l=n}return{stageWidth:h,stageHeight:l,displayWidth:a,displayHeight:o}},i}(t.HashObject);e.ScreenAdapter=i,t.registerClass(i,"egret.sys.ScreenAdapter",["egret.sys.IScreenAdapter"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.NO_SCALE="noScale",t.SHOW_ALL="showAll",t.NO_BORDER="noBorder",t.EXACT_FIT="exactFit",t.FIXED_WIDTH="fixedWidth",t.FIXED_HEIGHT="fixedHeight",t}();t.StageScaleMode=e,t.registerClass(e,"egret.StageScaleMode")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(){t.call(this),this.stage=null}__extends(e,t);var i=__define,n=e;return p=n.prototype,p.run=function(){},i(e,"instance",function(){return null==e._instance&&(e._instance=new e),e._instance}),e.deviceType=null,e.DEVICE_PC="web",e.DEVICE_MOBILE="native",e.RUNTIME_HTML5="runtimeHtml5",e.RUNTIME_NATIVE="runtimeNative",e}(t.EventDispatcher);t.MainContext=e,t.registerClass(e,"egret.MainContext")}(egret||(egret={}));var testDeviceType=function(){if(!this.navigator)return!0;var t=navigator.userAgent.toLowerCase();return-1!=t.indexOf("mobile")||-1!=t.indexOf("android")},testRuntimeType=function(){return this.navigator?!0:!1};egret.MainContext.deviceType=testDeviceType()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,egret.MainContext.runtimeType=testRuntimeType()?egret.MainContext.RUNTIME_HTML5:egret.MainContext.RUNTIME_NATIVE,delete testDeviceType,delete testRuntimeType;var egret;!function(t){var e;!function(e){var i=function(i){function n(){i.call(this),this._isNeedShow=!1,this.inputElement=null,this.inputDiv=null,this._gscaleX=0,this._gscaleY=0,this._isNeesHide=!1,this.textValue="",this._styleInfoes={}}__extends(n,i);var r=n;return p=r.prototype,p.$setTextField=function(t){this.$textfield=t},p.$addToStage=function(){this.htmlInput=t.web.$getTextAdapter(this.$textfield)},p._initElement=function(){var t=this.$textfield.localToGlobal(0,0),e=t.x,i=t.y,n=this.$textfield.$renderMatrix.a,r=this.$textfield.$renderMatrix.d,s=this.htmlInput.$scaleX,a=this.htmlInput.$scaleY;this.inputDiv.style.left=e*s+"px",this.inputDiv.style.top=i*a+"px",this.$textfield.multiline?(this.inputDiv.style.top=i*a+"px",this.inputElement.style.top=-this.$textfield.lineSpacing/2+"px"):(this.inputDiv.style.top=i*a+"px",this.inputElement.style.top="0px"),this._gscaleX=s*n,this._gscaleY=a*r},p.$show=function(){this.htmlInput.isCurrentStageText(this)?this.inputElement.onblur=null:(this.inputElement=this.htmlInput.getInputElement(this),this.inputDiv=this.htmlInput._inputDIV),this.htmlInput._needShow=!0,this._isNeedShow=!0,this._initElement()},p.onBlurHandler=function(){this.htmlInput.clearInputElement(),window.scrollTo(0,0)},p.executeShow=function(){this.inputElement.value=this.$getText(),null==this.inputElement.onblur&&(this.inputElement.onblur=this.onBlurHandler.bind(this)),this.$resetStageText(),this.$textfield.maxChars>0?this.inputElement.setAttribute("maxlength",this.$textfield.maxChars):this.inputElement.removeAttribute("maxlength"),this.inputElement.selectionStart=this.inputElement.value.length,this.inputElement.selectionEnd=this.inputElement.value.length,this.inputElement.focus()},p.$hide=function(){this._isNeesHide=!0,this.htmlInput&&t.web.Html5Capatibility._System_OS==t.web.SystemOSType.IOS&&this.htmlInput.disconnectStageText(this)},p.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},p.$setText=function(t){this.textValue=t,this.resetText()},p.resetText=function(){this.inputElement&&(this.inputElement.value=this.textValue)},p.$onBlur=function(){e.Html5Capatibility._System_OS==e.SystemOSType.WPHONE&&t.Event.dispatchEvent(this,"updateText",!1)},p._onInput=function(){var i=this;if(e.Html5Capatibility._System_OS==e.SystemOSType.WPHONE){var n=this.$textfield.$TextField;null==n[35]&&null==n[36]&&(i.textValue=i.inputElement.value,t.Event.dispatchEvent(i,"updateText",!1))}else i.inputElement.selectionStart==i.inputElement.selectionEnd&&(i.textValue=i.inputElement.value,t.Event.dispatchEvent(i,"updateText",!1))},p.setAreaHeight=function(){var e=this.$textfield;if(e.multiline){var i=t.TextFieldUtils._getTextHeight(e);if(e.height<i)this.setElementStyle("height",(e.height+e.lineSpacing)*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",(i+e.lineSpacing)*this._gscaleY+"px");var n=(e.height-i)*this._gscaleY,r=t.TextFieldUtils._getValign(e),s=n*r,a=n-s;this.setElementStyle("padding",s+"px 0px "+a+"px 0px")}this.setElementStyle("lineHeight",(e.size+e.lineSpacing)*this._gscaleY+"px")}},p._onClickHandler=function(e){this._isNeedShow&&(e.stopImmediatePropagation(),this._isNeedShow=!1,this.executeShow(),this.dispatchEvent(new t.Event("focus")))},p._onDisconnect=function(){this.inputElement=null,this.dispatchEvent(new t.Event("blur"))},p.setElementStyle=function(t,e){this.inputElement&&this._styleInfoes[t]!=e&&(this.inputElement.style[t]=e)},p.$removeFromStage=function(){this.inputElement&&this.htmlInput.disconnectStageText(this)},p.$resetStageText=function(){if(this.inputElement){var e=this.$textfield;if(this.setElementStyle("fontFamily",e.fontFamily),this.setElementStyle("fontStyle",e.italic?"italic":"normal"),this.setElementStyle("fontWeight",e.bold?"bold":"normal"),this.setElementStyle("textAlign",e.textAlign),this.setElementStyle("fontSize",e.size*this._gscaleY+"px"),this.setElementStyle("color",t.sys.toColorString(e.textColor)),this.setElementStyle("width",e.width*this._gscaleX+"px"),this.setElementStyle("verticalAlign",e.verticalAlign),e.multiline)this.setAreaHeight();else if(this.setElementStyle("lineHeight",e.size*this._gscaleY+"px"),e.height<e.size)this.setElementStyle("height",e.height*this._gscaleY+"px"),this.setElementStyle("padding","0px");else{this.setElementStyle("height",e.size*this._gscaleY+"px");var i=(e.height-e.size)*this._gscaleY,n=t.TextFieldUtils._getValign(e),r=i*n,s=i-r;this.setElementStyle("padding",r+"px 0px "+s+"px 0px")}this.inputDiv.style.clip="rect(0px "+e.width*this._gscaleX+"px "+e.height*this._gscaleY+"px 0px)",this.inputDiv.style.height=e.height*this._gscaleY+"px",this.inputDiv.style.width=e.width*this._gscaleX+"px"}},n}(t.EventDispatcher);e.HTML5StageText=i,t.registerClass(i,"egret.web.HTML5StageText",["egret.StageText"]),t.StageText=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function e(){this._needShow=!1,this.$scaleX=1,this.$scaleY=1}var i=e;return p=i.prototype,p.isInputOn=function(){return null!=this._stageText},p.isCurrentStageText=function(t){return this._stageText==t},p.initValue=function(t){t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.border="none",t.style.padding="0"},p.$updateSize=function(){var e=this.canvas.width,i=this.canvas.height,n=this.canvas.style.width.split("px")[0],r=this.canvas.style.height.split("px")[0];this.$scaleX=n/e,this.$scaleY=r/i,this.StageDelegateDiv.style.left=this.canvas.style.left,this.StageDelegateDiv.style.top=this.canvas.style.top;var s=t.web.getPrefixStyleName("transform");this.StageDelegateDiv.style[s]=this.canvas.style[s],this.StageDelegateDiv.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px"},p._initStageDelegateDiv=function(e,i){this.canvas=i;var n,r=this;n||(n=document.createElement("div"),this.StageDelegateDiv=n,n.id="StageDelegateDiv",e.appendChild(n),r.initValue(n),r._inputDIV=document.createElement("div"),r.initValue(r._inputDIV),r._inputDIV.style.width="0px",r._inputDIV.style.height="0px",r._inputDIV.style.left="0px",r._inputDIV.style.top="-100px",r._inputDIV.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",n.appendChild(r._inputDIV),this.canvas.addEventListener("click",function(t){r._needShow?(r._needShow=!1,r._stageText._onClickHandler(t),r.show()):r._inputElement&&(r.clearInputElement(),r._inputElement.blur(),r._inputElement=null)}),r.initInputElement(!0),r.initInputElement(!1))},p.initInputElement=function(t){var e,i=this;t?(e=document.createElement("textarea"),e.style.resize="none",i._multiElement=e,e.id="egretTextarea"):(e=document.createElement("input"),i._simpleElement=e,e.id="egretInput"),e.type="text",i._inputDIV.appendChild(e),e.setAttribute("tabindex","-1"),e.style.width="1px",e.style.height="12px",i.initValue(e),e.style.outline="thin",e.style.background="none",e.style.overflow="hidden",e.style.wordBreak="break-all",e.style.opacity=0,e.oninput=function(){i._stageText&&i._stageText._onInput()}},p.show=function(){var e=this,i=e._inputElement;t.$callAsync(function(){i.style.opacity=1},e)},p.disconnectStageText=function(t){(null==this._stageText||this._stageText==t)&&(this.clearInputElement(),this._inputElement&&this._inputElement.blur())},p.clearInputElement=function(){var t=this;if(t._inputElement){t._inputElement.value="",t._inputElement.onblur=null,t._inputElement.style.width="1px",t._inputElement.style.height="12px",t._inputElement.style.left="0px",t._inputElement.style.top="0px",t._inputElement.style.opacity=0;var e;e=t._simpleElement==t._inputElement?t._multiElement:t._simpleElement,e.style.display="block",t._inputDIV.style.left="0px",t._inputDIV.style.top="-100px",t._inputDIV.style.height="0px",t._inputDIV.style.width="0px"}t._stageText&&(t._stageText._onDisconnect(),t._stageText=null,this.canvas.userTyping=!1)},p.getInputElement=function(t){var e=this;e.clearInputElement(),e._stageText=t,this.canvas.userTyping=!0,e._inputElement=e._stageText.$textfield.multiline?e._multiElement:e._simpleElement;var i;return i=e._simpleElement==e._inputElement?e._multiElement:e._simpleElement,i.style.display="none",e._inputElement},e}();e.HTMLInput=i,t.registerClass(i,"egret.web.HTMLInput")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(t){function e(t){var e=t.stage?t.stage.$hashCode:0;return n[e]}function i(t,e,i,r){t._initStageDelegateDiv(i,r),n[e.$hashCode]=t}var n={};t.$getTextAdapter=e,t.$cacheTextAdapter=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){e.call(this),this._target=null,this._useTicks=!1,this.ignoreGlobalPause=!1,this.loop=!1,this.pluginData=null,this._steps=null,this._actions=null,this.paused=!1,this.duration=0,this._prevPos=-1,this.position=null,this._prevPosition=0,this._stepPosition=0,this.passive=!1,this.initialize(t,i,n)}__extends(i,e);var n=i;return p=n.prototype,i.get=function(t,e,n,r){return void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=!1),r&&i.removeTweens(t),new i(t,e,n)},i.removeTweens=function(t){if(t.tween_count){for(var e=i._tweens,n=e.length-1;n>=0;n--)e[n]._target==t&&(e[n].paused=!0,e.splice(n,1));t.tween_count=0}},i.pauseTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;n>=0;n--)i[n]._target==e&&(i[n].paused=!0)},i.resumeTweens=function(e){if(e.tween_count)for(var i=t.Tween._tweens,n=i.length-1;n>=0;n--)i[n]._target==e&&(i[n].paused=!1)},i.tick=function(t,e){void 0===e&&(e=!1);var n=t-i._lastTime;i._lastTime=t;for(var r=i._tweens.concat(),s=r.length-1;s>=0;s--){var a=r[s];e&&!a.ignoreGlobalPause||a.paused||a.tick(a._useTicks?1:n)}},i._register=function(e,n){var r=e._target,s=i._tweens;if(n)r&&(r.tween_count=r.tween_count>0?r.tween_count+1:1),s.push(e),i._inited||(i._lastTime=t.getTimer(),t.sys.$ticker.$startTick(i.tick,null),i._inited=!0);else{r&&r.tween_count--;for(var a=s.length;a--;)if(s[a]==e)return void s.splice(a,1)}},i.removeAllTweens=function(){for(var t=i._tweens,e=0,n=t.length;n>e;e++){var r=t[e];r.paused=!0,r._target.tweenjs_count=0}t.length=0},p.initialize=function(t,e,n){this._target=t,e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,e.onChange&&this.addEventListener("change",e.onChange,e.onChangeObj),e.override&&i.removeTweens(t)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],e&&e.paused?this.paused=!0:i._register(this,!0),e&&null!=e.position&&this.setPosition(e.position,i.NONE)},p.setPosition=function(t,e){void 0===e&&(e=1),0>t&&(t=0);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);
else if(this._steps.length>0){for(var s=0,a=this._steps.length;a>s&&!(this._steps[s].t>i);s++);var o=this._steps[s-1];this._updateTargetProps(o,(this._stepPosition=i-o.t)/o.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&r>i?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),n&&this.setPaused(!0),this.dispatchEventWith("change"),n},p._runActions=function(t,e,i){void 0===i&&(i=!1);var n=t,r=e,s=-1,a=this._actions.length,o=1;for(t>e&&(n=e,r=t,s=a,a=o=-1);(s+=o)!=a;){var h=this._actions[s],l=h.t;(l==r||l>n&&r>l||i&&l==t)&&h.f.apply(h.o,h.p)}},p._updateTargetProps=function(t,e){var n,r,s,a,o,h;if(t||1!=e){if(this.passive=!!t.v,this.passive)return;t.e&&(e=t.e(e,0,1,1)),n=t.p0,r=t.p1}else this.passive=!1,n=r=this._curQueueProps;for(var l in this._initQueueProps){null==(a=n[l])&&(n[l]=a=this._initQueueProps[l]),null==(o=r[l])&&(r[l]=o=a),s=a==o||0==e||1==e||"number"!=typeof a?1==e?o:a:a+(o-a)*e;var u=!1;if(h=i._plugins[l])for(var c=0,p=h.length;p>c;c++){var d=h[c].tween(this,l,s,n,r,e,!!t&&n==r,!t);d==i.IGNORE?u=!0:s=d}u||(this._target[l]=s)}},p.setPaused=function(t){return this.paused=t,i._register(this,!t),this},p._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},p._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},p._appendQueueProps=function(e){var n,r,s,a,o;for(var h in e)if(t.isUndefined(this._initQueueProps[h])){if(r=this._target[h],n=i._plugins[h])for(s=0,a=n.length;a>s;s++)r=n[s].init(this,h,r);this._initQueueProps[h]=this._curQueueProps[h]=void 0===r?null:r}else r=this._curQueueProps[h];for(var h in e){if(r=this._curQueueProps[h],n=i._plugins[h])for(o=o||{},s=0,a=n.length;a>s;s++)n[s].step&&n[s].step(this,h,r,e[h],o);this._curQueueProps[h]=e[h]}return o&&this._appendQueueProps(o),this._curQueueProps},p._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},p._set=function(t,e){for(var i in t)e[i]=t[i]},p.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,p1:i,v:e})},p.to=function(t,e,i){return void 0===i&&(i=void 0),(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},p.call=function(t,e,i){return void 0===e&&(e=void 0),void 0===i&&(i=void 0),this._addAction({f:t,p:i?i:[],o:e?e:this._target})},p.set=function(t,e){return void 0===e&&(e=null),this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},p.play=function(t){return t||(t=this),this.call(t.setPaused,t,[!1])},p.pause=function(t){return t||(t=this),this.call(t.setPaused,t,[!0])},p.tick=function(t){this.paused||this.setPosition(this._prevPosition+t)},i.NONE=0,i.LOOP=1,i.REVERSE=2,i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(t.EventDispatcher);t.Tween=e,t.registerClass(e,"egret.Tween")}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$stopTick(e,i)}t.stopTick=e}(egret||(egret={})),void 0==window.HTMLVideoElement&&(window.HTMLVideoElement=HTMLDivElement);var egret;!function(t){var e;!function(e){function i(e){return e.hashCode=e.$hashCode=t.$hashCount++,e}var n="egret.BitmapData";t.registerClass(HTMLImageElement,n),t.registerClass(HTMLCanvasElement,n),t.registerClass(HTMLVideoElement,n),e.toBitmapData=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(t){e.call(this),this.isActivate=!0,this.stage=t,this.registerListener()}__extends(i,e);var n=i;return p=n.prototype,p.registerListener=function(){var e=this,i=function(){e.isActivate&&(e.isActivate=!1,e.stage.dispatchEvent(new t.Event(t.Event.DEACTIVATE)))},n=function(){e.isActivate||(e.isActivate=!0,e.stage.dispatchEvent(new t.Event(t.Event.ACTIVATE)))},r=function(){document[s]?i():n()};window.addEventListener("focus",n,!1),window.addEventListener("blur",i,!1);var s,a;"undefined"!=typeof document.hidden?(s="hidden",a="visibilitychange"):"undefined"!=typeof document.mozHidden?(s="mozHidden",a="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(s="msHidden",a="msvisibilitychange"):"undefined"!=typeof document.webkitHidden?(s="webkitHidden",a="webkitvisibilitychange"):"undefined"!=typeof document.oHidden&&(s="oHidden",a="ovisibilitychange"),"onpageshow"in window&&"onpagehide"in window&&(window.addEventListener("pageshow",n,!1),window.addEventListener("pagehide",i,!1)),s&&a&&document.addEventListener(a,r,!1);var o=navigator.userAgent,h=/micromessenger/gi.test(o),l=/mqq/gi.test(o),u=/mobile.*qq/gi.test(o);if((u||h)&&(l=!1),l){var c=window.browser||{};c.execWebFn=c.execWebFn||{},c.execWebFn.postX5GamePlayerMessage=function(t){var e=t.type;"app_enter_background"==e?i():"app_enter_foreground"==e&&n()},window.browser=c}},i}(t.HashObject);e.WebHideHandler=i,t.registerClass(i,"egret.web.WebHideHandler")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(i,n){var r=this;e.call(this),this.onTouchBegin=function(t){var e=r.getLocation(t);r.touch.onTouchBegin(e.x,e.y,t.identifier)},this.onTouchMove=function(t){var e=r.getLocation(t);r.touch.onTouchMove(e.x,e.y,t.identifier)},this.onTouchEnd=function(t){var e=r.getLocation(t);r.touch.onTouchEnd(e.x,e.y,t.identifier)},this.scaleX=1,this.scaleY=1,this.rotation=0,this.canvas=n,this.touch=new t.sys.TouchHandler(i),this.addListeners()}__extends(i,e);var n=i;return p=n.prototype,p.addListeners=function(){var e=this;window.navigator.msPointerEnabled?(this.canvas.addEventListener("MSPointerDown",function(t){e.onTouchBegin(t),e.prevent(t)},!1),this.canvas.addEventListener("MSPointerMove",function(t){e.onTouchMove(t),e.prevent(t)},!1),this.canvas.addEventListener("MSPointerUp",function(t){e.onTouchEnd(t),e.prevent(t)},!1)):(t.Capabilities.$isMobile||this.addMouseListener(),this.addTouchListener())},p.addMouseListener=function(){this.canvas.addEventListener("mousedown",this.onTouchBegin),this.canvas.addEventListener("mousemove",this.onTouchMove),this.canvas.addEventListener("mouseup",this.onTouchEnd)},p.addTouchListener=function(){var t=this;this.canvas.addEventListener("touchstart",function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchBegin(e.changedTouches[n]);t.prevent(e)},!1),this.canvas.addEventListener("touchmove",function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchMove(e.changedTouches[n]);t.prevent(e)},!1),this.canvas.addEventListener("touchend",function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchEnd(e.changedTouches[n]);t.prevent(e)},!1),this.canvas.addEventListener("touchcancel",function(e){for(var i=e.changedTouches.length,n=0;i>n;n++)t.onTouchEnd(e.changedTouches[n]);t.prevent(e)},!1)},p.prevent=function(t){t.stopPropagation(),1==t.isScroll||this.canvas.userTyping||t.preventDefault()},p.getLocation=function(e){e.identifier=+e.identifier||0;var i=document.documentElement,n=this.canvas.getBoundingClientRect(),r=n.left+window.pageXOffset-i.clientLeft,s=n.top+window.pageYOffset-i.clientTop,a=e.pageX-r,o=a,h=e.pageY-s,l=h;return 90==this.rotation?(o=h,l=n.width-a):-90==this.rotation&&(o=n.height-h,l=a),o/=this.scaleX,l/=this.scaleY,t.$TempPoint.setTo(Math.round(o),Math.round(l))},p.updateScaleMode=function(t,e,i){this.scaleX=t,this.scaleY=e,this.rotation=i},p.$updateMaxTouches=function(){this.touch.$setMaxTouches()},i}(t.HashObject);e.WebTouchHandler=i,t.registerClass(i,"egret.web.WebTouchHandler")}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.REPEAT="repeat",t.SCALE="scale",t}();t.BitmapFillMode=e,t.registerClass(e,"egret.BitmapFillMode")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$renderContext=null,this.strokeStyleColor=null,this.fillStyleColor=null,this._dirty=!1,this.lineX=0,this.lineY=0,this._firstCheck=!0,this._minX=0,this._minY=0,this._maxX=0,this._maxY=0,this.$renderContext=new t.GraphicsRenderContext}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"graphicsRenderContext",function(){return this.$renderContext}),p.$hitTest=function(e,i){var n=this.$renderContext.$targetDisplay,r=n.$getInvertedConcatenatedMatrix(),s=r.a*e+r.c*i+r.tx,a=r.b*e+r.d*i+r.ty,o=t.sys.sharedRenderContext;o.surface.width=o.surface.height=3,o.translate(1-s,1-a),this.$renderContext.$render(o,!0);var h=o.getImageData(1,1,1,1).data;return 0===h[3]?null:n},p.$measureContentBounds=function(t){this.$renderContext.$measureContentBounds(t)},p.$render=function(t){this.$renderContext.$render(t)},p.beginFill=function(t,e){void 0===e&&(e=1),this.fillStyleColor=this._parseColor(t,e),this._setStyle(this.fillStyleColor)},p._parseColor=function(t,e){var i=255&t,n=(65280&t)>>8,r=t>>16;return"rgba("+r+","+n+","+i+","+e+")"},p._setStyle=function(t){this.$renderContext.fillStyle=t,this.$renderContext.beginPath()},p.drawRect=function(t,e,i,n){this.$renderContext.beginPath(),this.$renderContext.rect(t,e,i,n),this.$renderContext.closePath()},p.drawCircle=function(t,e,i){this.$renderContext.beginPath(),this.$renderContext.arc(t,e,i,0,2*Math.PI),this.$renderContext.closePath()},p.drawRoundRect=function(t,e,i,n,r,s){var a=t,o=e,h=i,l=n,u=r/2,c=s?s/2:u,p=a+h,d=o+l,f=p,g=d-c;this.$renderContext.beginPath(),this.$renderContext.moveTo(f,g),this.$renderContext.quadraticCurveTo(p,d,p-u,d),this.$renderContext.lineTo(a+u,d),this.$renderContext.quadraticCurveTo(a,d,a,d-c),this.$renderContext.lineTo(a,o+c),this.$renderContext.quadraticCurveTo(a,o,a+u,o),this.$renderContext.lineTo(p-u,o),this.$renderContext.quadraticCurveTo(p,o,p,o+c),this.$renderContext.lineTo(f,g),this.$renderContext.closePath()},p.drawEllipse=function(t,e,i,n){var r=t+i/2,s=e+n/2,a=i>n?i:n,o=i/a,h=n/a;a/=2,this.$renderContext.scale(o,h),this.$renderContext.beginPath(),this.$renderContext.arc(r/o,s/h,a,0,2*Math.PI),this.$renderContext.closePath(),this.$renderContext.scale(1/o,1/h)},p.lineStyle=function(t,e,i,n,r,s,a,o){void 0===t&&(t=0/0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===n&&(n=!1),void 0===r&&(r="normal"),void 0===s&&(s=null),void 0===a&&(a=null),void 0===o&&(o=3),this.strokeStyleColor&&this._createEndLineCommand(),this.strokeStyleColor=this._parseColor(e,i),this.moveTo(this.lineX,this.lineY),this.$renderContext.lineWidth=t,this.$renderContext.strokeStyle=this.strokeStyleColor,this.$renderContext.beginPath()},p.lineTo=function(t,e){this.lineX=t,this.lineY=e,this.$renderContext.lineTo(t,e)},p.curveTo=function(t,e,i,n){this.lineX=i,this.lineY=n,this.$renderContext.quadraticCurveTo(t,e,i,n)},p.drawArc=function(t,e,i,n,r,s){this.lineX=Math.cos(r)+t,this.lineY=Math.sin(r)+e,this.$renderContext.arc(t,e,i,n,r,s)},p.cubicCurveTo=function(t,e,i,n,r,s){this.lineX=r,this.lineY=s,this.$renderContext.bezierCurveTo(t,e,i,n,r,s)},p.moveTo=function(t,e){this.lineX=t,this.lineY=e,this.$renderContext.moveTo(t,e)},p.clear=function(){this.lineX=0,this.lineY=0,this.strokeStyleColor=null,this.fillStyleColor=null,this._minX=0,this._minY=0,this._maxX=0,this._maxY=0,this._firstCheck=!0,this._dirty=!0,this.$renderContext.clear()},p.endFill=function(){(null!=this.fillStyleColor||null!=this.strokeStyleColor)&&(this._fill(),this.fillStyleColor=null)},p._createEndFillCommand=function(){this.$renderContext.fill(),this.$renderContext.closePath()},p._fill=function(){this.fillStyleColor&&this._createEndFillCommand(),this.strokeStyleColor&&this._createEndLineCommand()},p._createEndLineCommand=function(){this.$renderContext.stroke(),this.$renderContext.closePath()},i}(t.HashObject);t.Graphics=e,t.registerClass(e,"egret.Graphics")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$mcData=null,this.numFrames=1,this.frames=[],this.labels=null,this.frameRate=0,this.textureData=null,this.spriteSheet=null}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.$init=function(t,e,i){this.textureData=e,this.spriteSheet=i,this.setMCData(t)},p.getKeyFrameData=function(t){var e=this.frames[t-1];return e.frame&&(e=this.frames[e.frame-1]),e},p.getTextureByFrame=function(t){var e=this.getKeyFrameData(t);if(e.res){var i=this.getTextureByResName(e.res);return i._offsetX=0|e.x,i._offsetY=0|e.y,i}return null},p.getTextureByResName=function(t){var e=this.spriteSheet.getTexture(t);if(!e){var i=this.textureData[t];e=this.spriteSheet.createTexture(t,i.x,i.y,i.w,i.h)}return e},p.$isDataValid=function(){return this.frames.length>0},p.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},p.$fillMCData=function(t){this.frameRate=t.frameRate||24,this.fillFramesData(t.frames),this.fillFrameLabelsData(t.labels)},p.fillFramesData=function(t){for(var e,i=this.frames,n=t?t.length:0,r=0;n>r;r++){var s=t[r];if(i.push(s),s.duration){var a=parseInt(s.duration);if(a>1){e=i.length;for(var o=1;a>o;o++)i.push({frame:e})}}}this.numFrames=i.length},p.fillFrameLabelsData=function(e){if(e){var i=e.length;if(i>0){this.labels=[];for(var n=0;i>n;n++){var r=e[n];this.labels.push(new t.FrameLabel(r.name,r.frame))}}}},n(p,"mcData",function(){return this.$mcData},function(t){this.setMCData(t)}),p.setMCData=function(t){this.$mcData!=t&&(this.$mcData=t,t&&this.$fillMCData(t))},i}(t.HashObject);t.MovieClipData=e,t.registerClass(e,"egret.MovieClipData")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new t.Point(0,0),this._touchStartPosition=new t.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0}var i=e;return p=i.prototype,e}();t.ScrollViewProperties=e,t.registerClass(e,"egret.ScrollViewProperties")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),t.call(this,e,i,n)}__extends(e,t);var i=e;return p=i.prototype,e.FOCUS_IN="focusIn",e.FOCUS_OUT="focusOut",e}(t.Event);t.FocusEvent=e,t.registerClass(e,"egret.FocusEvent")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n,r,s){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===s&&(s=0),e.call(this,t,i,n),this.bytesLoaded=0,this.bytesTotal=0,this.bytesLoaded=r,this.bytesTotal=s}__extends(i,e);var n=i;return p=n.prototype,i.dispatchProgressEvent=function(e,n,r,s){void 0===r&&(r=0),void 0===s&&(s=0);var a=t.Event.create(i,n);a.bytesLoaded=r,a.bytesTotal=s;var o=e.dispatchEvent(a);return t.Event.release(a),o},i.PROGRESS="progress",i.SOCKET_DATA="socketData",i}(t.Event);t.ProgressEvent=e,t.registerClass(e,"egret.ProgressEvent")}(egret||(egret={}));var egret;!function(t){function e(t){switch(t){case r:case-s:return 0;case n:case-n:return-1;case s:case-r:return 0;default:return Math.cos(t)}}function i(t){switch(t){case r:case-s:return 1;case n:case-n:return 0;case s:case-r:return-1;default:return Math.sin(t)}}var n=Math.PI,r=n/2,s=n+r,a=2*n,o=Math.PI/180,h=[],l=function(r){function s(t,e,i,n,s,a){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===a&&(a=0),r.call(this),this.a=t,this.b=e,this.c=i,this.d=n,this.tx=s,this.ty=a}__extends(s,r);var l=s;return p=l.prototype,s.release=function(t){t&&h.push(t)},s.create=function(){var t=h.pop();return t||(t=new s),t},p.clone=function(){return new s(this.a,this.b,this.c,this.d,this.tx,this.ty)},p.concat=function(t){var e=this.a*t.a,i=0,n=0,r=this.d*t.d,s=this.tx*t.a+t.tx,a=this.ty*t.d+t.ty;(0!==this.b||0!==this.c||0!==t.b||0!==t.c)&&(e+=this.b*t.c,r+=this.c*t.b,i+=this.a*t.b+this.b*t.d,n+=this.c*t.a+this.d*t.c,s+=this.ty*t.c,a+=this.tx*t.b),this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=a},p.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},p.identity=function(){this.a=this.d=1,this.b=this.c=this.tx=this.ty=0},p.invert=function(){this.$invertInto(this)},p.$invertInto=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=this.ty;if(0==i&&0==n)return t.b=t.c=0,void(0==e||0==r?t.a=t.d=t.tx=t.ty=0:(e=t.a=1/e,r=t.d=1/r,t.tx=-e*s,t.ty=-r*a));var o=e*r-i*n;if(0==o)return void t.identity();o=1/o;var h=t.a=r*o;i=t.b=-i*o,n=t.c=-n*o,r=t.d=e*o,t.tx=-(h*s+n*a),t.ty=-(i*s+r*a)},p.rotate=function(t){if(t=+t,0!==t){var n=e(t),r=i(t),s=this.a,a=this.b,o=this.c,h=this.d,l=this.tx,u=this.ty;this.a=s*n-a*r,this.b=s*r+a*n,this.c=o*n-h*r,this.d=o*r+h*n,this.tx=l*n-u*r,this.ty=l*r+u*n}},p.scale=function(t,e){1!==t&&(this.a*=t,this.c*=t,this.tx*=t),1!==e&&(this.b*=e,this.d*=e,this.ty*=e)},p.setTo=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},p.transformPoint=function(e,i,n){var r=this.a*e+this.c*i+this.tx,s=this.b*e+this.d*i+this.ty;return n?(n.setTo(r,s),n):new t.Point(r,s)},p.translate=function(t,e){this.tx+=t,this.ty+=e},p.equals=function(t){return this.a==t.a&&this.b==t.b&&this.c==t.c&&this.d==t.d&&this.tx==t.tx&&this.ty==t.ty},p.prepend=function(t,e,i,n,r,s){var a=this.tx;if(1!=t||0!=e||0!=i||1!=n){var o=this.a,h=this.c;this.a=o*t+this.b*i,this.b=o*e+this.b*n,this.c=h*t+this.d*i,this.d=h*e+this.d*n}return this.tx=a*t+this.ty*i+r,this.ty=a*e+this.ty*n+s,this},p.append=function(t,e,i,n,r,s){var a=this.a,o=this.b,h=this.c,l=this.d;return(1!=t||0!=e||0!=i||1!=n)&&(this.a=t*a+e*h,this.b=t*o+e*l,this.c=i*a+n*h,this.d=i*o+n*l),this.tx=r*a+s*h+this.tx,this.ty=r*o+s*l+this.ty,this},p.deltaTransformPoint=function(e){var i=this,n=i.a*e.x+i.c*e.y,r=i.b*e.x+i.d*e.y;return new t.Point(n,r)},p.toString=function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"},p.createBox=function(e,i,n,r,s){void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0);var a=this;if(0!==n){n/=o;var h=t.NumberUtils.cos(n),l=t.NumberUtils.sin(n);a.a=h*e,a.b=l*i,a.c=-l*e,a.d=h*i}else a.a=e,a.b=0,a.c=0,a.d=i;a.tx=r,a.ty=s},p.createGradientBox=function(t,e,i,n,r){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=0),this.createBox(t/1638.4,e/1638.4,i,n+t/2,r+e/2)},p.$transformBounds=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,a=this.ty,o=t.x,h=t.y,l=o+t.width,u=h+t.height,c=e*o+n*h+s,p=i*o+r*h+a,d=e*l+n*h+s,f=i*l+r*h+a,g=e*l+n*u+s,v=i*l+r*u+a,m=e*o+n*u+s,_=i*o+r*u+a,$=0;c>d&&($=c,c=d,d=$),g>m&&($=g,g=m,m=$),t.x=Math.floor(g>c?c:g),t.width=Math.ceil((d>m?d:m)-t.x),p>f&&($=p,p=f,f=$),v>_&&($=v,v=_,_=$),t.y=Math.floor(v>p?p:v),t.height=Math.ceil((f>_?f:_)-t.y)},p.getDeterminant=function(){return this.a*this.d-this.b*this.c},p.$getScaleX=function(){var t=this;if(1==t.a&&0==t.b)return 1;var e=Math.sqrt(t.a*t.a+t.b*t.b);return this.getDeterminant()<0?-e:e},p.$getScaleY=function(){var t=this;if(0==t.c&&1==t.d)return 1;var e=Math.sqrt(t.c*t.c+t.d*t.d);return this.getDeterminant()<0?-e:e},p.$getSkewX=function(){return Math.atan2(this.d,this.c)-n/2},p.$getSkewY=function(){return Math.atan2(this.b,this.a)},p.$updateScaleAndRotation=function(t,n,r,s){if(!(0!=r&&r!=a||0!=s&&s!=a))return this.a=t,this.b=this.c=0,void(this.d=n);var o=e(r),h=i(r);r==s?(this.a=o*t,this.b=h*t):(this.a=e(s)*t,this.b=i(s)*t),this.c=-h*n,this.d=o*n},p.$preMultiplyInto=function(t,e){var i=t.a*this.a,n=0,r=0,s=t.d*this.d,a=t.tx*this.a+this.tx,o=t.ty*this.d+this.ty;(0!==t.b||0!==t.c||0!==this.b||0!==this.c)&&(i+=t.b*this.c,s+=t.c*this.b,n+=t.a*this.b+t.b*this.d,r+=t.c*this.a+t.d*this.c,a+=t.ty*this.c,o+=t.tx*this.b),e.a=i,e.b=n,e.c=r,e.d=s,e.tx=a,e.ty=o},s}(t.HashObject);t.Matrix=l,t.registerClass(l,"egret.Matrix"),t.$TempMatrix=new l}(egret||(egret={}));var egret;!function(t){t.Video}(egret||(egret={}));var egret_native_sound;!function(t){t.currentPath=""}(egret_native_sound||(egret_native_sound={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=this;e.call(this),this.$startTime=0,this.onPlayEnd=function(){return 1==i.$loops?(i.stop(),void i.dispatchEventWith(t.Event.SOUND_COMPLETE)):(i.$loops>0&&i.$loops--,void i.$play())},this._startTime=0}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.$play=function(){this._startTime=Date.now(),this.$type==t.Sound.MUSIC?(egret_native_sound.currentPath=this.$url,egret_native.Audio.playBackgroundMusic(this.$url,this.$loops>0)):this.$type==t.Sound.EFFECT&&(this._effectId=egret_native.Audio.playEffect(this.$url,this.$loops>0))},p.stop=function(){this.$type==t.Sound.MUSIC?this.$url==egret_native_sound.currentPath&&egret_native.Audio.stopBackgroundMusic(!1):this.$type==t.Sound.EFFECT&&this._effectId&&(egret_native.Audio.stopEffect(this._effectId),this._effectId=null),this.dispatchEventWith(t.Event.SOUND_COMPLETE)},n(p,"volume",function(){return 1},function(){}),n(p,"position",function(){return Math.floor(Date.now()-this._startTime)}),p.$destroy=function(){this.$type==t.Sound.EFFECT?egret_native.Audio.unloadEffect(this.$url):egret_native_sound.currentPath==this.$url&&egret_native.Audio.stopBackgroundMusic(!0)},i}(t.EventDispatcher);e.NativeSoundChannel=i,t.registerClass(i,"egret.native.NativeSoundChannel",["egret.SoundChannel","egret.IEventDispatcher"])}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){t.ImageLoader}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.call(this),this._url=""}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"response",function(){return this._xhr?this._xhr.response?this._xhr.response:this._xhr.responseXML?this._xhr.responseXML:this._xhr.responseText?this._xhr.responseText:null:null}),n(p,"responseType",function(){return this._responseType},function(t){this._responseType=t}),n(p,"withCredentials",function(){return this._withCredentials},function(t){this._withCredentials=t}),p.getXHR=function(){return window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP")},p.open=function(t,e){void 0===e&&(e="GET"),this._url=t,this._xhr&&(this._xhr.abort(),this._xhr=null),this._xhr=this.getXHR(),this._xhr.onreadystatechange=this.onReadyStateChange.bind(this),this._xhr.onprogress=this.updateProgress.bind(this),null!=this._responseType&&(this._xhr.responseType=this.responseType),null!=this._withCredentials&&(this._xhr.withCredentials=this._withCredentials),null!=this.header&&this._xhr.setRequestHeader(this.header,this.headerValue),this._xhr.open(e,t,!0)},p.send=function(t){this._xhr.send(t)},p.abort=function(){this._xhr&&this._xhr.abort()},p.getAllResponseHeaders=function(){if(!this._xhr)return null;var t=this._xhr.getAllResponseHeaders();return t?t:""},p.setRequestHeader=function(t,e){this.header=t,this.headerValue=e},p.getResponseHeader=function(t){if(!this._xhr)return null;var e=this._xhr.getResponseHeader(t);return e?e:""},p.onReadyStateChange=function(){var e=this._xhr;if(4==e.readyState){var i=e.status>=400||0==e.status,n=(this._url,this);window.setTimeout(function(){n.dispatchEventWith(i?t.IOErrorEvent.IO_ERROR:t.Event.COMPLETE)},0)}},p.updateProgress=function(e){e.lengthComputable&&t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.PROGRESS,e.loaded,e.total)},i}(t.EventDispatcher);e.WebHttpRequest=i,t.registerClass(i,"egret.web.WebHttpRequest",["egret.HttpRequest"]),t.HttpRequest=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=[],n=["source-over","lighter","destination-out"],r="source-over",s=function(s){function a(i){s.call(this),this.$isDirty=!1,this.$renderAlpha=1,this.$renderMatrix=new t.Matrix,this.$ratioMatrix=new t.Matrix,this.$ratioChanged=!1,this.$pixelRatio=1,this.$renderRegion=new e.Region,this.surface=null,this.offsetX=0,this.offsetY=0,this.needRedraw=!1,this.rootMatrix=new t.Matrix,this.dirtyNodes={},this.dirtyNodeList=[],this.dirtyList=null,this.dirtyRegion=new e.DirtyRegion,this.sizeChanged=!1,this.root=i}__extends(a,s);var o=a;return p=o.prototype,a.release=function(n){e.surfaceFactory.release(n.surface),t.Matrix.release(n.$renderMatrix),t.Matrix.release(n.$ratioMatrix),n.surface=null,n.renderContext=null,n.root=null,n.$renderMatrix=null,n.$ratioMatrix=null,n.needRedraw=!1,n.$isDirty=!1,i.push(n)},a.create=function(n){var r=i.pop();r||(r=new t.sys.DisplayList(n));var s=e.surfaceFactory.create();return s?(r.surface=s,r.renderContext=s.renderContext,r.root=n,r.$renderMatrix=t.Matrix.create(),r.$renderMatrix.setTo(1,0,0,1,0,0),r.$pixelRatio=1,r.$ratioMatrix=t.Matrix.create(),r.$ratioMatrix.setTo(1,0,0,1,0,0),r.needRedraw=!0,r.$isDirty=!0,r):null},p.$update=function(){var t=this.root;if(null==t)return!1;t.$removeFlagsUp(768),this.$renderAlpha=t.$getConcatenatedAlpha();var e=t.$getConcatenatedMatrix(),i=t.$getOriginalBounds(),n=t.$parentDisplayList,r=1;n?r=n.$pixelRatio:t.stage&&t.stage.$displayList&&(r=t.stage.$displayList.$pixelRatio),this.setDevicePixelRatio(r);var s=this.$renderRegion;if(this.needRedraw&&this.updateDirtyRegions(),!n)return s.setTo(0,0,0,0),s.moved=!1,!1;if(!s.moved&&!n.$ratioChanged)return!1;s.moved=!1;var a=this.$renderMatrix;a.copyFrom(e);var o=n.root;return o!==t.$stage&&t.$getConcatenatedMatrixAt(o,a),this.$ratioMatrix.$preMultiplyInto(a,a),s.updateRegion(i,a),!0},p.$render=function(t){var e=this.surface;e&&t.drawImage(e,this.offsetX,this.offsetY,e.width/this.$pixelRatio,e.height/this.$pixelRatio)},p.setClipRect=function(t,e){t*=this.$pixelRatio,e*=this.$pixelRatio,this.dirtyRegion.setClipRect(t,e),this.rootMatrix=null;var i=this.renderContext.surface;i.width=t,i.height=e,this.surface=i},p.markDirty=function(t){var e=t.$hashCode;if(!this.dirtyNodes[e]&&(this.dirtyNodes[e]=!0,this.dirtyNodeList.push(t),!this.needRedraw)){this.needRedraw=!0;var i=this.root.$parentDisplayList;i&&i.markDirty(this)}},p.updateDirtyRegions=function(){var t=this.dirtyNodeList;this.dirtyNodeList=[],this.dirtyNodes={};for(var e=this.dirtyRegion,i=t.length,n=0;i>n;n++){var r=t[n],s=r.$renderRegion;r.$renderAlpha>0&&e.addRegion(s)&&(r.$isDirty=!0);var a=r.$update();r.$renderAlpha>0&&(a||!r.$isDirty)&&e.addRegion(s)&&(r.$isDirty=!0)}return this.dirtyList=e.getDirtyRegions(),this.dirtyList},p.drawToSurface=function(){var t=this.rootMatrix;t&&this.changeSurfaceSize();var e=this.renderContext;e.save(),e.beginPath(),t&&e.setTransform(1,0,0,1,-this.offsetX*this.$pixelRatio,-this.offsetY*this.$pixelRatio);var i=this.dirtyList;this.dirtyList=null;for(var n=i.length,r=0;n>r;r++){var s=i[r];e.clearRect(s.minX,s.minY,s.width,s.height),e.rect(s.minX,s.minY,s.width,s.height)}e.clip(),t&&e.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty);var a=this.drawDisplayObject(this.root,e,i,t,null,null);return e.restore(),this.dirtyRegion.clear(),this.needRedraw=!1,this.$ratioChanged=!1,a},p.drawDisplayObject=function(t,e,i,n,r,s){var a,o,h=0;if(r?(r.needRedraw&&(h+=r.drawToSurface()),a=r,o=1):t.$renderRegion&&(a=t,o=t.$renderAlpha),a){var l=a.$renderRegion;if(s&&!s.intersects(l))a.$isDirty=!1;else if(!a.$isDirty)for(var u=i.length,c=0;u>c;c++)if(l.intersects(i[c])){a.$isDirty=!0;break}if(a.$isDirty){h++,e.globalAlpha=o;var p=a.$renderMatrix;n?(e.transform(p.a,p.b,p.c,p.d,p.tx,p.ty),a.$render(e),e.setTransform(n.a,n.b,n.c,n.d,n.tx*this.$pixelRatio,n.ty*this.$pixelRatio)):(e.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty),a.$render(e)),a.$isDirty=!1}}if(r)return h;var d=t.$children;if(d)for(var f=d.length,g=0;f>g;g++){var v=d[g];!v.$visible||v.$alpha<=0||v.$maskedObject||(h+=0!==v.$blendMode||v.$mask&&v.$mask.$parentDisplayList?this.drawWithClip(v,e,i,n,s):v.$scrollRect||v.$maskRect?this.drawWithScrollRect(v,e,i,n,s):this.drawDisplayObject(v,e,i,n,v.$displayList,s))}return h},p.drawWithClip=function(i,s,a,o,h){var l=0,u=0!==i.$blendMode;if(u){var c=n[i.$blendMode];c||(c=r)}var p=i.$scrollRect?i.$scrollRect:i.$maskRect,d=i.$mask;d&&!d.$parentDisplayList&&(d=null);var f,g=t.Matrix.create();g.copyFrom(i.$getConcatenatedMatrix());var v,m=i.$parentDisplayList.root;if(m!==i.$stage&&(v=m.$getInvertedConcatenatedMatrix(),v.$preMultiplyInto(g,g)),this.$ratioMatrix.$preMultiplyInto(g,g),d){var _=d.$getOriginalBounds();f=e.Region.create();var $=t.Matrix.create();$.copyFrom(d.$getConcatenatedMatrix()),v&&v.$preMultiplyInto($,$),this.$ratioMatrix.$preMultiplyInto($,$),f.updateRegion(_,$),t.Matrix.release($)}var y;if(p&&(y=e.Region.create(),y.updateRegion(p,g)),y&&f?(y.intersect(f),e.Region.release(f)):!y&&f&&(y=f),y){if(y.isEmpty()||h&&!h.intersects(y))return e.Region.release(y),t.Matrix.release(g),l}else y=e.Region.create(),_=i.$getOriginalBounds(),y.updateRegion(_,g);for(var x=!1,T=a.length,E=0;T>E;E++)if(y.intersects(a[E])){x=!0;break}if(!x)return e.Region.release(y),t.Matrix.release(g),l;var b=this.createRenderContext(y.width,y.height);if(!b)return l+=this.drawDisplayObject(i,s,a,o,i.$displayList,h),e.Region.release(y),t.Matrix.release(g),l;if(p){var $=g;b.setTransform($.a,$.b,$.c,$.d,$.tx-y.minX,$.ty-y.minY),b.beginPath(),b.rect(p.x,p.y,p.width,p.height),b.clip()}b.setTransform(1,0,0,1,-y.minX,-y.minY);var w=t.Matrix.create().setTo(1,0,0,1,-y.minX,-y.minY);if(l+=this.drawDisplayObject(i,b,a,w,i.$displayList,y),t.Matrix.release(w),d){var C=this.createRenderContext(y.width,y.height);if(!C)return l+=this.drawDisplayObject(i,s,a,o,i.$displayList,h),e.surfaceFactory.release(b.surface),e.Region.release(y),t.Matrix.release(g),l;C.setTransform(1,0,0,1,-y.minX,-y.minY),w=t.Matrix.create().setTo(1,0,0,1,-y.minX,-y.minY);var S=this.drawDisplayObject(d,C,a,w,d.$displayList,y);t.Matrix.release(w),S>0&&(l+=S,b.globalCompositeOperation="destination-in",b.setTransform(1,0,0,1,0,0),b.globalAlpha=1,b.drawImage(C.surface,0,0)),e.surfaceFactory.release(C.surface)}return l>0&&(l++,u&&(s.globalCompositeOperation=c),o?(s.translate(y.minX,y.minY),s.drawImage(b.surface,0,0),s.setTransform(o.a,o.b,o.c,o.d,o.tx*this.$pixelRatio,o.ty*this.$pixelRatio)):(s.setTransform(1,0,0,1,y.minX,y.minY),s.drawImage(b.surface,0,0)),u&&(s.globalCompositeOperation=r)),e.surfaceFactory.release(b.surface),e.Region.release(y),t.Matrix.release(g),l},p.drawWithScrollRect=function(i,n,r,s,a){var o=0,h=i.$scrollRect?i.$scrollRect:i.$maskRect,l=t.Matrix.create();l.copyFrom(i.$getConcatenatedMatrix());var u=i.$parentDisplayList.root;u!==i.$stage&&u.$getInvertedConcatenatedMatrix().$preMultiplyInto(l,l),this.$ratioMatrix.$preMultiplyInto(l,l);var c=e.Region.create();if(h.isEmpty()||c.updateRegion(h,l),c.isEmpty()||a&&!a.intersects(c))return e.Region.release(c),t.Matrix.release(l),o;for(var p=!1,d=r.length,f=0;d>f;f++)if(c.intersects(r[f])){p=!0;break}return p?(n.save(),s?(n.setTransform(s.a,s.b,s.c,s.d,s.tx*this.$pixelRatio,s.ty*this.$pixelRatio),n.transform(l.a,l.b,l.c,l.d,l.tx,l.ty)):n.setTransform(l.a,l.b,l.c,l.d,l.tx,l.ty),n.beginPath(),n.rect(h.x,h.y,h.width,h.height),n.clip(),s&&n.setTransform(s.a,s.b,s.c,s.d,s.tx*this.$pixelRatio,s.ty*this.$pixelRatio),o+=this.drawDisplayObject(i,n,r,s,i.$displayList,c),n.restore(),e.Region.release(c),t.Matrix.release(l),o):(e.Region.release(c),t.Matrix.release(l),o)},p.createRenderContext=function(i,n){var r=e.surfaceFactory.create(!0);return r?(t.MainContext.runtimeType==t.MainContext.RUNTIME_HTML5?(r.width=Math.max(257,i),r.height=Math.max(257,n)):(r.width=i,r.height=n),r.renderContext):null},p.changeSurfaceSize=function(){var t=(this.root,this.offsetX),i=this.offsetY,n=this.root.$getOriginalBounds(),r=this.$pixelRatio,s=this.$pixelRatio;this.offsetX=n.x,this.offsetY=n.y;var a=this.renderContext,o=a.surface;if(this.sizeChanged){var h=e.sharedRenderContext,l=h.surface;e.sharedRenderContext=a,this.renderContext=h,this.surface=l,l.width=n.width*r,l.height=n.height*s,0!==o.width&&0!==o.height&&(h.setTransform(1,0,0,1,0,0),h.drawImage(o,(t-this.offsetX)*r,(i-this.offsetY)*s)),o.height=1,o.width=1}else this.sizeChanged=!0,o.width=n.width*r,o.height=n.height*s;this.rootMatrix.setTo(1,0,0,1,-this.offsetX,-this.offsetY),this.renderContext.setTransform(1,0,0,1,-n.x,-n.y)},p.setDevicePixelRatio=function(e){void 0===e&&(e=1),this.$pixelRatio==e&&this.$ratioMatrix||(this.$ratioMatrix||(this.$ratioMatrix=t.Matrix.create()),this.$ratioChanged=!0,this.$pixelRatio=e,this.$ratioMatrix.setTo(e,0,0,e,0,0),this.root.$invalidate(!0))
},a}(t.HashObject);e.DisplayList=s,t.registerClass(s,"egret.sys.DisplayList",["egret.sys.Renderable"])}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i){e.call(this,t),this.firstCharHeight=0,this.charList="string"==typeof i?this.parseConfig(i):i&&i.hasOwnProperty("frames")?i.frames:{}}__extends(i,e);var n=i;return p=n.prototype,p.getTexture=function(t){var e=this._textureMap[t];if(!e){var i=this.charList[t];if(!i)return null;e=this.createTexture(t,i.x,i.y,i.w,i.h,i.offX,i.offY,i.sourceW,i.sourceH),this._textureMap[t]=e}return e},p._getFirstCharHeight=function(){if(0==this.firstCharHeight)for(var e in this.charList){var i=this.charList[e];if(i){var n=i.sourceH;if(t.isUndefined(n)){var r=i.h;void 0===r&&(r=0);var s=i.offY;t.isUndefined(s)&&(s=0),n=r+s}if(0>=n)continue;this.firstCharHeight=n;break}}return this.firstCharHeight},p.parseConfig=function(t){t=t.split("\r\n").join("\n");for(var e=t.split("\n"),i=this.getConfigByKey(e[3],"count"),n={},r=4;4+i>r;r++){var s=e[r],a=String.fromCharCode(this.getConfigByKey(s,"id")),o={};n[a]=o,o.x=this.getConfigByKey(s,"x"),o.y=this.getConfigByKey(s,"y"),o.w=this.getConfigByKey(s,"width"),o.h=this.getConfigByKey(s,"height"),o.offX=this.getConfigByKey(s,"xoffset"),o.offY=this.getConfigByKey(s,"yoffset")}return n},p.getConfigByKey=function(t,e){for(var i=t.split(" "),n=0,r=i.length;r>n;n++){var s=i[n];if(e==s.substring(0,e.length)){var a=s.substring(e.length+1);return parseInt(a)}}return 0},i}(t.SpriteSheet);t.BitmapFont=e,t.registerClass(e,"egret.BitmapFont")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){t.$error(1014)}var i=e;return p=i.prototype,e.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},e.getPowIn=function(t){return function(e){return Math.pow(e,t)}},e.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},e.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},e.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},e.sineOut=function(t){return Math.sin(t*Math.PI/2)},e.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},e.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},e.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},e.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},e.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},e.circOut=function(t){return Math.sqrt(1- --t*t)},e.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},e.bounceIn=function(t){return 1-e.bounceOut(1-t)},e.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},e.bounceInOut=function(t){return.5>t?.5*e.bounceIn(2*t):.5*e.bounceOut(2*t-1)+.5},e.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-(t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e))}},e.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},e.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return(n*=2)<1?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},e.quadIn=e.getPowIn(2),e.quadOut=e.getPowOut(2),e.quadInOut=e.getPowInOut(2),e.cubicIn=e.getPowIn(3),e.cubicOut=e.getPowOut(3),e.cubicInOut=e.getPowInOut(3),e.quartIn=e.getPowIn(4),e.quartOut=e.getPowOut(4),e.quartInOut=e.getPowInOut(4),e.quintIn=e.getPowIn(5),e.quintOut=e.getPowOut(5),e.quintInOut=e.getPowInOut(5),e.backIn=e.getBackIn(1.7),e.backOut=e.getBackOut(1.7),e.backInOut=e.getBackInOut(1.7),e.elasticIn=e.getElasticIn(1,.3),e.elasticOut=e.getElasticOut(1,.3),e.elasticInOut=e.getElasticInOut(1,.3*1.5),e}();t.Ease=e,t.registerClass(e,"egret.Ease")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){this.onSuccessFunc=null,this.onSuccessThisObject=null,this.onErrorFunc=null,this.onErrorThisObject=null,this.downloadingSizeFunc=null,this.downloadingSizeThisObject=null}var i=e;return p=i.prototype,e.create=function(){return e.promiseObjectList.length?e.promiseObjectList.pop():new t.PromiseObject},p.onSuccess=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onSuccessFunc&&this.onSuccessFunc.apply(this.onSuccessThisObject,t),this.destroy()},p.onError=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.onErrorFunc&&this.onErrorFunc.apply(this.onErrorThisObject,t),this.destroy()},p.downloadingSize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];this.downloadingSizeFunc&&this.downloadingSizeFunc.apply(this.downloadingSizeThisObject,t)},p.destroy=function(){this.onSuccessFunc=void 0,this.onSuccessThisObject=void 0,this.onErrorFunc=void 0,this.onErrorThisObject=void 0,this.downloadingSizeFunc=void 0,this.downloadingSizeThisObject=void 0,e.promiseObjectList.push(this)},e.promiseObjectList=[],e}();t.PromiseObject=e,t.registerClass(e,"egret.PromiseObject")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i){void 0===i&&(i=0),e.call(this),this._delay=0,this._currentCount=0,this._running=!1,this.updateInterval=1e3,this.lastCount=1e3,this.delay=t,this.repeatCount=0|+i}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"delay",function(){return this._delay},function(t){1>t&&(t=1),this._delay!=t&&(this._delay=t,this.lastCount=this.updateInterval=Math.round(60*t))}),n(p,"currentCount",function(){return this._currentCount}),n(p,"running",function(){return this._running}),p.reset=function(){this.stop(),this._currentCount=0},p.start=function(){this._running||(t.sys.$ticker.$startTick(this.$update,this),this._running=!0)},p.stop=function(){this._running&&(t.stopTick(this.$update,this),this._running=!1)},p.$update=function(){if(this.lastCount-=1e3,this.lastCount>0)return!0;this.lastCount+=this.updateInterval,this._currentCount++;var e=this.repeatCount>0&&this._currentCount>=this.repeatCount;return t.TimerEvent.emitTimerEvent(this,t.TimerEvent.TIMER),e&&(this.stop(),t.TimerEvent.emitTimerEvent(this,t.TimerEvent.TIMER_COMPLETE)),!1},i}(t.EventDispatcher);t.Timer=e,t.registerClass(e,"egret.Timer")}(egret||(egret={}));var egret;!function(t){t.XML}(egret||(egret={}));var egret;!function(t){function e(t){if(!t)return null;var e=i[t];if(e)return e;var n=t.split("."),r=n.length;e=__global;for(var s=0;r>s;s++){var a=n[s];if(e=e[a],!e)return null}return i[t]=e,e}var i={};t.getDefinitionByName=e}(egret||(egret={}));var __global=__global||this,egret;!function(t){t.getOption}(egret||(egret={}));var egret;!function(t){function e(t){var e=typeof t;if(!t||"object"!=e&&!t.prototype)return e;var i=t.prototype?t.prototype:Object.getPrototypeOf(t);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString(),r=n.indexOf("("),s=n.substring(9,r);return Object.defineProperty(i,"__class__",{value:s,enumerable:!1,writable:!0}),s}t.getQualifiedClassName=e}(egret||(egret={}));var egret;!function(t){function e(e,i,h){for(var l=[],u=3;u<arguments.length;u++)l[u-3]=arguments[u];var c={listener:e,thisObject:i,delay:h,params:l};return a++,1==a&&t.sys.$ticker&&(o=t.getTimer(),t.sys.$ticker.$startTick(n,null)),s++,r[s]=c,s}function i(e){r[e]&&(a--,delete r[e],0==a&&t.sys.$ticker&&t.sys.$ticker.$stopTick(n,null))}function n(t){var e=t-o;o=t;for(var n in r){var s=r[n];s.delay-=e,s.delay<=0&&(s.listener.apply(s.thisObject,s.params),i(n))}}var r={},s=0,a=0,o=0;t.setTimeout=e,t.clearTimeout=i}(egret||(egret={}));var egret;!function(t){function e(e,i){t.sys.$ticker.$startTick(e,i)}t.startTick=e}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=[],n=-1!=navigator.userAgent.indexOf("QQBrowser"),r=function(){function r(){t.sys.sharedRenderContext=this.create().renderContext;for(var e=0;3>e;e++)i.push(this.create())}var s=r;return p=s.prototype,p.create=function(e){var r=e||i.length>3?i.pop():null;if(!r){var s=document.createElement("canvas");if(s.width=s.height=1,n&&!this.testCanvasValid(s))return t.warn("failed to create canvas!"),null;r=this.createSurface(s)}return r},p.release=function(t){t&&(t.width=t.height=1,i.push(t))},p.testCanvasValid=function(t){t.height=1,t.width=1;var e=t.toDataURL("image/png");return"data:,"==e?!1:!0},p.createSurface=function(i){var n=i.getContext("2d");i.renderContext=n,n.surface=i,e.toBitmapData(i);var r=n.drawImage;if(n.drawImage=function(t){t&&0!=t.width&&0!=t.height&&r.apply(n,arguments)},t.isUndefined(n.imageSmoothingEnabled)){for(var s=["webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled"],a=s.length-1;a>=0;a--){var o=s[a];if(void 0!==n[o])break}try{Object.defineProperty(n,"imageSmoothingEnabled",{get:function(){return this[o]},set:function(t){this[o]=t}})}catch(h){n.imageSmoothingEnabled=n[o]}}return i},r}();e.CanvasFactory=r,t.registerClass(r,"egret.web.CanvasFactory",["egret.sys.SurfaceFactory"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(t){i.call(this),this.init(t)}__extends(n,i);var r=n;return p=r.prototype,p.init=function(i){var n=this.readOption(i),r=new t.Stage;r.$screen=this,r.$scaleMode=n.scaleMode,r.$maxTouches=n.maxTouches,r.frameRate=n.frameRate,r.textureScaleFactor=n.textureScaleFactor;var s=t.sys.surfaceFactory.create(),a=s;this.attachCanvas(i,a);var o=new e.WebTouchHandler(r,a),h=new t.sys.Player(s.renderContext,r,n.entryClassName),l=new t.web.WebHideHandler(r),u=new e.HTMLInput;this.playerOption=n,this.container=i,this.canvas=a,this.stage=r,this.player=h,this.webTouchHandler=o,this.webInput=u,this.webHide=l,t.web.$cacheTextAdapter(u,r,i,a),this.updateScreenSize(),this.updateMaxTouches(),h.start(),t.MainContext.instance.stage=r},p.readOption=function(e){var i={};i.entryClassName=e.getAttribute("data-entry-class"),i.scaleMode=e.getAttribute("data-scale-mode")||t.StageScaleMode.NO_SCALE,i.frameRate=+e.getAttribute("data-frame-rate")||30,i.contentWidth=+e.getAttribute("data-content-width")||480,i.contentHeight=+e.getAttribute("data-content-height")||800,i.orientation=e.getAttribute("data-orientation")||t.sys.OrientationMode.AUTO,i.maxTouches=+e.getAttribute("data-multi-fingered")||2,i.textureScaleFactor=+e.getAttribute("texture-scale-factor")||1;return i},p.attachCanvas=function(t,e){var i=e.style;i.cursor="default",i.position="absolute",i.top="0",i.bottom="0",i.left="0",i.right="0",t.appendChild(e),i=t.style,i.overflow="hidden",i.position="relative"},p.updateScreenSize=function(){var e=this.canvas;if(!e.userTyping){var i=this.playerOption,n=this.container.getBoundingClientRect(),r=!1;i.orientation!=t.sys.OrientationMode.AUTO&&(r=i.orientation!=t.sys.OrientationMode.PORTRAIT&&n.height>n.width||i.orientation==t.sys.OrientationMode.PORTRAIT&&n.width>n.height);var s=r?n.height:n.width,a=r?n.width:n.height,o=t.sys.screenAdapter.calculateStageSize(this.stage.$scaleMode,s,a,i.contentWidth,i.contentHeight),h=o.stageWidth,l=o.stageHeight,u=o.displayWidth,c=o.displayHeight;e.width!==h&&(e.width=h),e.height!==l&&(e.height=l),e.style[t.web.getPrefixStyleName("transformOrigin")]="0% 0% 0px",e.style.width=u+"px",e.style.height=c+"px";var p=0;r?i.orientation==t.sys.OrientationMode.LANDSCAPE?(p=90,e.style.top=(n.height-u)/2+"px",e.style.left=(n.width+c)/2+"px"):(p=-90,e.style.top=(n.height+u)/2+"px",e.style.left=(n.width-c)/2+"px"):(e.style.top=(n.height-c)/2+"px",e.style.left=(n.width-u)/2+"px");var d="rotate("+p+"deg)";e.style[t.web.getPrefixStyleName("transform")]=d,this.player.updateStageSize(h,l);var f=u/h,g=c/l;this.webTouchHandler.updateScaleMode(f,g,p),this.webInput.$updateSize()}},p.updateMaxTouches=function(){this.webTouchHandler.$updateMaxTouches()},n}(t.HashObject);e.WebPlayer=i,t.registerClass(i,"egret.web.WebPlayer",["egret.sys.Screen"])}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){e.call(this),this.$scale9Grid=null,this.$fillMode="scale",this.$smoothing=!0,this._pixelHitTest=!1,this.$renderRegion=new t.sys.Region,this.$Bitmap={0:0/0,1:0/0,2:1,3:1,4:1,5:1},this.texture=i}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.$onAddToStage=function(i,n){e.prototype.$onAddToStage.call(this,i,n),this.$bitmapData&&t.Texture.$addDisplayObject(this,this.$bitmapData)},p.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$bitmapData&&t.Texture.$removeDisplayObject(this,this.$bitmapData)},n(p,"texture",function(){return this.$bitmapData},function(t){this.$setBitmapData(t)}),p.$setBitmapData=function(e){e!=this.$bitmapData&&(this.$bitmapData=e,this.$stage&&t.Texture.$addDisplayObject(this,e),this.$invalidateContentBounds())},n(p,"scale9Grid",function(){return this.$scale9Grid},function(t){this.$scale9Grid=t,this.$invalidateContentBounds()}),n(p,"fillMode",function(){return this.$fillMode},function(t){this.$setFillMode(t)}),p.$setFillMode=function(t){t!=this.$fillMode&&(this.$fillMode=t)},n(p,"smoothing",function(){return this.$smoothing},function(t){t=!!t,t!=this.$smoothing&&(this.$smoothing=t,this.$invalidate())}),p.$setWidth=function(t){var e=this.$Bitmap;0>t||t==e[0]||(e[0]=t,this.$invalidateContentBounds())},p.$setHeight=function(t){var e=this.$Bitmap;0>t||t==e[1]||(e[1]=t,this.$invalidateContentBounds())},p.$getWidth=function(){var t=this.$Bitmap;return isNaN(t[0])?this.$getContentBounds().width:t[0]},p.$getHeight=function(){var t=this.$Bitmap;return isNaN(t[1])?this.$getContentBounds().height:t[1]},p.$getScaleX=function(){return this.$Bitmap[2]},p.$setScaleX=function(i){i=t.getNumber(i);var n=this.$Bitmap;return i==n[2]?!1:(n[2]=i,n[4]=Math.abs(i),this.$invalidateContentBounds(),0>i?e.prototype.$setScaleX.call(this,-1):0==i?e.prototype.$setScaleX.call(this,0):e.prototype.$setScaleX.call(this,1))},p.$getScaleY=function(){return this.$Bitmap[3]},p.$setScaleY=function(i){i=t.getNumber(i);var n=this.$Bitmap;return i==n[3]?!1:(n[3]=i,n[5]=Math.abs(i),this.$invalidateContentBounds(),0>i?e.prototype.$setScaleY.call(this,-1):0==i?e.prototype.$setScaleY.call(this,0):e.prototype.$setScaleY.call(this,1))},p.$measureContentBounds=function(t){var e=this.$bitmapData;if(e){var i=isNaN(this.$Bitmap[0])?e.$getTextureWidth():this.$Bitmap[0],n=isNaN(this.$Bitmap[1])?e.$getTextureHeight():this.$Bitmap[1],r=this.$Bitmap;t.setTo(0,0,i*r[4],n*r[5])}else t.setEmpty()},p.$render=function(t){var e=this.$bitmapData;if(e){var n=isNaN(this.$Bitmap[0])?e.$getTextureWidth():this.$Bitmap[0],r=isNaN(this.$Bitmap[1])?e.$getTextureHeight():this.$Bitmap[1],s=this.$Bitmap;n*=s[4],r*=s[5],i.$drawImage(t,e,n,r,this.scale9Grid,this.fillMode,this.$smoothing,e._offsetX*s[4],e._offsetY*s[5])}},n(p,"pixelHitTest",function(){return this._pixelHitTest},function(t){this._pixelHitTest=!!t}),p.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);return n&&this._pixelHitTest&&(n=this.hitTestPixel(t,i)),n},p.hitTestPixel=function(e,i){var n,r,s=this.$getInvertedConcatenatedMatrix(),a=s.a*e+s.c*i+s.tx,o=s.b*e+s.d*i+s.ty,h=this.$displayList;return h?(n=h.renderContext,r=n.getImageData(a-h.offsetX,o-h.offsetY,1,1).data):(n=t.sys.sharedRenderContext,n.surface.width=n.surface.height=3,n.translate(1-a,1-o),this.$render(n),r=n.getImageData(1,1,1,1).data),0===r[3]?null:this},i.$drawImage=function(e,n,r,s,a,o,h,l,u){var c=n;if(c._bitmapData&&c._bitmapData.avaliable){e.imageSmoothingEnabled=h,l=l||Math.round(c._offsetX),u=u||Math.round(c._offsetY);var p=c._bitmapWidth,d=c._bitmapHeight;if(a)i.$drawScale9GridImage(e,c,a,r,s);else if(o==t.BitmapFillMode.SCALE)e.drawImage(c._bitmapData,c._bitmapX,c._bitmapY,p,d,l,u,c.$getScaleBitmapWidth()/c.$getTextureWidth()*r,c.$getScaleBitmapHeight()/c.$getTextureHeight()*s);else{var f,g=c._bitmapData;(g.width!=p||g.height!=d||1!=t.$TextureScaleFactor)&&(f=t.sys.surfaceFactory.create(!0),f.width=c.$getTextureWidth(),f.height=c.$getTextureHeight(),f.renderContext.drawImage(g,c._bitmapX,c._bitmapY,p,d,l,u,c.$getScaleBitmapWidth(),c.$getScaleBitmapHeight()),g=f);var v=e.createPattern(g,"repeat");e.beginPath(),e.rect(0,0,r,s),e.fillStyle=v,e.fill(),f&&t.sys.surfaceFactory.release(f)}}},i.$drawScale9GridImage=function(e,i,n,r,s){var a=i._bitmapData,o=i._bitmapWidth,h=i._bitmapHeight;r-=i.$getTextureWidth()-i.$getScaleBitmapWidth(),s-=i.$getTextureHeight()-i.$getScaleBitmapHeight();var l=n.x-i._offsetX,u=n.y-i._offsetY,c=l/t.$TextureScaleFactor,p=u/t.$TextureScaleFactor,d=n.width/t.$TextureScaleFactor,f=n.height/t.$TextureScaleFactor;0==f&&(f=1,p>=h&&p--),0==d&&(d=1,c>=o&&c--);var g=i._bitmapX,v=g+c,m=v+d,_=o-c-d,$=i._bitmapY,y=$+p,x=y+f,T=h-p-f,E=_*t.$TextureScaleFactor,b=T*t.$TextureScaleFactor;if((c+_)*t.$TextureScaleFactor>r||(p+T)*t.$TextureScaleFactor>s)return void e.drawImage(a,0,0,r,s);var w=i._offsetX,C=w+l,S=w+(r-E),F=r-l-E,O=i._offsetY,M=O+u,A=O+s-b,D=s-u-b;e.drawImage(a,g,$,c,p,w,O,l,u),e.drawImage(a,v,$,d,p,C,O,F,u),e.drawImage(a,m,$,_,p,S,O,E,u),e.drawImage(a,g,y,c,f,w,M,l,D),e.drawImage(a,v,y,d,f,C,M,F,D),e.drawImage(a,m,y,_,f,S,M,E,D),e.drawImage(a,g,x,c,T,w,A,l,b),e.drawImage(a,v,x,d,T,C,A,F,b),e.drawImage(a,m,x,_,T,S,A,E,b)},i}(t.DisplayObject);t.Bitmap=e,t.registerClass(e,"egret.Bitmap")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.NORMAL="normal",t.ADD="add",t.ERASE="erase",t}();t.BlendMode=e,t.registerClass(e,"egret.BlendMode")}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e){var i=s[e];return t.isUndefined(i)?0:i}function n(e){var i=r[e];return t.isUndefined(i)?"normal":i}for(var r=["normal","add","erase"],s={},a=r.length,o=0;a>o;o++){var h=r[o];s[h]=o}e.blendModeToNumber=i,e.numberToBlendMode=n}(e=t.sys||(t.sys={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){e.call(this),this.$bitmapData=null,this.$movieClipData=null,this.frames=null,this.$totalFrames=0,this.frameLabels=null,this.frameIntervalTime=0,this.$eventPool=null,this.$isPlaying=!1,this.isStopped=!0,this.playTimes=0,this.$currentFrameNum=0,this.$nextFrameNum=0,this.displayedKeyFrameNum=0,this.passedTime=0,this.lastTime=0,this.$renderRegion=new t.sys.Region,this.setMovieClipData(i)}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.$init=function(){this.$reset();var t=this.$movieClipData;t&&t.$isDataValid()&&(this.frames=t.frames,this.$totalFrames=t.numFrames,this.frameLabels=t.labels,this.frameIntervalTime=1e3/t.frameRate,this._initFrame())},p.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},p._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},p.$render=function(t){var e=this.$bitmapData;if(e){t.imageSmoothingEnabled=!1;var i=Math.round(e._offsetX),n=Math.round(e._offsetY),r=e._bitmapWidth,s=e._bitmapHeight,a=Math.round(e.$getScaleBitmapWidth()),o=Math.round(e.$getScaleBitmapHeight());t.drawImage(e._bitmapData,e._bitmapX,e._bitmapY,r,s,i,n,a,o)}},p.$measureContentBounds=function(t){var e=this.$bitmapData;if(e){var i=e._offsetX,n=e._offsetY,r=e.$getTextureWidth(),s=e.$getTextureHeight();t.setTo(i,n,r,s)}else t.setEmpty()},p.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},p.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},p.getFrameLabelByName=function(t,e){void 0===e&&(e=!1),e&&(t=t.toLowerCase());var i=this.frameLabels;if(i)for(var n=null,r=0;r<i.length;r++)if(n=i[r],e?n.name.toLowerCase()==t:n.name==t)return n;return null},p.getFrameLabelByFrame=function(t){var e=this.frameLabels;if(e)for(var i=null,n=0;n<e.length;n++)if(i=e[n],i.frame==t)return i;return null},p.getFrameLabelForFrame=function(t){var e=null,i=null,n=this.frameLabels;if(n)for(var r=0;r<n.length;r++){if(i=n[r],i.frame>t)return e;e=i}return e},p.play=function(t){void 0===t&&(t=0),this.$isPlaying=!0,this.setPlayTimes(t),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},p.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},p.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},p.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},p.gotoAndPlay=function(e,i){void 0===i&&(i=0),(0==arguments.length||arguments.length>2)&&t.$error(1022,"MovieClip.gotoAndPlay()"),this.play(i),this.gotoFrame(e)},p.gotoAndStop=function(e){1!=arguments.length&&t.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(e)},p.gotoFrame=function(e){var i;"string"==typeof e?i=this.getFrameLabelByName(e).frame:(i=parseInt(e+"",10),i!=e&&t.$error(1022,"Frame Label Not Found")),1>i?i=1:i>this.$totalFrames&&(i=this.$totalFrames),i!=this.$nextFrameNum&&(this.$nextFrameNum=i,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},p.advanceTime=function(e){var i=this,n=e-i.lastTime;i.lastTime=e;var r=i.frameIntervalTime,s=i.passedTime+n;i.passedTime=s%r;var a=s/r;if(1>a)return!0;for(;a>=1;){if(a--,i.$nextFrameNum++,i.$nextFrameNum>i.$totalFrames)if(-1==i.playTimes)i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1;else{if(i.playTimes--,!(i.playTimes>0)){i.$nextFrameNum=i.$totalFrames,i.$eventPool.push(t.Event.COMPLETE),i.stop();break}i.$eventPool.push(t.Event.LOOP_COMPLETE),i.$nextFrameNum=1}i.advanceFrame()}return i.constructFrame(),i.handlePendingEvent(),!1},p.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum},p.constructFrame=function(){var t=this.$currentFrameNum;this.displayedKeyFrameNum!=t&&(this.$bitmapData=this.$movieClipData.getTextureByFrame(t),this.$invalidateContentBounds(),this.displayedKeyFrameNum=t)},p.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var e=this.$eventPool,i=e.length,n=!1,r=!1,s=0;i>s;s++){var a=e.pop();a==t.Event.LOOP_COMPLETE?r=!0:a==t.Event.COMPLETE?n=!0:this.dispatchEventWith(a)}r&&this.dispatchEventWith(t.Event.LOOP_COMPLETE),n&&this.dispatchEventWith(t.Event.COMPLETE)}},n(p,"totalFrames",function(){return this.$totalFrames}),n(p,"currentFrame",function(){return this.$currentFrameNum}),n(p,"currentFrameLabel",function(){var t=this.getFrameLabelByFrame(this.$currentFrameNum);return t&&t.name}),n(p,"currentLabel",function(){var t=this.getFrameLabelForFrame(this.$currentFrameNum);return t?t.name:null}),n(p,"frameRate",function(){return this.$movieClipData.frameRate},function(t){t!=this.$movieClipData.frameRate&&(this.$movieClipData.frameRate=t,this.frameIntervalTime=1e3/this.$movieClipData.frameRate)}),n(p,"isPlaying",function(){return this.$isPlaying}),n(p,"movieClipData",function(){return this.$movieClipData},function(t){this.setMovieClipData(t)}),p.setMovieClipData=function(t){this.$movieClipData!=t&&(this.$movieClipData=t,this.$init())},p.setPlayTimes=function(t){(0>t||t>=1)&&(this.playTimes=0>t?-1:Math.floor(t))},p.setIsStopped=function(e){this.isStopped!=e&&(this.isStopped=e,e?(this.playTimes=0,t.sys.$ticker.$stopTick(this.advanceTime,this)):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=t.getTimer(),t.sys.$ticker.$startTick(this.advanceTime,this)))},i}(t.DisplayObject);t.MovieClip=e,t.registerClass(e,"egret.MovieClip")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i){e.call(this),this.enableCache=!0,this.$mcDataCache={},this.$mcDataSet=t,this.setTexture(i)}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.clearCache=function(){this.$mcDataCache={}},p.generateMovieClipData=function(e){if(void 0===e&&(e=""),""==e&&this.$mcDataSet)for(e in this.$mcDataSet.mc)break;if(""==e)return null;var i=this.findFromCache(e,this.$mcDataCache);return i||(i=new t.MovieClipData,this.fillData(e,i,this.$mcDataCache)),i},p.findFromCache=function(t,e){return this.enableCache&&e[t]?e[t]:null},p.fillData=function(t,e,i){if(this.$mcDataSet){var n=this.$mcDataSet.mc[t];n&&(e.$init(n,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(i[t]=e))}},n(p,"mcDataSet",function(){return this.$mcDataSet},function(t){this.$mcDataSet=t}),n(p,"texture",void 0,function(t){this.setTexture(t)}),n(p,"spriteSheet",function(){return this.$spriteSheet}),p.setTexture=function(e){this.$spriteSheet=e?new t.SpriteSheet(e):null},i}(t.EventDispatcher);t.MovieClipDataFactory=e,t.registerClass(e,"egret.MovieClipDataFactory")}(egret||(egret={}));var egret;!function(t){var e=["source-over","lighter","destination-out"],i="source-over",n=function(n){function r(){n.call(this)}__extends(r,n);var s=r;return p=s.prototype,p.drawToTexture=function(e,i,n){void 0===n&&(n=1),n/=t.$TextureScaleFactor;var r=e.$parent,s=new t.DisplayObjectContainer;if(s.addChild(e),s.scaleX=s.scaleY=n,i){var a=new t.Rectangle;a.setTo(i.x,i.y,i.width,i.height),s.scrollRect=a}var o=new t.DisplayObjectContainer,h=t.sys.DisplayList.create(o);o.$displayList=h,o.addChild(s),this.$update(e),t.sys.DisplayList.release(h),o.$displayList=null;var l=e.getBounds(),u=this.createRenderContext(l.width*n,l.height*n);if(u.clearRect(0,0,l.width*n,l.height*n),this._offsetX=l.x*n,this._offsetY=l.y*n,!u)return!1;var c=this.drawDisplayObject(o,u);return 0==c?!1:(u.surface.avaliable=!0,this._setBitmapData(u.surface),this._offsetX=l.x*n,this._offsetY=l.y*n,r&&r.addChild(e),!0)},p.$update=function(e){if(e.$renderRegion)e.$renderRegion.moved=!0,e.$update();else if(e instanceof t.DisplayObjectContainer)for(var i=e.$children,n=i.length,r=0;n>r;r++){var s=i[r];this.$update(s)}},p.drawDisplayObject=function(t,e){var i,n,r=0;if(t.$renderRegion&&(i=t,n=t.$renderAlpha),i){r++,e.globalAlpha=n;var s=i.$renderMatrix;e.setTransform(s.a,s.b,s.c,s.d,s.tx-this._offsetX,s.ty-this._offsetY),i.$render(e)}var a=t.$children;if(a)for(var o=a.length,h=0;o>h;h++){var l=a[h];!l.$visible||l.$alpha<=0||l.$maskedObject||(r+=0!==l.$blendMode||l.$mask?this.drawWithClip(l,e):l.$scrollRect?this.drawWithScrollRect(l,e):this.drawDisplayObject(l,e))}return r},p.drawWithClip=function(n,r){var s=0,a=0!==n.$blendMode;if(a){var o=e[n.$blendMode];o||(o=i)}var h,l=n.$scrollRect,u=n.$mask,c=n.$getConcatenatedMatrix();if(u){var p=u.$getOriginalBounds();h=t.sys.Region.create(),h.updateRegion(p,u.$getConcatenatedMatrix())}var d;if(l&&(d=t.sys.Region.create(),d.updateRegion(l,c)),d&&h?(d.intersect(h),t.sys.Region.release(h)):!d&&h&&(d=h),d){if(d.isEmpty())return t.sys.Region.release(d),s}else d=t.sys.Region.create(),p=n.$getOriginalBounds(),d.updateRegion(p,n.$getConcatenatedMatrix());var f=this.createRenderContext(d.width,d.height);if(!f)return s+=this.drawDisplayObject(n,r),t.sys.Region.release(d),s;if(l){var g=c;f.setTransform(g.a,g.b,g.c,g.d,g.tx-d.minX,g.ty-d.minY),f.beginPath(),f.rect(l.x,l.y,l.width,l.height),f.clip()}f.setTransform(1,0,0,1,-d.minX,-d.minY);var v=t.Matrix.create().setTo(1,0,0,1,-d.minX,-d.minY);if(s+=this.drawDisplayObject(n,f),t.Matrix.release(v),u){var m=this.createRenderContext(d.width,d.height);if(!m)return s+=this.drawDisplayObject(n,r),t.sys.surfaceFactory.release(f.surface),t.sys.Region.release(d),s;m.setTransform(1,0,0,1,-d.minX,-d.minY),v=t.Matrix.create().setTo(1,0,0,1,-d.minX,-d.minY);var _=this.drawDisplayObject(u,m);t.Matrix.release(v),_>0&&(s+=_,f.globalCompositeOperation="destination-in",f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,f.drawImage(m.surface,0,0)),t.sys.surfaceFactory.release(m.surface)}return s>0&&(s++,a&&(r.globalCompositeOperation=o),r.setTransform(1,0,0,1,d.minX,d.minY),r.drawImage(f.surface,0,0),a&&(r.globalCompositeOperation=i)),t.sys.surfaceFactory.release(f.surface),t.sys.Region.release(d),s},p.drawWithScrollRect=function(e,i){var n=0,r=e.$scrollRect,s=e.$getConcatenatedMatrix(),a=t.sys.Region.create();return r.isEmpty()||a.updateRegion(r,s),a.isEmpty()?(t.sys.Region.release(a),n):(i.save(),i.setTransform(s.a,s.b,s.c,s.d,s.tx,s.ty),i.beginPath(),i.rect(r.x,r.y,r.width,r.height),i.clip(),n+=this.drawDisplayObject(e,i),i.restore(),t.sys.Region.release(a),n)},p.createRenderContext=function(e,i){var n=t.sys.surfaceFactory.create(!0);return n?(n.width=Math.max(257,e),n.height=Math.max(257,i),n.renderContext):null},p.dispose=function(){this._bitmapData&&(t.Texture.$dispose(this),this._bitmapData=null)},r}(t.Texture);t.RenderTexture=n,t.registerClass(n,"egret.RenderTexture")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(i){void 0===i&&(i=null),e.call(this),this.scrollBeginThreshold=10,this.scrollSpeed=1,this._content=null,this.delayTouchBeginEvent=null,this.touchBeginTimer=null,this.touchEnabled=!0,this._ScrV_Props_=new t.ScrollViewProperties,i&&this.setContent(i)}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"bounces",function(){return this._ScrV_Props_._bounces},function(t){this._ScrV_Props_._bounces=!!t}),p.setContent=function(t){this._content!==t&&(this.removeContent(),t&&(this._content=t,e.prototype.addChild.call(this,t),this._addEvents()))},p.removeContent=function(){this._content&&(this._removeEvents(),e.prototype.removeChildAt.call(this,0)),this._content=null},n(p,"verticalScrollPolicy",function(){return this._ScrV_Props_._verticalScrollPolicy},function(t){t!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=t)}),n(p,"horizontalScrollPolicy",function(){return this._ScrV_Props_._horizontalScrollPolicy},function(t){t!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=t)}),n(p,"scrollLeft",function(){return this._ScrV_Props_._scrollLeft},function(t){t!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=t,this._validatePosition(!1,!0),this._updateContentPosition())}),n(p,"scrollTop",function(){return this._ScrV_Props_._scrollTop},function(t){t!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=t,this._validatePosition(!0,!1),this._updateContentPosition())}),p.setScrollPosition=function(t,e,i){if(void 0===i&&(i=!1),!(i&&0==t&&0==e||!i&&this._ScrV_Props_._scrollTop==t&&this._ScrV_Props_._scrollLeft==e)){var n=this._ScrV_Props_._scrollTop,r=this._ScrV_Props_._scrollLeft;if(i){var s=this.getMaxScrollLeft(),a=this.getMaxScrollTop();(0>=n||n>=a)&&(t/=2),(0>=r||r>=s)&&(e/=2);var o=n+t,h=r+e,l=this._ScrV_Props_._bounces;l||((0>=o||o>=a)&&(o=Math.max(0,Math.min(o,a))),(0>=h||h>=s)&&(h=Math.max(0,Math.min(h,s)))),this._ScrV_Props_._scrollTop=o,this._ScrV_Props_._scrollLeft=h}else this._ScrV_Props_._scrollTop=t,this._ScrV_Props_._scrollLeft=e;this._validatePosition(!0,!0),this._updateContentPosition()}},p._validatePosition=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t){var i=this.height,n=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-i)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,n>i?n-i/2:i/2)}if(e){var r=this.width,s=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-r)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,s>r?s-r/2:r/2)}},p.$setWidth=function(t){this.$getExplicitWidth()!=t&&(e.prototype.$setWidth.call(this,t),this._updateContentPosition())},p.$setHeight=function(t){this.$getExplicitHeight()!=t&&(e.prototype.$setHeight.call(this,t),this._updateContentPosition())},p._updateContentPosition=function(){var e=this.height,i=this.width;this.scrollRect=new t.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),i,e),this.dispatchEvent(new t.Event(t.Event.CHANGE))},p._checkScrollPolicy=function(){var t=this._ScrV_Props_._horizontalScrollPolicy,e=this.__checkScrollPolicy(t,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=e;var i=this._ScrV_Props_._verticalScrollPolicy,n=this.__checkScrollPolicy(i,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=n,e||n},p.__checkScrollPolicy=function(t,e,i){return"on"==t?!0:"off"==t?!1:e>i},p._addEvents=function(){this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)
},p._removeEvents=function(){this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},p._onTouchBegin=function(e){if(!e.$isDefaultPrevented){var i=this._checkScrollPolicy();i&&(this._ScrV_Props_._touchStartPosition.x=e.stageX,this._ScrV_Props_._touchStartPosition.y=e.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this.stage.addEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this.stage.addEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),this.stage.addEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(e),e.preventDefault())}},p._onTouchBeginCapture=function(e){var i=this._checkScrollPolicy();if(i){for(var n=e.target;n!=this;){if("_checkScrollPolicy"in n&&(i=n._checkScrollPolicy()))return;n=n.parent}e.stopPropagation();var r=this.cloneTouchEvent(e);this.delayTouchBeginEvent=r,this.touchBeginTimer||(this.touchBeginTimer=new t.Timer(100,1),this.touchBeginTimer.addEventListener(t.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(e)}},p._onTouchEndCapture=function(){this.delayTouchBeginEvent&&this._onTouchBeginTimer()},p._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var t=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(t)},p.dispatchPropagationEvent=function(e){for(var i=e.$target,n=this.$getPropagationList(i),r=n.length,s=.5*n.length,a=-1,o=0;r>o;o++)if(n[o]===this._content){a=o;break}n.splice(0,a+1),s-=a+1,this.$emitPropagationEvent(e,n,s),t.Event.release(e)},p._onTouchMove=function(t){if(this._ScrV_Props_._lastTouchPosition.x!=t.stageX||this._ScrV_Props_._lastTouchPosition.y!=t.stageY){if(!this._ScrV_Props_._scrollStarted){var e=t.stageX-this._ScrV_Props_._touchStartPosition.x,i=t.stageY-this._ScrV_Props_._touchStartPosition.y,n=Math.sqrt(e*e+i*i);if(n<this.scrollBeginThreshold)return void this._logTouchEvent(t)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var r=this._getPointChange(t);this.setScrollPosition(r.y,r.x,!0),this._calcVelocitys(t),this._logTouchEvent(t)}},p._onTouchEnd=function(){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.TOUCH_END,this._onTouchEnd,this),t.MainContext.instance.stage.removeEventListener(t.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(t.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},p._onEnterFrame=function(){var e=t.getTimer();e-this._ScrV_Props_._lastTouchTime>100&&e-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},p._logTouchEvent=function(e){this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(e),this._ScrV_Props_._lastTouchTime=t.getTimer()},p._getPointChange=function(t){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-t.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-t.stageY}},p._calcVelocitys=function(e){var i=t.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=i);var n=this._getPointChange(e),r=i-this._ScrV_Props_._lastTouchTime;n.x/=r,n.y/=r,this._ScrV_Props_._velocitys.push(n),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=e.stageX,this._ScrV_Props_._lastTouchPosition.y=e.stageY},p._getContentWidth=function(){return this._content.$getExplicitWidth()||this._content.width},p._getContentHeight=function(){return this._content.$getExplicitHeight()||this._content.height},p.getMaxScrollLeft=function(){var t=this._getContentWidth()-this.width;return Math.max(0,t)},p.getMaxScrollTop=function(){var t=this._getContentHeight()-this.height;return Math.max(0,t)},p._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var t={x:0,y:0},e=0,n=0;n<this._ScrV_Props_._velocitys.length;n++){var r=this._ScrV_Props_._velocitys[n],s=i.weight[n];t.x+=r.x*s,t.y+=r.y*s,e+=s}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var a=t.x/e*this.scrollSpeed,o=t.y/e*this.scrollSpeed,h=Math.abs(a),l=Math.abs(o),u=this.getMaxScrollLeft(),c=this.getMaxScrollTop(),p=h>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollLeft,u):{position:this._ScrV_Props_._scrollLeft,duration:1},d=l>.02?this.getAnimationDatas(o,this._ScrV_Props_._scrollTop,c):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(p.position,p.duration),this.setScrollTop(d.position,d.duration)}},p._onTweenFinished=function(t){t==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),t==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},p._onScrollStarted=function(){},p._onScrollFinished=function(){t.Tween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new t.Event(t.Event.COMPLETE))},p.setScrollTop=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollTop(),Math.max(e,0));if(0==i)return this.scrollTop=n,null;0==this._ScrV_Props_._bounces&&(e=n);var r=t.Tween.get(this).to({scrollTop:e},i,t.Ease.quartOut);return n!=e&&r.to({scrollTop:n},300,t.Ease.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=r,r.call(this._onTweenFinished,this,[r]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted(),r},p.setScrollLeft=function(e,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollLeft(),Math.max(e,0));if(0==i)return this.scrollLeft=n,null;0==this._ScrV_Props_._bounces&&(e=n);var r=t.Tween.get(this).to({scrollLeft:e},i,t.Ease.quartOut);return n!=e&&r.to({scrollLeft:n},300,t.Ease.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=r,r.call(this._onTweenFinished,this,[r]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted(),r},p.getAnimationDatas=function(t,e,i){var n=Math.abs(t),r=.95,s=0,a=.998,o=.02,h=e+500*t;if(0>h||h>i)for(h=e;1/0!=Math.abs(t)&&Math.abs(t)>o;)h+=t,t*=0>h||h>i?a*r:a,s++;else s=500*-Math.log(o/n);var l={position:Math.min(i+50,Math.max(h,-50)),duration:s};return l},p.cloneTouchEvent=function(e){var i=new t.TouchEvent(e.type,e.bubbles,e.cancelable);return i.touchPointID=e.touchPointID,i.$stageX=e.stageX,i.$stageY=e.stageY,i.touchDown=e.touchDown,i.$isDefaultPrevented=!1,i.$target=e.target,i},p.throwNotSupportedError=function(){t.$error(1023)},p.addChild=function(){return this.throwNotSupportedError(),null},p.addChildAt=function(){return this.throwNotSupportedError(),null},p.removeChild=function(){return this.throwNotSupportedError(),null},p.removeChildAt=function(){return this.throwNotSupportedError(),null},p.setChildIndex=function(){this.throwNotSupportedError()},p.swapChildren=function(){this.throwNotSupportedError()},p.swapChildrenAt=function(){this.throwNotSupportedError()},i.weight=[1,1.33,1.66,2,2.33],i}(t.DisplayObjectContainer);t.ScrollView=e,t.registerClass(e,"egret.ScrollView")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$graphics=new t.Graphics,this.$graphics.$renderContext.$targetDisplay=this,this.$renderRegion=new t.sys.Region}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"graphics",function(){return this.$graphics}),p.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},p.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);return n==this&&(n=this.$graphics.$hitTest(t,i)),n},p.$render=function(t){this.$graphics.$render(t)},i}(t.DisplayObject);t.Shape=e,t.registerClass(e,"egret.Shape")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.$graphics=new t.Graphics,this.$graphics.$renderContext.$targetDisplay=this,this.$renderRegion=new t.sys.Region}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"graphics",function(){return this.$graphics}),p.$hitTest=function(t,i){var n=e.prototype.$hitTest.call(this,t,i);return n==this&&(n=this.$graphics.$hitTest(t,i)),n},p.$measureContentBounds=function(t){this.$graphics.$measureContentBounds(t)},p.$render=function(t){this.$graphics.$render(t)},i}(t.DisplayObjectContainer);t.Sprite=e,t.registerClass(e,"egret.Sprite",["egret.IDisplayObjectContainer"])}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n),this._status=0}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"status",function(){return this._status}),i.dispatchHTTPStatusEvent=function(e,n){var r=t.Event.create(i,i.HTTP_STATUS);r._status=n;var s=e.dispatchEvent(r);return t.Event.release(r),s},i.HTTP_STATUS="httpStatus",i}(t.Event);t.HTTPStatusEvent=e,t.registerClass(e,"egret.HTTPStatusEvent")}(egret||(egret={}));var egret;!function(t){t.ExternalInterface}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(e){var i=JSON.parse(e),r=i.functionName,s=n[r];if(s){var a=i.value;s.call(null,a)}else t.$warn(1004,r)}var n={},r=function(){function t(){}var e=t;return p=e.prototype,t.call=function(t,e){var i={};i.functionName=t,i.value=e,egret_native.sendInfoToPlugin(JSON.stringify(i))},t.addCallback=function(t,e){n[t]=e},t}();e.NativeExternalInterface=r,t.registerClass(r,"egret.native.NativeExternalInterface",["egret.ExternalInterface"]),t.ExternalInterface=r,egret_native.receivedPluginInfo=i}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function t(){}var e=t;return p=e.prototype,t.call=function(){},t.addCallback=function(){},t}();e.WebExternalInterface=i,t.registerClass(i,"egret.web.WebExternalInterface",["egret.ExternalInterface"]),t.ExternalInterface=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i){t.call(this),this.blurX=e,this.blurY=i,this.type="blur"}__extends(e,t);var i=e;return p=i.prototype,e}(t.Filter);t.BlurFilter=e,t.registerClass(e,"egret.BlurFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=null),t.call(this),this.$matrix=[],this.matrix2=[],this.type="colorTransform",this.setMatrix(e)}__extends(e,t);var i=__define,n=e;return p=n.prototype,i(p,"matrix",function(){for(var t=0;20>t;t++)this.matrix2[t]=this.$matrix[t];return this.matrix2},function(t){this.setMatrix(t)}),p.setMatrix=function(t){for(var e=0;20>e;e++)this.$matrix[e]=t&&t[e]||0},e}(t.Filter);t.ColorMatrixFilter=e,t.registerClass(e,"egret.ColorMatrixFilter")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e,i,n,r,s,a,o,h,l,u,c){void 0===e&&(e=4),void 0===i&&(i=45),void 0===n&&(n=0),void 0===r&&(r=1),void 0===s&&(s=4),void 0===a&&(a=4),void 0===o&&(o=1),void 0===h&&(h=1),void 0===l&&(l=!1),void 0===u&&(u=!1),void 0===c&&(c=!1),t.call(this,n,r,s,a,o,h,l,u),this.distance=e,this.angle=i}__extends(e,t);var i=e;return p=i.prototype,e}(t.GlowFilter);t.DropShadowFilter=e,t.registerClass(e,"egret.DropShadowFilter")}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.en_US=t.$locale_strings.en_US||{};var e=t.$locale_strings.en_US;e[1001]="Could not find Egret entry class: {0}。",e[1002]="Egret entry class '{0}' must inherit from egret.DisplayObject.",e[1003]="Parameter {0} must be non-null.",e[1004]="An object cannot be added as a child to one of it's children (or children's children, etc.).",e[1005]="An object cannot be added as a child of itself.",e[1006]="The supplied DisplayObject must be a child of the caller.",e[1007]="An index specified for a parameter was out of range.",e[1008]="Instantiate singleton error，singleton class {0} can not create multiple instances.",e[1009]='the Class {0} cannot use the property "{1}"',e[1010]='the property "{1}" of the Class "{0}" is readonly',e[1011]="Stream Error. URL: {0}",e[1012]="The type of parameter {0} must be Class.",e[1013]="Variable assignment is NaN, please see the code!",e[1014]='the constant "{1}" of the Class "{0}" is read-only',e[1022]="{0} ArgumentError",e[1023]="This method is not available in the ScrollView!",e[1025]="end of the file",e[1026]="! EncodingError The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]=". called injection is not configured rule: {0}, please specify configuration during its initial years of injection rule, and then call the corresponding single case.",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="Photos can not be used across domains toDataURL to convert base64",e[1034]='Music file decoding failed: "{0}", please use the standard conversion tool reconversion under mp3.',e[1035]="Native does not support this feature!",e[2e3]="RES.createGroup() passed in non-existed key value in configuration: {0}",e[2001]='RES loaded non-existed or empty resource group:"{0}"',e[2002]="Do not use the different types of ways to load the same material!",e[3e3]="Theme configuration file failed to load: {0}",e[3001]="Cannot find the skin name which is configured in Theme: {0}",e[3002]='Index:"{0}" is out of the collection element index range',e[3003]="Cannot be available in this component. If this component is container, please continue to use",e[3004]="addChild(){0}addElement() replace",e[3005]="addChildAt(){0}addElementAt() replace",e[3006]="removeChild(){0}removeElement() replace",e[3007]="removeChildAt(){0}removeElementAt() replace",e[3008]="setChildIndex(){0}setElementIndex() replace",e[3009]="swapChildren(){0}swapElements() replace",e[3010]="swapChildrenAt(){0}swapElementsAt() replace",e[3011]='Index:"{0}" is out of the visual element index range',e[3012]="This method is not available in Scroller component!",e[3013]="UIStage is GUI root container, and only one such instant is in the display list！",e[3100]="Current browser does not support WebSocket",e[3101]="Please connect Socket firstly",e[3102]="Please set the type of binary type",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){t.$locale_strings=t.$locale_strings||{},t.$locale_strings.zh_CN=t.$locale_strings.zh_CN||{};var e=t.$locale_strings.zh_CN;e[1001]="找不到Egret入口类: {0}。",e[1002]="Egret入口类 {0} 必须继承自egret.DisplayObject。",e[1003]="参数 {0} 不能为 null。",e[1004]="无法将对象添加为它的一个子对象（或子对象的子对象等）的子对象。",e[1005]="不能将对象添加为其自身的子对象。",e[1006]="提供的 DisplayObject 必须是调用者的子级。",e[1007]="为参数指定的索引不在范围内。",e[1008]="实例化单例出错，不允许实例化多个 {0} 对象。",e[1009]="类 {0} 不可以使用属性 {1}",e[1010]="类 {0} 属性 {1} 是只读的",e[1011]="流错误。URL: {0}",e[1012]="参数 {0} 的类型必须为 Class。",e[1013]="变量赋值为NaN，请查看代码！",e[1014]="类 {0} 常量 {1} 是只读的",e[1022]="{0} ArgumentError",e[1023]="此方法在ScrollView内不可用!",e[1025]="遇到文件尾",e[1026]="EncodingError! The code point {0} could not be encoded.",e[1027]="DecodingError",e[1028]="调用了未配置的注入规则:{0}。 请先在项目初始化里配置指定的注入规则，再调用对应单例。",e[1029]="Function.prototype.bind - what is trying to be bound is not callable",e[1033]="跨域图片不可以使用toDataURL来转换成base64",e[1034]='音乐文件解码失败："{0}"，请使用标准的转换工具重新转换下mp3。',e[1035]="Native 下暂未实现此功能！",e[2e3]="RES.createGroup()传入了配置中不存在的键值: {0}",e[2001]='RES加载了不存在或空的资源组:"{0}"',e[2002]="请不要使用不同的类型方式来加载同一个素材！",e[3e3]="主题配置文件加载失败: {0}",e[3001]="找不到主题中所配置的皮肤类名: {0}",e[3002]='索引:"{0}"超出集合元素索引范围',e[3003]="在此组件中不可用，若此组件为容器类，请使用",e[3004]="addChild(){0}addElement()代替",e[3005]="addChildAt(){0}addElementAt()代替",e[3006]="removeChild(){0}removeElement()代替",e[3007]="removeChildAt(){0}removeElementAt()代替",e[3008]="setChildIndex(){0}setElementIndex()代替",e[3009]="swapChildren(){0}swapElements()代替",e[3010]="swapChildrenAt(){0}swapElementsAt()代替",e[3011]='索引:"{0}"超出可视元素索引范围',e[3012]="此方法在Scroller组件内不可用!",e[3013]="UIStage是GUI根容器，只能有一个此实例在显示列表中！",e[3100]="当前浏览器不支持WebSocket",e[3101]="请先连接WebSocket",e[3102]="请先设置type为二进制类型",e[4e3]="An Bone cannot be added as a child to itself or one of its children (or children's children, etc.)",e[4001]="Abstract class can not be instantiated!",e[4002]="Unnamed data!",e[4003]="Nonsupport version!"}(egret||(egret={}));var egret;!function(t){var e;!function(t){t.getItem,t.setItem,t.removeItem,t.clear}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i;!function(){function i(t){return h[t]}function n(e,i){h[e]=i;try{return this.save(),!0}catch(n){return t.$warn(1018,e,i),!1}}function r(t){delete h[t],a()}function s(){for(var t in h)delete h[t];a()}function a(){egret_native.saveRecord(o,JSON.stringify(h))}var o="LocalStorage.local",h={};if(egret_native.isRecordExists(o)){var l=egret_native.loadRecord(o);h=JSON.parse(l)}else h={};e.getItem=i,e.setItem=n,e.removeItem=r,e.clear=s}(i=e["native"]||(e["native"]={}))}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i;!function(){function i(t){return window.localStorage.getItem(t)}function n(e,i){try{return window.localStorage.setItem(e,i),!0}catch(n){return t.$warn(1018,e,i),!1}}function r(t){window.localStorage.removeItem(t)}function s(){window.localStorage.clear()}e.getItem=i,e.setItem=n,e.removeItem=r,e.clear=s}(i=e.web||(e.web={}))}(e=t.localStorage||(t.localStorage={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(i){function n(){i.call(this),this.loaded=!1}__extends(n,i);var r=n;return p=r.prototype,p.load=function(e){function i(){r.loaded=!0,r.dispatchEventWith(t.Event.COMPLETE)}function n(){r.dispatchEventWith(t.IOErrorEvent.IO_ERROR)}var r=this,s=t.PromiseObject.create();s.onSuccessFunc=i,s.onErrorFunc=n,egret_native.download(e,e,s)},p.preload=function(e,i,n){if(void 0===i&&(i=null),void 0===n&&(n=null),this.type=e,this.type==t.Sound.MUSIC)egret_native.Audio.preloadBackgroundMusic(this.url),i&&t.callLater(i,n);else if(this.type==t.Sound.EFFECT){var r=new t.PromiseObject;r.onSuccessFunc=function(){i&&i.call(n)},egret_native.Audio.preloadEffectAsync(this.url,r)}},p.play=function(t,i){t=+t||0,i=+i||0;var n=new e.NativeSoundChannel;return n.$url=this.url,n.$loops=i,n.$startTime=t,n.$type=this.type,n.$play(),n},p.close=function(){},p.destroy=function(){this.loaded=!1,this.type==t.Sound.EFFECT?egret_native.Audio.unloadEffect(this.url):egret_native_sound.currentPath==this.url&&egret_native.Audio.stopBackgroundMusic(!0)},n.MUSIC="music",n.EFFECT="effect",n}(t.EventDispatcher);e.NativeSound=i,t.registerClass(i,"egret.native.NativeSound",["egret.Sound"]),t.Sound=i}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){var i=this;e.call(this),this.loaded=!1,this.closed=!1,this.heightSet=0/0,this.widthSet=0/0,this._fullscreen=!0,this.onVideoLoaded=function(){i.video.removeEventListener("canplay",i.onVideoLoaded);{var e=i.video;i.width,i.height}i.loaded=!0,e.pause(),i.posterData&&(i.posterData.width=e.videoWidth,i.posterData.height=e.videoHeight),e.width=e.videoWidth,e.height=e.videoHeight,i.$invalidateContentBounds(),i.width=isNaN(i.widthSet)?e.videoWidth:i.widthSet,i.height=isNaN(i.heightSet)?e.videoHeight:i.heightSet,i.dispatchEventWith(t.Event.COMPLETE)},this.$renderRegion=new t.sys.Region,this.once(t.Event.ADDED_TO_STAGE,this.loadPoster,this)}__extends(i,e);var n=__define,r=i;return p=r.prototype,p.load=function(e){var i=this;if(this.src=e,!this.video||this.video.src!=e){var n=document.createElement("video");n.src=e,n.setAttribute("webkit-playsinline","webkit-playsinline"),n.addEventListener("canplay",this.onVideoLoaded),n.addEventListener("error",function(){return i.onVideoError()}),n.addEventListener("ended",function(){return i.onVideoEnded()}),n.load(),n.play(),t.setTimeout(function(){return n.pause()},this,16),this.video=n}},p.play=function(e,i){var n=this;if(void 0===i&&(i=!1),0==this.loaded)return this.load(this.src),void this.once(t.Event.COMPLETE,function(){return n.play(e,i)},this);var r=this.video;void 0!=e&&(r.currentTime=+e||0),r.loop=!!i,r.play(),r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.height="0",r.style.width="0",document.body.appendChild(r);var s=!1;this._fullscreen&&(s=this.goFullscreen()),0==s&&(r.setAttribute("webkit-playsinline","webkit-playsinline"),t.startTick(this.markDirty,this))},p.goFullscreen=function(){var e=this,i=this.video;if(i.webkitRequestFullscreen)i.webkitRequestFullscreen();else if(i.webkitRequestFullScreen)i.webkitRequestFullScreen();else if(i.msRequestFullscreen)i.msRequestFullscreen();else{if(!i.requestFullscreen)return!1;i.requestFullscreen()}return i.removeAttribute("webkit-playsinline"),i.onwebkitfullscreenchange=function(){var t=!!i.webkitDisplayingFullscreen;t||e.pause()},i.onwebkitfullscreenerror=function(){t.$error(3003)},!0},p.close=function(){this.pause(),0==this.loaded&&this.video&&(this.video.src=""),this.video&&(this.video.remove&&this.video.remove(),this.video=null),this.closed=!0,this.loaded=!1},p.pause=function(){this.video&&(this.video.pause(),this.onVideoEnded()),t.stopTick(this.markDirty,this)},n(p,"volume",function(){return this.video?this.video.volume:1},function(t){this.video&&(this.video.volume=t)}),n(p,"position",function(){return this.video?this.video.currentTime:0},function(t){this.video&&(this.video.currentTime=t)}),n(p,"fullscreen",function(){return this._fullscreen},function(t){this._fullscreen=!!t,this.video&&0==this.video.paused&&this.goFullscreen()}),n(p,"bitmapData",function(){return this.video&&this.loaded?(this._bitmapData||(this.video.width=this.video.videoWidth,this.video.height=this.video.videoHeight,this._bitmapData=t.web.toBitmapData(this.video)),this._bitmapData):null}),p.loadPoster=function(){var e=this,i=this.poster;if(i){var n=new t.ImageLoader;n.once(t.Event.COMPLETE,function(){var t=n.data;e.posterData=n.data,e.video&&e.loaded?(t.width=e.video.videoWidth,t.height=e.video.videoHeight):(t.width=isNaN(e.widthSet)?t.width:e.widthSet,t.height=isNaN(e.heightSet)?t.height:e.heightSet),e.$invalidateContentBounds()},this),n.load(i)}},p.onVideoEnded=function(){this.dispatchEventWith(t.Event.ENDED),this.$invalidateContentBounds()},p.onVideoError=function(){this.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},p.$measureContentBounds=function(t){var e=this.bitmapData,i=this.posterData;e?t.setTo(0,0,e.width,e.height):i?t.setTo(0,0,i.width,i.height):t.setEmpty()},p.$render=function(t){var e=this.bitmapData,i=this.posterData;(!e||this.video&&this.video.paused)&&i&&t.drawImage(i,0,0,i.width,i.height),e&&(t.imageSmoothingEnabled=!0,t.drawImage(e,0,0,e.width,e.height))},p.markDirty=function(){return this.$invalidate(),!0},p.$setHeight=function(t){e.prototype.$setHeight.call(this,t),this.heightSet=+t||0},p.$setWidth=function(t){e.prototype.$setWidth.call(this,t),this.widthSet=+t||0},i}(t.DisplayObject);e.WebVideo=i,t.registerClass(i,"egret.web.WebVideo",["egret.Video"]),t.Video=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t){return egret_native.getOption(t)}e.getOption=i,t.getOption=i}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(i){e.call(this),egret_native.pauseApp=function(){i.dispatchEvent(new t.Event(t.Event.DEACTIVATE)),egret_native.Audio.pauseBackgroundMusic(),egret_native.Audio.pauseAllEffects()},egret_native.resumeApp=function(){i.dispatchEvent(new t.Event(t.Event.ACTIVATE)),egret_native.Audio.resumeBackgroundMusic(),egret_native.Audio.resumeAllEffects()}}__extends(i,e);var n=i;return p=n.prototype,i}(t.HashObject);e.NativeHideHandler=i,t.registerClass(i,"egret.native.NativeHideHandler")}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.apply(this,arguments),this._downCount=0,this._path=null,this._bytesTotal=0}__extends(i,e);var n=i;return p=n.prototype,p.load=function(t,e){this._downCount=0,this._path=t,this._bytesTotal=e,this.reload()},p.reload=function(){if(this._downCount>=3)return void this.downloadFileError();this._downCount++;var e=t.PromiseObject.create(),i=this;e.onSuccessFunc=function(){i.loadOver()},e.onErrorFunc=function(){i.reload()},e.downloadingSizeFunc=function(t){i.downloadingProgress(t)},egret_native.download(this._path,this._path,e)},p.downloadingProgress=function(e){t.ProgressEvent.dispatchProgressEvent(this,t.ProgressEvent.PROGRESS,e,this._bytesTotal)},p.downloadFileError=function(){this.dispatchEvent(new t.Event(t.IOErrorEvent.IO_ERROR))},p.loadOver=function(){this.dispatchEvent(new t.Event(t.Event.COMPLETE))},i}(t.EventDispatcher);t.NativeResourceLoader=e,t.registerClass(e,"egret.NativeResourceLoader")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(i){e.call(this),this.$touch=new t.sys.TouchHandler(i);var n=this;egret_native.onTouchesBegin=function(t,e,i,r){n.$executeTouchCallback(t,e,i,r,n.$touch.onTouchBegin)},egret_native.onTouchesMove=function(t,e,i,r){n.$executeTouchCallback(t,e,i,r,n.$touch.onTouchMove)},egret_native.onTouchesEnd=function(t,e,i,r){n.$executeTouchCallback(t,e,i,r,n.$touch.onTouchEnd)},egret_native.onTouchesCancel=function(){}}__extends(i,e);var n=i;return p=n.prototype,p.$executeTouchCallback=function(t,e,i,n,r){for(var s=0;t>s;s++){var a=e[s],o=i[s],h=n[s];r.call(this.$touch,o,h,a)}},p.$updateMaxTouches=function(){this.$touch.$setMaxTouches()},i}(t.HashObject);e.NativeTouchHandler=i,t.registerClass(i,"egret.native.NativeTouchHandler")}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.GET="GET",t.POST="POST",t}();t.HttpMethod=e,t.registerClass(e,"egret.HttpMethod")}(egret||(egret={}));var egret;!function(t){t.HttpRequest}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.TEXT="text",t.ARRAY_BUFFER="arraybuffer",t}();t.HttpResponseType=e,t.registerClass(e,"egret.HttpResponseType")}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(e){function i(){e.apply(this,arguments),this.data=null,this.crossOrigin=null}__extends(i,e);var n=i;return p=n.prototype,p.load=function(t){this.check(t)},p.check=function(t){var e=this;e.isNetUrl(t)?e.download(t):egret_native.isFileExists(t)?e.loadTexture(t):e.download(t)},p.download=function(e){var i=this,n=t.PromiseObject.create();n.onSuccessFunc=function(){i.loadTexture(e)},n.onErrorFunc=function(){i.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},egret_native.download(e,e,n)},p.loadTexture=function(e){var i=this,n=new t.PromiseObject;n.onSuccessFunc=function(e){i.data=e,i.dispatchEventWith(t.Event.COMPLETE)},n.onErrorFunc=function(){i.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},egret_native.Texture.addTextureAsyn(e,n)},p.isNetUrl=function(t){return-1!=t.indexOf("http://")},i}(t.EventDispatcher);e.NativeImageLoader=i,t.registerClass(i,"egret.native.NativeImageLoader",["egret.ImageLoader"]),t.ImageLoader=i}(e=t["native"]||(t["native"]={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=window.URL||window.webkitURL,n=i&&"iOS"==t.Capabilities.os;if(n){var r=window.navigator.userAgent.toLowerCase().match(/cpu [^\d]*\d.*like mac os x/)[0];parseInt(r.match(/\d(_\d)*/)[0].charAt(0))<7&&(n=!1)}var s=function(r){function s(){r.apply(this,arguments),this.data=null,this.crossOrigin=null,this.currentImage=null,this.request=null}__extends(s,r);var a=s;return p=a.prototype,p.load=function(e){if(n&&0!=e.indexOf("data:")&&0!=e.indexOf("http:")&&0!=e.indexOf("https:")){var i=this.request;i||(i=this.request=new t.web.WebHttpRequest,i.addEventListener(t.Event.COMPLETE,this.onBlobLoaded,this),i.addEventListener(t.IOErrorEvent.IO_ERROR,this.onBlobError,this),i.responseType="blob"),i.open(e),i.send()}else this.loadImage(e)},p.onBlobLoaded=function(){var t=this.request.response;this.loadImage(i.createObjectURL(t))},p.onBlobError=function(){this.emitIOError(this.currentURL)},p.loadImage=function(t){var e=new Image;this.data=null,this.currentImage=e,this.crossOrigin&&(e.crossOrigin=this.crossOrigin),e.onload=this.onImageComplete.bind(this),e.onerror=this.onLoadError.bind(this),e.src=t},p.onImageComplete=function(i){var n=this.getImage(i);if(n){this.data=e.toBitmapData(n);var r=this;window.setTimeout(function(){r.dispatchEventWith(t.Event.COMPLETE)},0)}},p.onLoadError=function(t){var e=this.getImage(t);e&&this.emitIOError(e.src)},p.emitIOError=function(e){var i=this;window.setTimeout(function(){i.dispatchEventWith(t.IOErrorEvent.IO_ERROR)},0)},p.getImage=function(t){var e=t.target;return n&&i.revokeObjectURL(e.src),e.onerror=null,e.onload=null,this.currentImage!==e?null:(this.currentImage=null,e)},s}(t.EventDispatcher);e.WebImageLoader=s,t.registerClass(s,"egret.web.WebImageLoader",["egret.ImageLoader"]),t.ImageLoader=s}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(){}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this._textWidth=0,this._textHeight=0,this._textOffsetX=0,this._textOffsetY=0,this._lineHeights=[],this.$renderRegion=new t.sys.Region,this.$BitmapText={0:0/0,1:0/0,2:"",3:0,4:0,5:null,6:!1,7:!1}}__extends(i,e);var n=__define,r=i;return p=r.prototype,n(p,"text",function(){return this.$BitmapText[2]},function(t){this.$setText(t)}),p.$setText=function(t){var e=this.$BitmapText;t!=e[2]&&(e[2]=t,this.$invalidateContentBounds())},p.$getWidth=function(){var t=this.$BitmapText[0];return isNaN(t)?this.$getContentBounds().width:t},p.$setWidth=function(t){var e=this.$BitmapText;0>t||t==e[0]||(e[0]=t,this.$invalidateContentBounds())},p.$invalidateContentBounds=function(){e.prototype.$invalidateContentBounds.call(this),this.$BitmapText[7]=!0},p.$getHeight=function(){var t=this.$BitmapText[1];return isNaN(t)?this.$getContentBounds().height:t},p.$setHeight=function(t){var e=this.$BitmapText;0>t||t==e[1]||(e[1]=t,this.$invalidateContentBounds())},n(p,"font",function(){return this.$BitmapText[5]},function(t){this.$setFont(t)}),p.$setFont=function(t){var e=this.$BitmapText;e[5]!=t&&(e[5]=t,this.$BitmapText[6]=!0,this.$invalidateContentBounds())},n(p,"lineSpacing",function(){return this.$BitmapText[3]},function(t){var e=this.$BitmapText;e[3]!=t&&(e[3]=t,this.$invalidateContentBounds())}),n(p,"letterSpacing",function(){return this.$BitmapText[4]},function(t){var e=this.$BitmapText;e[4]!=t&&(e[4]=t,this.$invalidateContentBounds())}),p.$render=function(e){var n=this,r=n._getTextLines(),s=r.length;if(0!=s)for(var a=n.$BitmapText[5],o=a._getFirstCharHeight(),h=Math.ceil(o*i.EMPTY_FACTOR),l=0,u=!isNaN(n.$BitmapText[1]),c=n.$BitmapText[1],p=n._lineHeights,d=0;s>d;d++){var f=p[d];if(u&&d>0&&l+f>c)break;for(var g=r[d],v=g.length,m=0,_=0;v>_;_++){var $=g.charAt(_),y=a.getTexture($);if(y){var x=y._bitmapWidth,T=y._bitmapHeight;e.drawImage(y._bitmapData,y._bitmapX,y._bitmapY,x,T,m+y._offsetX,l+y._offsetY,y.$getScaleBitmapWidth(),y.$getScaleBitmapHeight()),m+=y.$getTextureWidth()+n.$BitmapText[4]}else" "==$?m+=h:t.$warn(1011,$)}l+=f+n.$BitmapText[3]}},p.$measureContentBounds=function(t){var e=this._getTextLines();0==e.length?t.setEmpty():t.setTo(this._textOffsetX,this._textOffsetY,this._textWidth-this._textOffsetX,this._textHeight-this._textOffsetY+(e.length-1)*this.$BitmapText[3])},p._getTextLines=function(){var e=this;
if(!this.$BitmapText[7])return e._textLines;var n=[];e._textLines=n,this.$BitmapText[7]=!1;var r=[];if(e._lineHeights=r,!e.$BitmapText[2]||!e.$BitmapText[5])return n;for(var s=0,a=0,o=0,h=0,l=!isNaN(e.$BitmapText[0]),u=e.$BitmapText[0],c=e.$BitmapText[5],p=c._getFirstCharHeight(),d=Math.ceil(p*i.EMPTY_FACTOR),f=e.$BitmapText[2],g=f.split(/(?:\r\n|\r|\n)/),v=g.length,m=!0,_=0;v>_;_++){for(var $=g[_],y=$.length,x=0,T=0,E=!0,b=0;y>b;b++){E||(T+=e.$BitmapText[4]);var w,C,S=$.charAt(b),F=0,O=0,M=c.getTexture(S);if(M)w=M.$getTextureWidth(),C=M.$getTextureHeight(),F=M._offsetX,O=M._offsetY;else{if(" "!=S){t.$warn(1011,S),E&&(E=!1);continue}w=d,C=p}E&&(E=!1,o=Math.min(F,o)),m&&(h=Math.min(O,h)),l&&b>0&&T+w>u?(n.push($.substring(0,b)),r.push(x),a+=x,s=Math.max(T,s),$=$.substring(b),y=$.length,b=0,T=w,x=C):(T+=w,x=Math.max(C,x))}m&&(m=!1),n.push($),r.push(x),a+=x,s=Math.max(T,s)}return e._textWidth=s,e._textHeight=a,e._textOffsetX=o,e._textOffsetY=h,n},i.EMPTY_FACTOR=.33,i}(t.DisplayObject);t.BitmapText=e,t.registerClass(e,"egret.BitmapText")}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){this.replaceArr=[],this.resutlArr=[],this.initReplaceArr()}var e=t;return p=e.prototype,p.initReplaceArr=function(){this.replaceArr=[],this.replaceArr.push([/&lt;/g,"<"]),this.replaceArr.push([/&gt;/g,">"]),this.replaceArr.push([/&amp;/g,"&"]),this.replaceArr.push([/&quot;/g,'"']),this.replaceArr.push([/&apos;/g,"'"])},p.replaceSpecial=function(t){for(var e=0;e<this.replaceArr.length;e++){var i=this.replaceArr[e][0],n=this.replaceArr[e][1];t=t.replace(i,n)}return t},p.parser=function(t){this.stackArray=[],this.resutlArr=[];for(var e=0,i=t.length;i>e;){var n=t.indexOf("<",e);if(0>n)this.addToResultArr(t.substring(e)),e=i;else{this.addToResultArr(t.substring(e,n));var r=t.indexOf(">",n);"/"==t.charAt(n+1)?this.stackArray.pop():this.addToArray(t.substring(n+1,r)),e=r+1}}return this.resutlArr},p.addToResultArr=function(t){""!=t&&(t=this.replaceSpecial(t),this.resutlArr.push(this.stackArray.length>0?{text:t,style:this.stackArray[this.stackArray.length-1]}:{text:t}))},p.changeStringToObject=function(t){t=t.trim();var e={},i=[];if("i"==t.charAt(0)||"b"==t.charAt(0))this.addProperty(e,t,"true");else if(i=t.match(/^(font|a)\s/)){t=t.substring(i[0].length).trim();for(var n,r=0;n=t.match(this.getHeadReg());){var s=n[0],a="",t=t.substring(s.length).trim();if('"'==t.charAt(0)){var r=t.indexOf('"',1);a=t.substring(1,r),r+=1}else if("'"==t.charAt(0)){var r=t.indexOf("'",1);a=t.substring(1,r),r+=1}else a=t.match(/(\S)+/)[0],r=a.length;this.addProperty(e,s.substring(0,s.length-1).trim(),a.trim()),t=t.substring(r).trim()}}return e},p.getHeadReg=function(){return/^(color|textcolor|strokecolor|stroke|b|bold|i|italic|size|fontfamily|href|target)(\s)*=/},p.addProperty=function(t,e,i){switch(e.toLowerCase()){case"color":case"textcolor":i=i.replace(/#/,"0x"),t.textColor=parseInt(i);break;case"strokecolor":i=i.replace(/#/,"0x"),t.strokeColor=parseInt(i);break;case"stroke":t.stroke=parseInt(i);break;case"b":case"bold":t.bold="true"==i;break;case"i":case"italic":t.italic="true"==i;break;case"size":t.size=parseInt(i);break;case"fontfamily":t.fontFamily=i;break;case"href":t.href=this.replaceSpecial(i);break;case"target":t.target=this.replaceSpecial(i)}},p.addToArray=function(t){var e=this.changeStringToObject(t);if(0==this.stackArray.length)this.stackArray.push(e);else{var i=this.stackArray[this.stackArray.length-1];for(var n in i)null==e[n]&&(e[n]=i[n]);this.stackArray.push(e)}},t}();t.HtmlTextParser=e,t.registerClass(e,"egret.HtmlTextParser")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this._text=null,this._isFocus=!1}__extends(i,e);var n=i;return p=n.prototype,p.init=function(e){this._text=e,this.stageText=new t.StageText,this.stageText.$setTextField(this._text)},p._addStageText=function(){this.stageText.$addToStage(),this.stageText.addEventListener("updateText",this.updateTextHandler,this),this._text.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this._text.stage.addEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.addEventListener("blur",this.blurHandler,this),this.stageText.addEventListener("focus",this.focusHandler,this)},p._removeStageText=function(){this.stageText.$removeFromStage(),this.stageText.removeEventListener("updateText",this.updateTextHandler,this),this._text.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onMouseDownHandler,this),this._text.stage.removeEventListener(t.TouchEvent.TOUCH_BEGIN,this.onStageDownHandler,this),this.stageText.removeEventListener("blur",this.blurHandler,this),this.stageText.removeEventListener("focus",this.focusHandler,this)},p._getText=function(){return this.stageText.$getText()},p._setText=function(t){this.stageText.$setText(t)},p.focusHandler=function(e){this._isFocus||(this._isFocus=!0,e.showing||(this._text._isTyping=!0),this._text.$invalidateContentBounds(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_IN,!0)))},p.blurHandler=function(){this._isFocus&&(this._isFocus=!1,this._text._isTyping=!1,this._text.$invalidateContentBounds(),this.stageText.$onBlur(),this._text.dispatchEvent(new t.FocusEvent(t.FocusEvent.FOCUS_OUT,!0)))},p.onMouseDownHandler=function(t){t.stopPropagation();this._text.visible&&(this._isFocus||this.stageText.$show())},p.onStageDownHandler=function(){this.stageText.$hide()},p.updateTextHandler=function(){var e=this._text.$TextField,i=this.stageText.$getText(),n=!1;if(null!=e[35]){var r=new RegExp("["+e[35]+"]","g"),s=i.match(r);i=s?s.join(""):"",n=!0}null!=e[36]&&(r=new RegExp("[^"+e[36]+"]","g"),s=i.match(r),i=s?s.join(""):"",n=!0),n&&this.stageText.$getText()!=i&&this.stageText.$setText(i),this.resetText(),this._text.dispatchEvent(new t.Event(t.Event.CHANGE,!0))},p.resetText=function(){this._text._setBaseText(this.stageText.$getText())},p._hideInput=function(){this.stageText.$removeFromStage()},p._updateTransform=function(){!this._text.$visible&&this.stageText&&this._hideInput()},p._updateProperties=function(){if(this._isFocus)return this.stageText.$resetStageText(),void this._updateTransform();var t=this._text.$stage;if(null==t);else for(var e=this._text,i=e.$visible;;){if(!i)break;if(e=e.parent,e==t)break;i=e.$visible}this.stageText.$setText(this._text.$TextField[13]),this.stageText.$resetStageText(),this._updateTransform()},i}(t.HashObject);t.InputController=e,t.registerClass(e,"egret.InputController")}(egret||(egret={}));var egret;!function(t){var e=function(e){function i(){e.call(this),this.textValue="",this.isFinishDown=!1,this.textValue=""}__extends(i,e);var n=i;return p=n.prototype,p.$getText=function(){return this.textValue||(this.textValue=""),this.textValue},p.$setText=function(t){this.textValue=t},p.$onBlur=function(){},p.showScreenKeyboard=function(){var e=this;e.dispatchEvent(new t.Event("focus")),t.Event.dispatchEvent(e,"focus",!1,{showing:!0}),egret_native.EGT_TextInput=function(i){e.$textfield.multiline?e.isFinishDown&&(e.isFinishDown=!1,e.textValue=i,e.dispatchEvent(new t.Event("updateText"))):(e.textValue=i.replace(/[\n|\r]/,""),egret_native.TextInputOp.setKeybordOpen(!1),e.dispatchEvent(new t.Event("updateText")),e.dispatchEvent(new t.Event("blur")))},egret_native.EGT_keyboardFinish=function(){e.$textfield.multiline&&(e.isFinishDown=!0),e.dispatchEvent(new t.Event("blur"))}},p.$show=function(){var t=this;egret_native.EGT_getTextEditerContentText=function(){return t.$getText()},egret_native.EGT_keyboardDidShow=function(){t.showScreenKeyboard(),egret_native.EGT_keyboardDidShow=function(){}},egret_native.TextInputOp.setInputTextMaxLenght(t.$textfield.maxChars>0?t.$textfield.maxChars:-1),egret_native.TextInputOp.setKeybordOpen(!0)},p.$hide=function(){this.dispatchEvent(new t.Event("blur")),egret_native.TextInputOp.setKeybordOpen(!1)},p.$resetStageText=function(){},p.$addToStage=function(){},p.$removeFromStage=function(){},p.$setTextField=function(t){this.$textfield=t},i}(t.EventDispatcher);t.NativeStageText=e,t.registerClass(e,"egret.NativeStageText",["egret.StageText"]),t.StageText=e}(egret||(egret={}));var egret;!function(t){var e=function(){function t(){}var e=t;return p=e.prototype,t.LITTLE_ENDIAN="littleEndian",t.BIG_ENDIAN="bigEndian",t}();t.Endian=e,t.registerClass(e,"egret.Endian");var i=function(){function i(t){this.BUFFER_EXT_SIZE=0,this.EOF_byte=-1,this.EOF_code_point=-1,this._setArrayBuffer(t||new ArrayBuffer(this.BUFFER_EXT_SIZE)),this.endian=e.BIG_ENDIAN}var n=__define,r=i;return p=r.prototype,p._setArrayBuffer=function(t){this.write_position=t.byteLength,this.data=new DataView(t),this._position=0},p.setArrayBuffer=function(){},n(p,"buffer",function(){return this.data.buffer},function(t){this.data=new DataView(t)}),n(p,"dataView",function(){return this.data},function(t){this.data=t,this.write_position=t.byteLength}),n(p,"bufferOffset",function(){return this.data.byteOffset}),n(p,"position",function(){return this._position},function(t){this._position=t,this.write_position=t>this.write_position?t:this.write_position}),n(p,"length",function(){return this.write_position},function(t){this.write_position=t;var e=new Uint8Array(new ArrayBuffer(t)),i=this.data.buffer.byteLength;i>t&&(this._position=t);var n=Math.min(i,t);e.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=e.buffer}),n(p,"bytesAvailable",function(){return this.data.byteLength-this._position}),p.clear=function(){this._setArrayBuffer(new ArrayBuffer(this.BUFFER_EXT_SIZE))},p.readBoolean=function(){return this.validate(i.SIZE_OF_BOOLEAN)?0!=this.data.getUint8(this.position++):null},p.readByte=function(){return this.validate(i.SIZE_OF_INT8)?this.data.getInt8(this.position++):null},p.readBytes=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),0==n)n=this.bytesAvailable;else if(!this.validate(n))return null;t?t.validateBuffer(n):t=new i(new ArrayBuffer(n));for(var r=0;n>r;r++)t.data.setUint8(r+e,this.data.getUint8(this.position++))},p.readDouble=function(){if(!this.validate(i.SIZE_OF_FLOAT64))return null;var t=this.data.getFloat64(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT64,t},p.readFloat=function(){if(!this.validate(i.SIZE_OF_FLOAT32))return null;var t=this.data.getFloat32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_FLOAT32,t},p.readInt=function(){if(!this.validate(i.SIZE_OF_INT32))return null;var t=this.data.getInt32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT32,t},p.readShort=function(){if(!this.validate(i.SIZE_OF_INT16))return null;var t=this.data.getInt16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_INT16,t},p.readUnsignedByte=function(){return this.validate(i.SIZE_OF_UINT8)?this.data.getUint8(this.position++):null},p.readUnsignedInt=function(){if(!this.validate(i.SIZE_OF_UINT32))return null;var t=this.data.getUint32(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT32,t},p.readUnsignedShort=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t},p.readUTF=function(){if(!this.validate(i.SIZE_OF_UINT16))return null;var t=this.data.getUint16(this.position,this.endian==e.LITTLE_ENDIAN);return this.position+=i.SIZE_OF_UINT16,t>0?this.readUTFBytes(t):""},p.readUTFBytes=function(t){if(!this.validate(t))return null;var e=new Uint8Array(this.buffer,this.bufferOffset+this.position,t);return this.position+=t,this.decodeUTF8(e)},p.writeBoolean=function(t){this.validateBuffer(i.SIZE_OF_BOOLEAN),this.data.setUint8(this.position++,t?1:0)},p.writeByte=function(t){this.validateBuffer(i.SIZE_OF_INT8),this.data.setInt8(this.position++,t)},p.writeBytes=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n;if(!(0>e)&&!(0>i)&&(n=0==i?t.length-e:Math.min(t.length-e,i),n>0)){this.validateBuffer(n);for(var r=new DataView(t.buffer),s=e;n+e>s;s++)this.data.setUint8(this.position++,r.getUint8(s))}},p.writeDouble=function(t){this.validateBuffer(i.SIZE_OF_FLOAT64),this.data.setFloat64(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT64},p.writeFloat=function(t){this.validateBuffer(i.SIZE_OF_FLOAT32),this.data.setFloat32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_FLOAT32},p.writeInt=function(t){this.validateBuffer(i.SIZE_OF_INT32),this.data.setInt32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT32},p.writeShort=function(t){this.validateBuffer(i.SIZE_OF_INT16),this.data.setInt16(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_INT16},p.writeUnsignedInt=function(t){this.validateBuffer(i.SIZE_OF_UINT32),this.data.setUint32(this.position,t,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT32},p.writeUTF=function(t){var n=this.encodeUTF8(t),r=n.length;this.validateBuffer(i.SIZE_OF_UINT16+r),this.data.setUint16(this.position,r,this.endian==e.LITTLE_ENDIAN),this.position+=i.SIZE_OF_UINT16,this._writeUint8Array(n,!1)},p.writeUTFBytes=function(t){this._writeUint8Array(this.encodeUTF8(t))},p.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},p._writeUint8Array=function(t,e){void 0===e&&(e=!0),e&&this.validateBuffer(this.position+t.length);for(var i=0;i<t.length;i++)this.data.setUint8(this.position++,t[i])},p.validate=function(e){return this.data.byteLength>0&&this._position+e<=this.data.byteLength?!0:void t.$error(1025)},p.validateBuffer=function(t,e){if(void 0===e&&(e=!1),this.write_position=t>this.write_position?t:this.write_position,t+=this._position,this.data.byteLength<t||e){var i=new Uint8Array(new ArrayBuffer(t+this.BUFFER_EXT_SIZE)),n=Math.min(this.data.buffer.byteLength,t+this.BUFFER_EXT_SIZE);i.set(new Uint8Array(this.data.buffer,0,n)),this.buffer=i.buffer}},p.encodeUTF8=function(t){for(var e=0,i=this.stringToCodePoints(t),n=[];i.length>e;){var r=i[e++];if(this.inRange(r,55296,57343))this.encoderError(r);else if(this.inRange(r,0,127))n.push(r);else{var s,a;for(this.inRange(r,128,2047)?(s=1,a=192):this.inRange(r,2048,65535)?(s=2,a=224):this.inRange(r,65536,1114111)&&(s=3,a=240),n.push(this.div(r,Math.pow(64,s))+a);s>0;){var o=this.div(r,Math.pow(64,s-1));n.push(128+o%64),s-=1}}}return new Uint8Array(n)},p.decodeUTF8=function(t){for(var e,i=!1,n=0,r="",s=0,a=0,o=0,h=0;t.length>n;){var l=t[n++];if(l==this.EOF_byte)e=0!=a?this.decoderError(i):this.EOF_code_point;else if(0==a)this.inRange(l,0,127)?e=l:(this.inRange(l,194,223)?(a=1,h=128,s=l-192):this.inRange(l,224,239)?(a=2,h=2048,s=l-224):this.inRange(l,240,244)?(a=3,h=65536,s=l-240):this.decoderError(i),s*=Math.pow(64,a),e=null);else if(this.inRange(l,128,191))if(o+=1,s+=(l-128)*Math.pow(64,a-o),o!==a)e=null;else{var u=s,c=h;s=0,a=0,o=0,h=0,e=this.inRange(u,c,1114111)&&!this.inRange(u,55296,57343)?u:this.decoderError(i,l)}else s=0,a=0,o=0,h=0,n--,e=this.decoderError(i,l);null!==e&&e!==this.EOF_code_point&&(65535>=e?e>0&&(r+=String.fromCharCode(e)):(e-=65536,r+=String.fromCharCode(55296+(e>>10&1023)),r+=String.fromCharCode(56320+(1023&e))))}return r},p.encoderError=function(e){t.$error(1026,e)},p.decoderError=function(e,i){return e&&t.$error(1027),i||65533},p.inRange=function(t,e,i){return t>=e&&i>=t},p.div=function(t,e){return Math.floor(t/e)},p.stringToCodePoints=function(t){for(var e=[],i=0,n=t.length;i<t.length;){var r=t.charCodeAt(i);if(this.inRange(r,55296,57343))if(this.inRange(r,56320,57343))e.push(65533);else if(i==n-1)e.push(65533);else{var s=t.charCodeAt(i+1);if(this.inRange(s,56320,57343)){var a=1023&r,o=1023&s;i+=1,e.push(65536+(a<<10)+o)}else e.push(65533)}else e.push(r);i+=1}return e},i.SIZE_OF_BOOLEAN=1,i.SIZE_OF_INT8=1,i.SIZE_OF_INT16=2,i.SIZE_OF_INT32=4,i.SIZE_OF_UINT8=1,i.SIZE_OF_UINT16=2,i.SIZE_OF_UINT32=4,i.SIZE_OF_FLOAT32=4,i.SIZE_OF_FLOAT64=8,i}();t.ByteArray=i,t.registerClass(i,"egret.ByteArray")}(egret||(egret={}));var egret;!function(t){var e=function(){function e(){}var i=e;return p=i.prototype,e.mapClass=function(t,e,i){void 0===i&&(i="");var n=this.getKey(t)+"#"+i;this.mapClassDic[n]=e},e.getKey=function(e){return"string"==typeof e?e:t.getQualifiedClassName(e)},e.mapValue=function(t,e,i){void 0===i&&(i="");var n=this.getKey(t)+"#"+i;this.mapValueDic[n]=e},e.hasMapRule=function(t,e){void 0===e&&(e="");var i=this.getKey(t)+"#"+e;return this.mapValueDic[i]||this.mapClassDic[i]?!0:!1},e.getInstance=function(e,i){void 0===i&&(i="");var n=this.getKey(e)+"#"+i;if(this.mapValueDic[n])return this.mapValueDic[n];var r=this.mapClassDic[n];if(r){var s=new r;return this.mapValueDic[n]=s,delete this.mapClassDic[n],s}t.$error(1028,n)},e.mapClassDic={},e.mapValueDic={},e}();t.Injector=e,t.registerClass(e,"egret.Injector")}(egret||(egret={}));var egret;!function(t){var e=function(t){function e(e){void 0===e&&(e=300),t.call(this),this.objectPool=[],this._length=0,1>e&&(e=1),this.autoDisposeTime=e,this.frameCount=0}__extends(e,t);var i=__define,n=e;return p=n.prototype,p.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},i(p,"length",function(){return this._length}),p.push=function(t){var i=this.objectPool;-1==i.indexOf(t)&&(i.push(t),t.__recycle&&t.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,e._callBackList.push(this)))},p.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},p.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var t=e._callBackList,i=t.indexOf(this);-1!=i&&t.splice(i,1)},e._callBackList=[],e}(t.HashObject);t.Recycler=e,t.registerClass(e,"egret.Recycler")}(egret||(egret={}));var egret;!function(t){function e(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=Object.getPrototypeOf(t),s=r.__sets__;null==s&&(s=r.__sets__={});var a=s[e];if(a)return a.apply(t,i);for(var o=Object.getPrototypeOf(r);!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);a=Object.getOwnPropertyDescriptor(o,e).set,s[e]=a,a.apply(t,i)}function i(t,e){var i=Object.getPrototypeOf(t),n=i.__gets__;null==n&&(n=i.__gets__={});var r=n[e];if(r)return r.call(t);for(var s=Object.getPrototypeOf(i);!s.hasOwnProperty(e);)s=Object.getPrototypeOf(s);return r=Object.getOwnPropertyDescriptor(s,e).get,n[e]=r,r.call(t)}t.superSetter=e,t.superGetter=i}(egret||(egret={}));var egret;!function(t){function e(e){if(!e||"object"!=typeof e)return null;var i=e.prototype?e.prototype:Object.getPrototypeOf(e),n=Object.getPrototypeOf(i);if(!n)return null;var r=t.getQualifiedClassName(n.constructor);return r?r:null}t.getQualifiedSuperclassName=e}(egret||(egret={}));var egret;!function(t){function e(e){var i=t.getDefinitionByName(e);return i?!0:!1}t.hasDefinition=e}(egret||(egret={}));var egret;!function(t){function e(t,e){if(!t||"object"!=typeof t)return!1;var i=Object.getPrototypeOf(t),n=i?i.__types__:null;return n?-1!==n.indexOf(e):!1}t.is=e}(egret||(egret={}));var egret;!function(t){function e(e,i,h){for(var l=[],u=3;u<arguments.length;u++)l[u-3]=arguments[u];var c={listener:e,thisObject:i,delay:h,originDelay:h,params:l};return a++,1==a&&(o=t.getTimer(),t.sys.$ticker.$startTick(n,null)),s++,r[s]=c,s}function i(e){r[e]&&(a--,delete r[e],0==a&&t.sys.$ticker.$stopTick(n,null))}function n(t){var e=t-o;o=t;for(var i in r){var n=r[i];n.delay-=e,n.delay<=0&&(n.delay=n.originDelay,n.listener.apply(n.thisObject,n.params))}}var r={},s=0,a=0,o=0;t.setInterval=e,t.clearInterval=i}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(){for(var t=document.querySelectorAll(".egret-player"),e=t.length,i=0;e>i;i++){var n=t[i],r=n["egret-player"];r.updateScreenSize()}}function n(){var i=t.sys.$ticker;r(i);var n=new e.CanvasFactory;t.sys.surfaceFactory=n,t.sys.screenAdapter||(t.sys.screenAdapter=new t.sys.ScreenAdapter);for(var s=document.querySelectorAll(".egret-player"),a=s.length,o=0;a>o;o++){var h=s[o],l=new e.WebPlayer(h);h["egret-player"]=l}}function r(t){function e(){t.update(),i.call(window,e)}var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;i||(i=function(t){return window.setTimeout(t,1e3/60)}),i.call(window,e)}function s(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]);return e}window.isNaN=function(t){return t=+t,t!==t},t.warn=function(){console.warn.apply(console,s(arguments))},t.error=function(){console.error.apply(console,s(arguments))},t.assert=function(){console.assert.apply(console,s(arguments))},t.log=function(){console.log.apply(console,s(arguments))},CanvasRenderingContext2D.prototype.begin=function(){},CanvasRenderingContext2D.prototype.end=function(){},t.runEgret=n,t.updateAllScreens=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){var i=function(){function e(){}var i=e;return p=i.prototype,e.detect=function(){var i=t.Capabilities,n=navigator.userAgent.toLowerCase();i.$isMobile=-1!=n.indexOf("mobile")||-1!=n.indexOf("android"),i.$isMobile?n.indexOf("windows")<0&&(-1!=n.indexOf("iphone")||-1!=n.indexOf("ipad")||-1!=n.indexOf("ipod"))?i.$os="iOS":-1!=n.indexOf("android")&&-1!=n.indexOf("linux")?i.$os="Android":-1!=n.indexOf("windows")&&(i.$os="Windows Phone"):-1!=n.indexOf("windows nt")?i.$os="Windows PC":-1!=n.indexOf("mac os")&&(i.$os="Mac OS");var r=e.checkHtml5Support();i.$hasGeolocation=r.geo,i.$hasMotion=r.m,i.$hasOrientation=r.ortt;var s=(navigator.language||navigator.browserLanguage).toLowerCase(),a=s.split("-");a.length>1&&(a[1]=a[1].toUpperCase()),i.$language=a.join("-")},e.checkHtml5Support=function(){var t=("webkitAudioContext"in window||"AudioContext"in window,"geolocation"in navigator),e="DeviceOrientationEvent"in window,i="DeviceMotionEvent"in window;return{geo:t,ortt:e,m:i}},e}();e.WebCapability=i,t.registerClass(i,"egret.web.WebCapability"),i.detect()}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t){if(window.location){var e=location.search;if(""==e)return"";e=e.slice(1);for(var i=e.split("&"),n=i.length,r=0;n>r;r++){var s=i[r],a=s.split("=");if(a[0]==t)return a[1]}}return""}e.getOption=i,t.getOption=i}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(){function e(e,i){var n=t.sys.surfaceFactory.create(!0);if(!n)return null;var r=e.$getTextureWidth(),s=e.$getTextureHeight();null==i&&(i=t.$TempRectangle,i.x=0,i.y=0,i.width=r,i.height=s),i.x=Math.min(i.x,r-1),i.y=Math.min(i.y,s-1),i.width=Math.min(i.width,r-i.x),i.height=Math.min(i.height,s-i.y);var a=i.width,o=i.height;n.width=a,n.height=o,n.style.width=a+"px",n.style.height=o+"px";var h=e;n.renderContext.imageSmoothingEnabled=!1;var l=Math.round(h._offsetX),u=Math.round(h._offsetY),c=h._bitmapWidth,p=h._bitmapHeight;return n.renderContext.drawImage(h._bitmapData,h._bitmapX+i.x/t.$TextureScaleFactor,h._bitmapY+i.y/t.$TextureScaleFactor,c*i.width/r,p*i.height/s,l,u,i.width,i.height),n}function i(i,n){try{var r=e(this,n),s=r.toDataURL(i);return t.sys.surfaceFactory.release(r),s}catch(a){t.$error(1033)}return null}function n(t,e,n){var r=i.call(this,t,n);if(null!=r){var s=r.replace(/^data:image[^;]*/,"data:image/octet-stream"),a=document.createElement("a");a.download=e,a.href=s;var o=document.createEvent("HTMLEvents");o.initEvent("click",!1,!1),a.dispatchEvent(o)}}function r(i,n){if(this._bitmapData&&this._bitmapData.getContext){var r=this._bitmapData.getContext("2d").getImageData(i-this._offsetX,n-this._offsetY,1,1);return r.data}var s=e(this,new t.Rectangle(i-1,n-1,3,3));return r=s.renderContext.getImageData(1,1,1,1),r.data}function s(){this._bitmapData&&(t.Texture.$dispose(this),a(this._bitmapData))}function a(t){o(t),t.onload=null,t.onerror=null,t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKTWlDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVN3WJP3Fj7f92UPVkLY8LGXbIEAIiOsCMgQWaIQkgBhhBASQMWFiApWFBURnEhVxILVCkidiOKgKLhnQYqIWotVXDjuH9yntX167+3t+9f7vOec5/zOec8PgBESJpHmomoAOVKFPDrYH49PSMTJvYACFUjgBCAQ5svCZwXFAADwA3l4fnSwP/wBr28AAgBw1S4kEsfh/4O6UCZXACCRAOAiEucLAZBSAMguVMgUAMgYALBTs2QKAJQAAGx5fEIiAKoNAOz0ST4FANipk9wXANiiHKkIAI0BAJkoRyQCQLsAYFWBUiwCwMIAoKxAIi4EwK4BgFm2MkcCgL0FAHaOWJAPQGAAgJlCLMwAIDgCAEMeE80DIEwDoDDSv+CpX3CFuEgBAMDLlc2XS9IzFLiV0Bp38vDg4iHiwmyxQmEXKRBmCeQinJebIxNI5wNMzgwAABr50cH+OD+Q5+bk4eZm52zv9MWi/mvwbyI+IfHf/ryMAgQAEE7P79pf5eXWA3DHAbB1v2upWwDaVgBo3/ldM9sJoFoK0Hr5i3k4/EAenqFQyDwdHAoLC+0lYqG9MOOLPv8z4W/gi372/EAe/tt68ABxmkCZrcCjg/1xYW52rlKO58sEQjFu9+cj/seFf/2OKdHiNLFcLBWK8ViJuFAiTcd5uVKRRCHJleIS6X8y8R+W/QmTdw0ArIZPwE62B7XLbMB+7gECiw5Y0nYAQH7zLYwaC5EAEGc0Mnn3AACTv/mPQCsBAM2XpOMAALzoGFyolBdMxggAAESggSqwQQcMwRSswA6cwR28wBcCYQZEQAwkwDwQQgbkgBwKoRiWQRlUwDrYBLWwAxqgEZrhELTBMTgN5+ASXIHrcBcGYBiewhi8hgkEQcgIE2EhOogRYo7YIs4IF5mOBCJhSDSSgKQg6YgUUSLFyHKkAqlCapFdSCPyLXIUOY1cQPqQ28ggMor8irxHMZSBslED1AJ1QLmoHxqKxqBz0XQ0D12AlqJr0Rq0Hj2AtqKn0UvodXQAfYqOY4DRMQ5mjNlhXIyHRWCJWBomxxZj5Vg1Vo81Yx1YN3YVG8CeYe8IJAKLgBPsCF6EEMJsgpCQR1hMWEOoJewjtBK6CFcJg4Qxwicik6hPtCV6EvnEeGI6sZBYRqwm7iEeIZ4lXicOE1+TSCQOyZLkTgohJZAySQtJa0jbSC2kU6Q+0hBpnEwm65Btyd7kCLKArCCXkbeQD5BPkvvJw+S3FDrFiOJMCaIkUqSUEko1ZT/lBKWfMkKZoKpRzame1AiqiDqfWkltoHZQL1OHqRM0dZolzZsWQ8ukLaPV0JppZ2n3aC/pdLoJ3YMeRZfQl9Jr6Afp5+mD9HcMDYYNg8dIYigZaxl7GacYtxkvmUymBdOXmchUMNcyG5lnmA+Yb1VYKvYqfBWRyhKVOpVWlX6V56pUVXNVP9V5qgtUq1UPq15WfaZGVbNQ46kJ1Bar1akdVbupNq7OUndSj1DPUV+jvl/9gvpjDbKGhUaghkijVGO3xhmNIRbGMmXxWELWclYD6yxrmE1iW7L57Ex2Bfsbdi97TFNDc6pmrGaRZp3mcc0BDsax4PA52ZxKziHODc57LQMtPy2x1mqtZq1+rTfaetq+2mLtcu0W7eva73VwnUCdLJ31Om0693UJuja6UbqFutt1z+o+02PreekJ9cr1Dund0Uf1bfSj9Rfq79bv0R83MDQINpAZbDE4Y/DMkGPoa5hpuNHwhOGoEctoupHEaKPRSaMnuCbuh2fjNXgXPmasbxxirDTeZdxrPGFiaTLbpMSkxeS+Kc2Ua5pmutG003TMzMgs3KzYrMnsjjnVnGueYb7ZvNv8jYWlRZzFSos2i8eW2pZ8ywWWTZb3rJhWPlZ5VvVW16xJ1lzrLOtt1ldsUBtXmwybOpvLtqitm63Edptt3xTiFI8p0in1U27aMez87ArsmuwG7Tn2YfYl9m32zx3MHBId1jt0O3xydHXMdmxwvOuk4TTDqcSpw+lXZxtnoXOd8zUXpkuQyxKXdpcXU22niqdun3rLleUa7rrStdP1o5u7m9yt2W3U3cw9xX2r+00umxvJXcM970H08PdY4nHM452nm6fC85DnL152Xlle+70eT7OcJp7WMG3I28Rb4L3Le2A6Pj1l+s7pAz7GPgKfep+Hvqa+It89viN+1n6Zfgf8nvs7+sv9j/i/4XnyFvFOBWABwQHlAb2BGoGzA2sDHwSZBKUHNQWNBbsGLww+FUIMCQ1ZH3KTb8AX8hv5YzPcZyya0RXKCJ0VWhv6MMwmTB7WEY6GzwjfEH5vpvlM6cy2CIjgR2yIuB9pGZkX+X0UKSoyqi7qUbRTdHF09yzWrORZ+2e9jvGPqYy5O9tqtnJ2Z6xqbFJsY+ybuIC4qriBeIf4RfGXEnQTJAntieTE2MQ9ieNzAudsmjOc5JpUlnRjruXcorkX5unOy553PFk1WZB8OIWYEpeyP+WDIEJQLxhP5aduTR0T8oSbhU9FvqKNolGxt7hKPJLmnVaV9jjdO31D+miGT0Z1xjMJT1IreZEZkrkj801WRNberM/ZcdktOZSclJyjUg1plrQr1zC3KLdPZisrkw3keeZtyhuTh8r35CP5c/PbFWyFTNGjtFKuUA4WTC+oK3hbGFt4uEi9SFrUM99m/ur5IwuCFny9kLBQuLCz2Lh4WfHgIr9FuxYji1MXdy4xXVK6ZHhp8NJ9y2jLspb9UOJYUlXyannc8o5Sg9KlpUMrglc0lamUycturvRauWMVYZVkVe9ql9VbVn8qF5VfrHCsqK74sEa45uJXTl/VfPV5bdra3kq3yu3rSOuk626s91m/r0q9akHV0IbwDa0b8Y3lG19tSt50oXpq9Y7NtM3KzQM1YTXtW8y2rNvyoTaj9nqdf13LVv2tq7e+2Sba1r/dd3vzDoMdFTve75TsvLUreFdrvUV99W7S7oLdjxpiG7q/5n7duEd3T8Wej3ulewf2Re/ranRvbNyvv7+yCW1SNo0eSDpw5ZuAb9qb7Zp3tXBaKg7CQeXBJ9+mfHvjUOihzsPcw83fmX+39QjrSHkr0jq/dawto22gPaG97+iMo50dXh1Hvrf/fu8x42N1xzWPV56gnSg98fnkgpPjp2Snnp1OPz3Umdx590z8mWtdUV29Z0PPnj8XdO5Mt1/3yfPe549d8Lxw9CL3Ytslt0utPa49R35w/eFIr1tv62X3y+1XPK509E3rO9Hv03/6asDVc9f41y5dn3m978bsG7duJt0cuCW69fh29u0XdwruTNxdeo94r/y+2v3qB/oP6n+0/rFlwG3g+GDAYM/DWQ/vDgmHnv6U/9OH4dJHzEfVI0YjjY+dHx8bDRq98mTOk+GnsqcTz8p+Vv9563Or59/94vtLz1j82PAL+YvPv655qfNy76uprzrHI8cfvM55PfGm/K3O233vuO+638e9H5ko/ED+UPPR+mPHp9BP9z7nfP78L/eE8/sl0p8zAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAATSURBVHjaYvj//z8DAAAA//8DAAj8Av7TpXVhAAAAAElFTkSuQmCC",t.avaliable=!1,console.log("_disposeForCanvas")}function o(t){if(t){var e=t.webGLTexture;if(e)for(var i in e){var n=e[i],r=n.glContext;r.deleteTexture(n)}t.webGLTexture=null}}t.Texture.prototype.toDataURL=i,t.Texture.prototype.saveToFile=n,t.Texture.prototype.getPixel32=r,t.Texture.prototype.dispose=s}(e=t.web||(t.web={}))}(egret||(egret={}));var egret;!function(t){var e;!function(e){function i(t){for(var e=o.parseFromString(t,"text/xml"),i=e.childNodes.length,r=0;i>r;r++){var s=e.childNodes[r];if(1==s.nodeType)return n(s,null)}return null}function n(t,e){if("parsererror"==t.localName)throw new Error(t.textContent);for(var i=new s(t.localName,e,t.prefix,t.namespaceURI,t.nodeName),r=t.attributes,o=i.attributes,h=r.length,l=0;h>l;l++){var u=r[l],c=u.name;0!=c.indexOf("xmlns:")&&(o[c]=u.value)}var p=t.childNodes;h=p.length;var d=i.children;for(l=0;h>l;l++){var f=p[l],g=f.nodeType,v=null;if(1==g)v=n(f,i);else if(3==g){var m=f.textContent.trim();m&&(v=new a(m,i))}v&&d.push(v)}return i}var r=function(){function t(t,e){this.nodeType=t,this.parent=e}var e=t;return p=e.prototype,t}();e.XMLNode=r,t.registerClass(r,"egret.web.XMLNode");var s=function(t){function e(e,i,n,r,s){t.call(this,1,i),this.attributes={},this.children=[],this.localName=e,this.prefix=n,this.namespace=r,this.name=s}__extends(e,t);var i=e;return p=i.prototype,e}(r);e.XML=s,t.registerClass(s,"egret.web.XML");var a=function(t){function e(e,i){t.call(this,3,i),this.text=e}__extends(e,t);var i=e;return p=i.prototype,e}(r);e.XMLText=a,t.registerClass(a,"egret.web.XMLText");var o=new DOMParser;t.XML={parse:i}}(e=t.web||(t.web={}))}(egret||(egret={}));